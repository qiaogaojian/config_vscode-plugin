"use strict";var Co=Object.create;var ot=Object.defineProperty;var xo=Object.getOwnPropertyDescriptor;var Io=Object.getOwnPropertyNames;var So=Object.getPrototypeOf,Oo=Object.prototype.hasOwnProperty;var F=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),No=(i,e)=>{for(var t in e)ot(i,t,{get:e[t],enumerable:!0})},an=(i,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Io(e))!Oo.call(i,n)&&n!==t&&ot(i,n,{get:()=>e[n],enumerable:!(r=xo(e,n))||r.enumerable});return i};var W=(i,e,t)=>(t=i!=null?Co(So(i)):{},an(e||!i||!i.__esModule?ot(t,"default",{value:i,enumerable:!0}):t,i)),Ao=i=>an(ot({},"__esModule",{value:!0}),i);var lt=F(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.Event=Ae.Response=Ae.Message=void 0;var Ye=class{constructor(e){this.seq=0,this.type=e}};Ae.Message=Ye;var fr=class extends Ye{constructor(e,t){super("response"),this.request_seq=e.seq,this.command=e.command,t?(this.success=!1,this.message=t):this.success=!0}};Ae.Response=fr;var dr=class extends Ye{constructor(e,t){super("event"),this.event=e,t&&(this.body=t)}};Ae.Event=dr});var fn=F(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.ProtocolServer=void 0;var ko=require("events"),Ke=lt(),mr=class{get event(){return this._event||(this._event=(e,t)=>{this._listener=e,this._this=t;let r;return r={dispose:()=>{this._listener=void 0,this._this=void 0}},r}),this._event}fire(e){if(this._listener)try{this._listener.call(this._this,e)}catch{}}hasListener(){return!!this._listener}dispose(){this._listener=void 0,this._this=void 0}},Me=class extends ko.EventEmitter{constructor(){super(),this._sendMessage=new mr,this._pendingRequests=new Map,this.onDidSendMessage=this._sendMessage.event}dispose(){}handleMessage(e){if(e.type==="request")this.dispatchRequest(e);else if(e.type==="response"){let t=e,r=this._pendingRequests.get(t.request_seq);r&&(this._pendingRequests.delete(t.request_seq),r(t))}}_isRunningInline(){return this._sendMessage&&this._sendMessage.hasListener()}start(e,t){this._sequence=1,this._writableStream=t,this._rawData=Buffer.alloc(0),e.on("data",r=>this._handleData(r)),e.on("close",()=>{this._emitEvent(new Ke.Event("close"))}),e.on("error",r=>{this._emitEvent(new Ke.Event("error","inStream error: "+(r&&r.message)))}),t.on("error",r=>{this._emitEvent(new Ke.Event("error","outStream error: "+(r&&r.message)))}),e.resume()}stop(){this._writableStream&&this._writableStream.end()}sendEvent(e){this._send("event",e)}sendResponse(e){e.seq>0?console.error(`attempt to send more than one response for command ${e.command}`):this._send("response",e)}sendRequest(e,t,r,n){let o={command:e};if(t&&Object.keys(t).length>0&&(o.arguments=t),this._send("request",o),n){this._pendingRequests.set(o.seq,n);let a=setTimeout(()=>{clearTimeout(a);let p=this._pendingRequests.get(o.seq);p&&(this._pendingRequests.delete(o.seq),p(new Ke.Response(o,"timeout")))},r)}}dispatchRequest(e){}_emitEvent(e){this.emit(e.event,e)}_send(e,t){if(t.type=e,t.seq=this._sequence++,this._writableStream){let r=JSON.stringify(t);this._writableStream.write(`Content-Length: ${Buffer.byteLength(r,"utf8")}\r
\r
${r}`,"utf8")}this._sendMessage.fire(t)}_handleData(e){for(this._rawData=Buffer.concat([this._rawData,e]);;){if(this._contentLength>=0){if(this._rawData.length>=this._contentLength){let t=this._rawData.toString("utf8",0,this._contentLength);if(this._rawData=this._rawData.slice(this._contentLength),this._contentLength=-1,t.length>0)try{let r=JSON.parse(t);this.handleMessage(r)}catch(r){this._emitEvent(new Ke.Event("error","Error handling data: "+(r&&r.message)))}continue}}else{let t=this._rawData.indexOf(Me.TWO_CRLF);if(t!==-1){let n=this._rawData.toString("utf8",0,t).split(`\r
`);for(let o=0;o<n.length;o++){let a=n[o].split(/: +/);a[0]=="Content-Length"&&(this._contentLength=+a[1])}this._rawData=this._rawData.slice(t+Me.TWO_CRLF.length);continue}}break}}};pt.ProtocolServer=Me;Me.TWO_CRLF=`\r
\r
`});var dn=F(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.runDebugAdapter=void 0;var Fo=require("net");function qo(i){let e=0;if(process.argv.slice(2).forEach(function(r,n,o){let a=/^--server=(\d{4,5})$/.exec(r);a&&(e=parseInt(a[1],10))}),e>0)console.error(`waiting for debug protocol on port ${e}`),Fo.createServer(r=>{console.error(">> accepted connection from client"),r.on("end",()=>{console.error(`>> client connection closed
`)});let n=new i(!1,!0);n.setRunAsServer(!0),n.start(r,r)}).listen(e);else{let r=new i(!1);process.on("SIGTERM",()=>{r.shutdown()}),r.start(process.stdin,process.stdout)}}ht.runDebugAdapter=qo});var ft=F(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.DebugSession=k.ErrorDestination=k.MemoryEvent=k.InvalidatedEvent=k.ProgressEndEvent=k.ProgressUpdateEvent=k.ProgressStartEvent=k.CapabilitiesEvent=k.LoadedSourceEvent=k.ModuleEvent=k.BreakpointEvent=k.ThreadEvent=k.OutputEvent=k.ExitedEvent=k.TerminatedEvent=k.InitializedEvent=k.ContinuedEvent=k.StoppedEvent=k.CompletionItem=k.Module=k.Breakpoint=k.Variable=k.Thread=k.StackFrame=k.Scope=k.Source=void 0;var Bo=fn(),ne=lt(),Vo=dn(),mn=require("url"),gr=class{constructor(e,t,r=0,n,o){this.name=e,this.path=t,this.sourceReference=r,n&&(this.origin=n),o&&(this.adapterData=o)}};k.Source=gr;var yr=class{constructor(e,t,r=!1){this.name=e,this.variablesReference=t,this.expensive=r}};k.Scope=yr;var br=class{constructor(e,t,r,n=0,o=0){this.id=e,this.source=r,this.line=n,this.column=o,this.name=t}};k.StackFrame=br;var wr=class{constructor(e,t){this.id=e,t?this.name=t:this.name="Thread #"+e}};k.Thread=wr;var vr=class{constructor(e,t,r=0,n,o){this.name=e,this.value=t,this.variablesReference=r,typeof o=="number"&&(this.namedVariables=o),typeof n=="number"&&(this.indexedVariables=n)}};k.Variable=vr;var Tr=class{constructor(e,t,r,n){this.verified=e;let o=this;typeof t=="number"&&(o.line=t),typeof r=="number"&&(o.column=r),n&&(o.source=n)}setId(e){this.id=e}};k.Breakpoint=Tr;var Dr=class{constructor(e,t){this.id=e,this.name=t}};k.Module=Dr;var Er=class{constructor(e,t,r=0){this.label=e,this.start=t,this.length=r}};k.CompletionItem=Er;var Pr=class extends ne.Event{constructor(e,t,r){super("stopped"),this.body={reason:e},typeof t=="number"&&(this.body.threadId=t),typeof r=="string"&&(this.body.text=r)}};k.StoppedEvent=Pr;var Cr=class extends ne.Event{constructor(e,t){super("continued"),this.body={threadId:e},typeof t=="boolean"&&(this.body.allThreadsContinued=t)}};k.ContinuedEvent=Cr;var xr=class extends ne.Event{constructor(){super("initialized")}};k.InitializedEvent=xr;var Ir=class extends ne.Event{constructor(e){if(super("terminated"),typeof e=="boolean"||e){let t=this;t.body={restart:e}}}};k.TerminatedEvent=Ir;var Sr=class extends ne.Event{constructor(e){super("exited"),this.body={exitCode:e}}};k.ExitedEvent=Sr;var Or=class extends ne.Event{constructor(e,t="console",r){super("output"),this.body={category:t,output:e},r!==void 0&&(this.body.data=r)}};k.OutputEvent=Or;var Nr=class extends ne.Event{constructor(e,t){super("thread"),this.body={reason:e,threadId:t}}};k.ThreadEvent=Nr;var Ar=class extends ne.Event{constructor(e,t){super("breakpoint"),this.body={reason:e,breakpoint:t}}};k.BreakpointEvent=Ar;var Lr=class extends ne.Event{constructor(e,t){super("module"),this.body={reason:e,module:t}}};k.ModuleEvent=Lr;var _r=class extends ne.Event{constructor(e,t){super("loadedSource"),this.body={reason:e,source:t}}};k.LoadedSourceEvent=_r;var Rr=class extends ne.Event{constructor(e){super("capabilities"),this.body={capabilities:e}}};k.CapabilitiesEvent=Rr;var Mr=class extends ne.Event{constructor(e,t,r){super("progressStart"),this.body={progressId:e,title:t},typeof r=="string"&&(this.body.message=r)}};k.ProgressStartEvent=Mr;var kr=class extends ne.Event{constructor(e,t){super("progressUpdate"),this.body={progressId:e},typeof t=="string"&&(this.body.message=t)}};k.ProgressUpdateEvent=kr;var Fr=class extends ne.Event{constructor(e,t){super("progressEnd"),this.body={progressId:e},typeof t=="string"&&(this.body.message=t)}};k.ProgressEndEvent=Fr;var qr=class extends ne.Event{constructor(e,t,r){super("invalidated"),this.body={},e&&(this.body.areas=e),t&&(this.body.threadId=t),r&&(this.body.stackFrameId=r)}};k.InvalidatedEvent=qr;var Br=class extends ne.Event{constructor(e,t,r){super("memory"),this.body={memoryReference:e,offset:t,count:r}}};k.MemoryEvent=Br;var ke;(function(i){i[i.User=1]="User",i[i.Telemetry=2]="Telemetry"})(ke=k.ErrorDestination||(k.ErrorDestination={}));var ge=class extends Bo.ProtocolServer{constructor(e,t){super();let r=typeof e=="boolean"?e:!1;this._debuggerLinesStartAt1=r,this._debuggerColumnsStartAt1=r,this._debuggerPathsAreURIs=!1,this._clientLinesStartAt1=!0,this._clientColumnsStartAt1=!0,this._clientPathsAreURIs=!1,this._isServer=typeof t=="boolean"?t:!1,this.on("close",()=>{this.shutdown()}),this.on("error",n=>{this.shutdown()})}setDebuggerPathFormat(e){this._debuggerPathsAreURIs=e!=="path"}setDebuggerLinesStartAt1(e){this._debuggerLinesStartAt1=e}setDebuggerColumnsStartAt1(e){this._debuggerColumnsStartAt1=e}setRunAsServer(e){this._isServer=e}static run(e){(0,Vo.runDebugAdapter)(e)}shutdown(){this._isServer||this._isRunningInline()||setTimeout(()=>{process.exit(0)},100)}sendErrorResponse(e,t,r,n,o=ke.User){let a;typeof t=="number"?(a={id:t,format:r},n&&(a.variables=n),o&ke.User&&(a.showUser=!0),o&ke.Telemetry&&(a.sendTelemetry=!0)):a=t,e.success=!1,e.message=ge.formatPII(a.format,!0,a.variables),e.body||(e.body={}),e.body.error=a,this.sendResponse(e)}runInTerminalRequest(e,t,r){this.sendRequest("runInTerminal",e,t,r)}dispatchRequest(e){let t=new ne.Response(e);try{if(e.command==="initialize"){var r=e.arguments;if(typeof r.linesStartAt1=="boolean"&&(this._clientLinesStartAt1=r.linesStartAt1),typeof r.columnsStartAt1=="boolean"&&(this._clientColumnsStartAt1=r.columnsStartAt1),r.pathFormat!=="path")this.sendErrorResponse(t,2018,"debug adapter only supports native paths",null,ke.Telemetry);else{let n=t;n.body={},this.initializeRequest(n,r)}}else e.command==="launch"?this.launchRequest(t,e.arguments,e):e.command==="attach"?this.attachRequest(t,e.arguments,e):e.command==="disconnect"?this.disconnectRequest(t,e.arguments,e):e.command==="terminate"?this.terminateRequest(t,e.arguments,e):e.command==="restart"?this.restartRequest(t,e.arguments,e):e.command==="setBreakpoints"?this.setBreakPointsRequest(t,e.arguments,e):e.command==="setFunctionBreakpoints"?this.setFunctionBreakPointsRequest(t,e.arguments,e):e.command==="setExceptionBreakpoints"?this.setExceptionBreakPointsRequest(t,e.arguments,e):e.command==="configurationDone"?this.configurationDoneRequest(t,e.arguments,e):e.command==="continue"?this.continueRequest(t,e.arguments,e):e.command==="next"?this.nextRequest(t,e.arguments,e):e.command==="stepIn"?this.stepInRequest(t,e.arguments,e):e.command==="stepOut"?this.stepOutRequest(t,e.arguments,e):e.command==="stepBack"?this.stepBackRequest(t,e.arguments,e):e.command==="reverseContinue"?this.reverseContinueRequest(t,e.arguments,e):e.command==="restartFrame"?this.restartFrameRequest(t,e.arguments,e):e.command==="goto"?this.gotoRequest(t,e.arguments,e):e.command==="pause"?this.pauseRequest(t,e.arguments,e):e.command==="stackTrace"?this.stackTraceRequest(t,e.arguments,e):e.command==="scopes"?this.scopesRequest(t,e.arguments,e):e.command==="variables"?this.variablesRequest(t,e.arguments,e):e.command==="setVariable"?this.setVariableRequest(t,e.arguments,e):e.command==="setExpression"?this.setExpressionRequest(t,e.arguments,e):e.command==="source"?this.sourceRequest(t,e.arguments,e):e.command==="threads"?this.threadsRequest(t,e):e.command==="terminateThreads"?this.terminateThreadsRequest(t,e.arguments,e):e.command==="evaluate"?this.evaluateRequest(t,e.arguments,e):e.command==="stepInTargets"?this.stepInTargetsRequest(t,e.arguments,e):e.command==="gotoTargets"?this.gotoTargetsRequest(t,e.arguments,e):e.command==="completions"?this.completionsRequest(t,e.arguments,e):e.command==="exceptionInfo"?this.exceptionInfoRequest(t,e.arguments,e):e.command==="loadedSources"?this.loadedSourcesRequest(t,e.arguments,e):e.command==="dataBreakpointInfo"?this.dataBreakpointInfoRequest(t,e.arguments,e):e.command==="setDataBreakpoints"?this.setDataBreakpointsRequest(t,e.arguments,e):e.command==="readMemory"?this.readMemoryRequest(t,e.arguments,e):e.command==="writeMemory"?this.writeMemoryRequest(t,e.arguments,e):e.command==="disassemble"?this.disassembleRequest(t,e.arguments,e):e.command==="cancel"?this.cancelRequest(t,e.arguments,e):e.command==="breakpointLocations"?this.breakpointLocationsRequest(t,e.arguments,e):e.command==="setInstructionBreakpoints"?this.setInstructionBreakpointsRequest(t,e.arguments,e):this.customRequest(e.command,t,e.arguments,e)}catch(n){this.sendErrorResponse(t,1104,"{_stack}",{_exception:n.message,_stack:n.stack},ke.Telemetry)}}initializeRequest(e,t){e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!1,e.body.supportsRestartFrame=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCompletionsRequest=!1,e.body.supportsRestartRequest=!1,e.body.supportsExceptionOptions=!1,e.body.supportsValueFormattingOptions=!1,e.body.supportsExceptionInfoRequest=!1,e.body.supportTerminateDebuggee=!1,e.body.supportsDelayedStackTraceLoading=!1,e.body.supportsLoadedSourcesRequest=!1,e.body.supportsLogPoints=!1,e.body.supportsTerminateThreadsRequest=!1,e.body.supportsSetExpression=!1,e.body.supportsTerminateRequest=!1,e.body.supportsDataBreakpoints=!1,e.body.supportsReadMemoryRequest=!1,e.body.supportsDisassembleRequest=!1,e.body.supportsCancelRequest=!1,e.body.supportsBreakpointLocationsRequest=!1,e.body.supportsClipboardContext=!1,e.body.supportsSteppingGranularity=!1,e.body.supportsInstructionBreakpoints=!1,e.body.supportsExceptionFilterOptions=!1,this.sendResponse(e)}disconnectRequest(e,t,r){this.sendResponse(e),this.shutdown()}launchRequest(e,t,r){this.sendResponse(e)}attachRequest(e,t,r){this.sendResponse(e)}terminateRequest(e,t,r){this.sendResponse(e)}restartRequest(e,t,r){this.sendResponse(e)}setBreakPointsRequest(e,t,r){this.sendResponse(e)}setFunctionBreakPointsRequest(e,t,r){this.sendResponse(e)}setExceptionBreakPointsRequest(e,t,r){this.sendResponse(e)}configurationDoneRequest(e,t,r){this.sendResponse(e)}continueRequest(e,t,r){this.sendResponse(e)}nextRequest(e,t,r){this.sendResponse(e)}stepInRequest(e,t,r){this.sendResponse(e)}stepOutRequest(e,t,r){this.sendResponse(e)}stepBackRequest(e,t,r){this.sendResponse(e)}reverseContinueRequest(e,t,r){this.sendResponse(e)}restartFrameRequest(e,t,r){this.sendResponse(e)}gotoRequest(e,t,r){this.sendResponse(e)}pauseRequest(e,t,r){this.sendResponse(e)}sourceRequest(e,t,r){this.sendResponse(e)}threadsRequest(e,t){this.sendResponse(e)}terminateThreadsRequest(e,t,r){this.sendResponse(e)}stackTraceRequest(e,t,r){this.sendResponse(e)}scopesRequest(e,t,r){this.sendResponse(e)}variablesRequest(e,t,r){this.sendResponse(e)}setVariableRequest(e,t,r){this.sendResponse(e)}setExpressionRequest(e,t,r){this.sendResponse(e)}evaluateRequest(e,t,r){this.sendResponse(e)}stepInTargetsRequest(e,t,r){this.sendResponse(e)}gotoTargetsRequest(e,t,r){this.sendResponse(e)}completionsRequest(e,t,r){this.sendResponse(e)}exceptionInfoRequest(e,t,r){this.sendResponse(e)}loadedSourcesRequest(e,t,r){this.sendResponse(e)}dataBreakpointInfoRequest(e,t,r){this.sendResponse(e)}setDataBreakpointsRequest(e,t,r){this.sendResponse(e)}readMemoryRequest(e,t,r){this.sendResponse(e)}writeMemoryRequest(e,t,r){this.sendResponse(e)}disassembleRequest(e,t,r){this.sendResponse(e)}cancelRequest(e,t,r){this.sendResponse(e)}breakpointLocationsRequest(e,t,r){this.sendResponse(e)}setInstructionBreakpointsRequest(e,t,r){this.sendResponse(e)}customRequest(e,t,r,n){this.sendErrorResponse(t,1014,"unrecognized request",null,ke.Telemetry)}convertClientLineToDebugger(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e+1:this._clientLinesStartAt1?e-1:e}convertDebuggerLineToClient(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e-1:this._clientLinesStartAt1?e+1:e}convertClientColumnToDebugger(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e+1:this._clientColumnsStartAt1?e-1:e}convertDebuggerColumnToClient(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e-1:this._clientColumnsStartAt1?e+1:e}convertClientPathToDebugger(e){return this._clientPathsAreURIs!==this._debuggerPathsAreURIs?this._clientPathsAreURIs?ge.uri2path(e):ge.path2uri(e):e}convertDebuggerPathToClient(e){return this._debuggerPathsAreURIs!==this._clientPathsAreURIs?this._debuggerPathsAreURIs?ge.uri2path(e):ge.path2uri(e):e}static path2uri(e){process.platform==="win32"&&(/^[A-Z]:/.test(e)&&(e=e[0].toLowerCase()+e.substr(1)),e=e.replace(/\\/g,"/")),e=encodeURI(e);let t=new mn.URL("file:");return t.pathname=e,t.toString()}static uri2path(e){let t=new mn.URL(e),r=decodeURIComponent(t.pathname);return process.platform==="win32"&&(/^\/[a-zA-Z]:/.test(r)&&(r=r[1].toLowerCase()+r.substr(2)),r=r.replace(/\//g,"\\")),r}static formatPII(e,t,r){return e.replace(ge._formatPIIRegexp,function(n,o){return t&&o.length>0&&o[0]!=="_"?n:r[o]&&r.hasOwnProperty(o)?r[o]:n})}};k.DebugSession=ge;ge._formatPIIRegexp=/{([^}]+)}/g});var wn=F(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.InternalLogger=void 0;var gn=require("fs"),yn=require("path"),ue=gt(),Vr=class{constructor(e,t){this.beforeExitCallback=()=>this.dispose(),this._logCallback=e,this._logToConsole=t,this._minLogLevel=ue.LogLevel.Warn,this.disposeCallback=(r,n)=>{this.dispose(),n=n||2,n+=128,process.exit(n)}}async setup(e){if(this._minLogLevel=e.consoleMinLogLevel,this._prependTimestamp=e.prependTimestamp,e.logFilePath)if(!yn.isAbsolute(e.logFilePath))this.log(`logFilePath must be an absolute path: ${e.logFilePath}`,ue.LogLevel.Error);else{let t=r=>this.sendLog(`Error creating log file at path: ${e.logFilePath}. Error: ${r.toString()}
`,ue.LogLevel.Error);try{await gn.promises.mkdir(yn.dirname(e.logFilePath),{recursive:!0}),this.log(`Verbose logs are written to:
`,ue.LogLevel.Warn),this.log(e.logFilePath+`
`,ue.LogLevel.Warn),this._logFileStream=gn.createWriteStream(e.logFilePath),this.logDateTime(),this.setupShutdownListeners(),this._logFileStream.on("error",r=>{t(r)})}catch(r){t(r)}}}logDateTime(){let e=new Date,r=e.getUTCFullYear()+`-${e.getUTCMonth()+1}-`+e.getUTCDate()+", "+bn();this.log(r+`
`,ue.LogLevel.Verbose,!1)}setupShutdownListeners(){process.on("beforeExit",this.beforeExitCallback),process.on("SIGTERM",this.disposeCallback),process.on("SIGINT",this.disposeCallback)}removeShutdownListeners(){process.removeListener("beforeExit",this.beforeExitCallback),process.removeListener("SIGTERM",this.disposeCallback),process.removeListener("SIGINT",this.disposeCallback)}dispose(){return new Promise(e=>{this.removeShutdownListeners(),this._logFileStream?(this._logFileStream.end(e),this._logFileStream=null):e()})}log(e,t,r=!0){if(this._minLogLevel!==ue.LogLevel.Stop){if(t>=this._minLogLevel&&this.sendLog(e,t),this._logToConsole){let n=t===ue.LogLevel.Error?console.error:t===ue.LogLevel.Warn?console.warn:null;n&&n((0,ue.trimLastNewline)(e))}t===ue.LogLevel.Error&&(e=`[${ue.LogLevel[t]}] ${e}`),this._prependTimestamp&&r&&(e="["+bn()+"] "+e),this._logFileStream&&this._logFileStream.write(e)}}sendLog(e,t){if(e.length>1500){let r=!!e.match(/(\n|\r\n)$/);e=e.substr(0,1500)+"[...]",r&&(e=e+`
`)}if(this._logCallback){let r=new ue.LogOutputEvent(e,t);this._logCallback(r)}}};mt.InternalLogger=Vr;function bn(){let i=new Date,e=dt(2,String(i.getUTCHours())),t=dt(2,String(i.getUTCMinutes())),r=dt(2,String(i.getUTCSeconds())),n=dt(3,String(i.getUTCMilliseconds()));return e+":"+t+":"+r+"."+n+" UTC"}function dt(i,e){return e.length>=i?e:String("0".repeat(i)+e).slice(-i)}});var gt=F(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.trimLastNewline=le.LogOutputEvent=le.logger=le.Logger=le.LogLevel=void 0;var jo=wn(),Xo=ft(),Le;(function(i){i[i.Verbose=0]="Verbose",i[i.Log=1]="Log",i[i.Warn=2]="Warn",i[i.Error=3]="Error",i[i.Stop=4]="Stop"})(Le=le.LogLevel||(le.LogLevel={}));var yt=class{constructor(){this._pendingLogQ=[]}log(e,t=Le.Log){e=e+`
`,this._write(e,t)}verbose(e){this.log(e,Le.Verbose)}warn(e){this.log(e,Le.Warn)}error(e){this.log(e,Le.Error)}dispose(){if(this._currentLogger){let e=this._currentLogger.dispose();return this._currentLogger=null,e}else return Promise.resolve()}_write(e,t=Le.Log){e=e+"",this._pendingLogQ?this._pendingLogQ.push({msg:e,level:t}):this._currentLogger&&this._currentLogger.log(e,t)}setup(e,t,r=!0){let n=typeof t=="string"?t:t&&this._logFilePathFromInit;if(this._currentLogger){let o={consoleMinLogLevel:e,logFilePath:n,prependTimestamp:r};this._currentLogger.setup(o).then(()=>{if(this._pendingLogQ){let a=this._pendingLogQ;this._pendingLogQ=null,a.forEach(p=>this._write(p.msg,p.level))}})}}init(e,t,r){this._pendingLogQ=this._pendingLogQ||[],this._currentLogger=new jo.InternalLogger(e,r),this._logFilePathFromInit=t}};le.Logger=yt;le.logger=new yt;var jr=class extends Xo.OutputEvent{constructor(e,t){let r=t===Le.Error?"stderr":t===Le.Warn?"console":"stdout";super(e,r)}};le.LogOutputEvent=jr;function Uo(i){return i.replace(/(\n|\r\n)$/,"")}le.trimLastNewline=Uo});var Dn=F(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.LoggingDebugSession=void 0;var Tn=gt(),We=Tn.logger,vn=ft(),Xr=class extends vn.DebugSession{constructor(e,t,r){super(t,r),this.obsolete_logFilePath=e,this.on("error",n=>{We.error(n.body)})}start(e,t){super.start(e,t),We.init(r=>this.sendEvent(r),this.obsolete_logFilePath,this._isServer)}sendEvent(e){if(!(e instanceof Tn.LogOutputEvent)){let t=e;e instanceof vn.OutputEvent&&e.body&&e.body.data&&e.body.data.doNotLogOutput&&(delete e.body.data.doNotLogOutput,t={...e},t.body={...e.body,output:"<output not logged>"}),We.verbose(`To client: ${JSON.stringify(t)}`)}super.sendEvent(e)}sendRequest(e,t,r,n){We.verbose(`To client: ${JSON.stringify(e)}(${JSON.stringify(t)}), timeout: ${r}`),super.sendRequest(e,t,r,n)}sendResponse(e){We.verbose(`To client: ${JSON.stringify(e)}`),super.sendResponse(e)}dispatchRequest(e){We.verbose(`From client: ${e.command}(${JSON.stringify(e.arguments)})`),super.dispatchRequest(e)}};bt.LoggingDebugSession=Xr});var En=F(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.Handles=void 0;var Ur=class{constructor(e){this.START_HANDLE=1e3,this._handleMap=new Map,this._nextHandle=typeof e=="number"?e:this.START_HANDLE}reset(){this._nextHandle=this.START_HANDLE,this._handleMap=new Map}create(e){var t=this._nextHandle++;return this._handleMap.set(t,e),t}get(e,t){return this._handleMap.get(e)||t}};wt.Handles=Ur});var Qe=F(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});R.Handles=R.Response=R.Event=R.ErrorDestination=R.CompletionItem=R.Module=R.Source=R.Breakpoint=R.Variable=R.Scope=R.StackFrame=R.Thread=R.MemoryEvent=R.InvalidatedEvent=R.ProgressEndEvent=R.ProgressUpdateEvent=R.ProgressStartEvent=R.CapabilitiesEvent=R.LoadedSourceEvent=R.ModuleEvent=R.BreakpointEvent=R.ThreadEvent=R.OutputEvent=R.ContinuedEvent=R.StoppedEvent=R.ExitedEvent=R.TerminatedEvent=R.InitializedEvent=R.logger=R.Logger=R.LoggingDebugSession=R.DebugSession=void 0;var G=ft();Object.defineProperty(R,"DebugSession",{enumerable:!0,get:function(){return G.DebugSession}});Object.defineProperty(R,"InitializedEvent",{enumerable:!0,get:function(){return G.InitializedEvent}});Object.defineProperty(R,"TerminatedEvent",{enumerable:!0,get:function(){return G.TerminatedEvent}});Object.defineProperty(R,"ExitedEvent",{enumerable:!0,get:function(){return G.ExitedEvent}});Object.defineProperty(R,"StoppedEvent",{enumerable:!0,get:function(){return G.StoppedEvent}});Object.defineProperty(R,"ContinuedEvent",{enumerable:!0,get:function(){return G.ContinuedEvent}});Object.defineProperty(R,"OutputEvent",{enumerable:!0,get:function(){return G.OutputEvent}});Object.defineProperty(R,"ThreadEvent",{enumerable:!0,get:function(){return G.ThreadEvent}});Object.defineProperty(R,"BreakpointEvent",{enumerable:!0,get:function(){return G.BreakpointEvent}});Object.defineProperty(R,"ModuleEvent",{enumerable:!0,get:function(){return G.ModuleEvent}});Object.defineProperty(R,"LoadedSourceEvent",{enumerable:!0,get:function(){return G.LoadedSourceEvent}});Object.defineProperty(R,"CapabilitiesEvent",{enumerable:!0,get:function(){return G.CapabilitiesEvent}});Object.defineProperty(R,"ProgressStartEvent",{enumerable:!0,get:function(){return G.ProgressStartEvent}});Object.defineProperty(R,"ProgressUpdateEvent",{enumerable:!0,get:function(){return G.ProgressUpdateEvent}});Object.defineProperty(R,"ProgressEndEvent",{enumerable:!0,get:function(){return G.ProgressEndEvent}});Object.defineProperty(R,"InvalidatedEvent",{enumerable:!0,get:function(){return G.InvalidatedEvent}});Object.defineProperty(R,"MemoryEvent",{enumerable:!0,get:function(){return G.MemoryEvent}});Object.defineProperty(R,"Thread",{enumerable:!0,get:function(){return G.Thread}});Object.defineProperty(R,"StackFrame",{enumerable:!0,get:function(){return G.StackFrame}});Object.defineProperty(R,"Scope",{enumerable:!0,get:function(){return G.Scope}});Object.defineProperty(R,"Variable",{enumerable:!0,get:function(){return G.Variable}});Object.defineProperty(R,"Breakpoint",{enumerable:!0,get:function(){return G.Breakpoint}});Object.defineProperty(R,"Source",{enumerable:!0,get:function(){return G.Source}});Object.defineProperty(R,"Module",{enumerable:!0,get:function(){return G.Module}});Object.defineProperty(R,"CompletionItem",{enumerable:!0,get:function(){return G.CompletionItem}});Object.defineProperty(R,"ErrorDestination",{enumerable:!0,get:function(){return G.ErrorDestination}});var Ho=Dn();Object.defineProperty(R,"LoggingDebugSession",{enumerable:!0,get:function(){return Ho.LoggingDebugSession}});var Pn=gt();R.Logger=Pn;var Cn=lt();Object.defineProperty(R,"Event",{enumerable:!0,get:function(){return Cn.Event}});Object.defineProperty(R,"Response",{enumerable:!0,get:function(){return Cn.Response}});var $o=En();Object.defineProperty(R,"Handles",{enumerable:!0,get:function(){return $o.Handles}});var Wo=Pn.logger;R.logger=Wo});var vt=F(Hr=>{(function(){Hr.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(Hr)});var ve=F((xn,_e)=>{(function(){var i,e,t,r,n,o,a,p=[].slice,f={}.hasOwnProperty;i=function(){var y,D,P,b,m,v;if(v=arguments[0],m=2<=arguments.length?p.call(arguments,1):[],n(Object.assign))Object.assign.apply(null,arguments);else for(y=0,P=m.length;y<P;y++)if(b=m[y],b!=null)for(D in b)!f.call(b,D)||(v[D]=b[D]);return v},n=function(y){return!!y&&Object.prototype.toString.call(y)==="[object Function]"},o=function(y){var D;return!!y&&((D=typeof y)=="function"||D==="object")},t=function(y){return n(Array.isArray)?Array.isArray(y):Object.prototype.toString.call(y)==="[object Array]"},r=function(y){var D;if(t(y))return!y.length;for(D in y)if(!!f.call(y,D))return!1;return!0},a=function(y){var D,P;return o(y)&&(P=Object.getPrototypeOf(y))&&(D=P.constructor)&&typeof D=="function"&&D instanceof D&&Function.prototype.toString.call(D)===Function.prototype.toString.call(Object)},e=function(y){return n(y.valueOf)?y.valueOf():y},_e.exports.assign=i,_e.exports.isFunction=n,_e.exports.isObject=o,_e.exports.isArray=t,_e.exports.isEmpty=r,_e.exports.isPlainObject=a,_e.exports.getValue=e}).call(xn)});var $r=F((In,Sn)=>{(function(){var i;Sn.exports=i=function(){function e(){}return e.prototype.hasFeature=function(t,r){return!0},e.prototype.createDocumentType=function(t,r,n){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(t,r,n){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(t,r){throw new Error("This DOM method is not implemented.")},e}()}).call(In)});var An=F((On,Nn)=>{(function(){var i;Nn.exports=i=function(){function e(){}return e.prototype.handleError=function(t){throw new Error(t)},e}()}).call(On)});var Rn=F((Ln,_n)=>{(function(){var i;_n.exports=i=function(){function e(t){this.arr=t||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(t){return this.arr[t]||null},e.prototype.contains=function(t){return this.arr.indexOf(t)!==-1},e}()}).call(Ln)});var Fn=F((Mn,kn)=>{(function(){var i,e,t;e=An(),t=Rn(),kn.exports=i=function(){function r(){var n;this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=n=Object.create(this.defaultParams)}return Object.defineProperty(r.prototype,"parameterNames",{get:function(){return new t(Object.keys(this.defaultParams))}}),r.prototype.getParameter=function(n){return this.params.hasOwnProperty(n)?this.params[n]:null},r.prototype.canSetParameter=function(n,o){return!0},r.prototype.setParameter=function(n,o){return o!=null?this.params[n]=o:delete this.params[n]},r}()}).call(Mn)});var Q=F((qn,Bn)=>{(function(){Bn.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(qn)});var Wr=F((Vn,jn)=>{(function(){var i,e,t;i=Q(),t=pe(),jn.exports=e=function(){function r(n,o,a){if(this.parent=n,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),o==null)throw new Error("Missing attribute name. "+this.debugInfo(o));this.name=this.stringify.name(o),this.value=this.stringify.attValue(a),this.type=i.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(r.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(r.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(r.prototype,"textContent",{get:function(){return this.value},set:function(n){return this.value=n||""}}),Object.defineProperty(r.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(r.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(r.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(r.prototype,"specified",{get:function(){return!0}}),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(n){return this.options.writer.attribute(this,this.options.writer.filterOptions(n))},r.prototype.debugInfo=function(n){return n=n||this.name,n==null?"parent: <"+this.parent.name+">":"attribute: {"+n+"}, parent: <"+this.parent.name+">"},r.prototype.isEqualNode=function(n){return!(n.namespaceURI!==this.namespaceURI||n.prefix!==this.prefix||n.localName!==this.localName||n.value!==this.value)},r}()}).call(Vn)});var Tt=F((Xn,Un)=>{(function(){var i;Un.exports=i=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(t){return this.nodes[t]},e.prototype.setNamedItem=function(t){var r;return r=this.nodes[t.nodeName],this.nodes[t.nodeName]=t,r||null},e.prototype.removeNamedItem=function(t){var r;return r=this.nodes[t],delete this.nodes[t],r||null},e.prototype.item=function(t){return this.nodes[Object.keys(this.nodes)[t]]||null},e.prototype.getNamedItemNS=function(t,r){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(t,r){throw new Error("This DOM method is not implemented.")},e}()}).call(Xn)});var Dt=F((Hn,$n)=>{(function(){var i,e,t,r,n,o,a,p,f,y=function(P,b){for(var m in b)D.call(b,m)&&(P[m]=b[m]);function v(){this.constructor=P}return v.prototype=b.prototype,P.prototype=new v,P.__super__=b.prototype,P},D={}.hasOwnProperty;f=ve(),p=f.isObject,a=f.isFunction,o=f.getValue,n=pe(),i=Q(),e=Wr(),r=Tt(),$n.exports=t=function(P){y(b,P);function b(m,v,T){var A,O,x,d;if(b.__super__.constructor.call(this,m),v==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(v),this.type=i.Element,this.attribs={},this.schemaTypeInfo=null,T!=null&&this.attribute(T),m.type===i.Document&&(this.isRoot=!0,this.documentObject=m,m.rootObject=this,m.children)){for(d=m.children,O=0,x=d.length;O<x;O++)if(A=d[O],A.type===i.DocType){A.name=this.name;break}}}return Object.defineProperty(b.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(b.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(b.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(b.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(b.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(b.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(b.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(b.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new r(this.attribs)),this.attributeMap}}),b.prototype.clone=function(){var m,v,T,A;T=Object.create(this),T.isRoot&&(T.documentObject=null),T.attribs={},A=this.attribs;for(v in A)!D.call(A,v)||(m=A[v],T.attribs[v]=m.clone());return T.children=[],this.children.forEach(function(O){var x;return x=O.clone(),x.parent=T,T.children.push(x)}),T},b.prototype.attribute=function(m,v){var T,A;if(m!=null&&(m=o(m)),p(m))for(T in m)!D.call(m,T)||(A=m[T],this.attribute(T,A));else a(v)&&(v=v.apply()),this.options.keepNullAttributes&&v==null?this.attribs[m]=new e(this,m,""):v!=null&&(this.attribs[m]=new e(this,m,v));return this},b.prototype.removeAttribute=function(m){var v,T,A;if(m==null)throw new Error("Missing attribute name. "+this.debugInfo());if(m=o(m),Array.isArray(m))for(T=0,A=m.length;T<A;T++)v=m[T],delete this.attribs[v];else delete this.attribs[m];return this},b.prototype.toString=function(m){return this.options.writer.element(this,this.options.writer.filterOptions(m))},b.prototype.att=function(m,v){return this.attribute(m,v)},b.prototype.a=function(m,v){return this.attribute(m,v)},b.prototype.getAttribute=function(m){return this.attribs.hasOwnProperty(m)?this.attribs[m].value:null},b.prototype.setAttribute=function(m,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getAttributeNode=function(m){return this.attribs.hasOwnProperty(m)?this.attribs[m]:null},b.prototype.setAttributeNode=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.removeAttributeNode=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getElementsByTagName=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getAttributeNS=function(m,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.setAttributeNS=function(m,v,T){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.removeAttributeNS=function(m,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getAttributeNodeNS=function(m,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.setAttributeNodeNS=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getElementsByTagNameNS=function(m,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.hasAttribute=function(m){return this.attribs.hasOwnProperty(m)},b.prototype.hasAttributeNS=function(m,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.setIdAttribute=function(m,v){return this.attribs.hasOwnProperty(m)?this.attribs[m].isId:v},b.prototype.setIdAttributeNS=function(m,v,T){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.setIdAttributeNode=function(m,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getElementsByTagName=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getElementsByTagNameNS=function(m,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getElementsByClassName=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.isEqualNode=function(m){var v,T,A;if(!b.__super__.isEqualNode.apply(this,arguments).isEqualNode(m)||m.namespaceURI!==this.namespaceURI||m.prefix!==this.prefix||m.localName!==this.localName||m.attribs.length!==this.attribs.length)return!1;for(v=T=0,A=this.attribs.length-1;0<=A?T<=A:T>=A;v=0<=A?++T:--T)if(!this.attribs[v].isEqualNode(m.attribs[v]))return!1;return!0},b}(n)}).call(Hn)});var Ze=F((Wn,Gn)=>{(function(){var i,e,t=function(n,o){for(var a in o)r.call(o,a)&&(n[a]=o[a]);function p(){this.constructor=n}return p.prototype=o.prototype,n.prototype=new p,n.__super__=o.prototype,n},r={}.hasOwnProperty;e=pe(),Gn.exports=i=function(n){t(o,n);function o(a){o.__super__.constructor.call(this,a),this.value=""}return Object.defineProperty(o.prototype,"data",{get:function(){return this.value},set:function(a){return this.value=a||""}}),Object.defineProperty(o.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(o.prototype,"textContent",{get:function(){return this.value},set:function(a){return this.value=a||""}}),o.prototype.clone=function(){return Object.create(this)},o.prototype.substringData=function(a,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.appendData=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.insertData=function(a,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.deleteData=function(a,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.replaceData=function(a,p,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.isEqualNode=function(a){return!(!o.__super__.isEqualNode.apply(this,arguments).isEqualNode(a)||a.data!==this.data)},o}(e)}).call(Wn)});var Et=F((zn,Yn)=>{(function(){var i,e,t,r=function(o,a){for(var p in a)n.call(a,p)&&(o[p]=a[p]);function f(){this.constructor=o}return f.prototype=a.prototype,o.prototype=new f,o.__super__=a.prototype,o},n={}.hasOwnProperty;i=Q(),t=Ze(),Yn.exports=e=function(o){r(a,o);function a(p,f){if(a.__super__.constructor.call(this,p),f==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=i.CData,this.value=this.stringify.cdata(f)}return a.prototype.clone=function(){return Object.create(this)},a.prototype.toString=function(p){return this.options.writer.cdata(this,this.options.writer.filterOptions(p))},a}(t)}).call(zn)});var Pt=F((Kn,Qn)=>{(function(){var i,e,t,r=function(o,a){for(var p in a)n.call(a,p)&&(o[p]=a[p]);function f(){this.constructor=o}return f.prototype=a.prototype,o.prototype=new f,o.__super__=a.prototype,o},n={}.hasOwnProperty;i=Q(),e=Ze(),Qn.exports=t=function(o){r(a,o);function a(p,f){if(a.__super__.constructor.call(this,p),f==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=i.Comment,this.value=this.stringify.comment(f)}return a.prototype.clone=function(){return Object.create(this)},a.prototype.toString=function(p){return this.options.writer.comment(this,this.options.writer.filterOptions(p))},a}(e)}).call(Kn)});var Ct=F((Zn,Jn)=>{(function(){var i,e,t,r,n=function(a,p){for(var f in p)o.call(p,f)&&(a[f]=p[f]);function y(){this.constructor=a}return y.prototype=p.prototype,a.prototype=new y,a.__super__=p.prototype,a},o={}.hasOwnProperty;r=ve().isObject,t=pe(),i=Q(),Jn.exports=e=function(a){n(p,a);function p(f,y,D,P){var b;p.__super__.constructor.call(this,f),r(y)&&(b=y,y=b.version,D=b.encoding,P=b.standalone),y||(y="1.0"),this.type=i.Declaration,this.version=this.stringify.xmlVersion(y),D!=null&&(this.encoding=this.stringify.xmlEncoding(D)),P!=null&&(this.standalone=this.stringify.xmlStandalone(P))}return p.prototype.toString=function(f){return this.options.writer.declaration(this,this.options.writer.filterOptions(f))},p}(t)}).call(Zn)});var xt=F((ei,ti)=>{(function(){var i,e,t,r=function(o,a){for(var p in a)n.call(a,p)&&(o[p]=a[p]);function f(){this.constructor=o}return f.prototype=a.prototype,o.prototype=new f,o.__super__=a.prototype,o},n={}.hasOwnProperty;t=pe(),i=Q(),ti.exports=e=function(o){r(a,o);function a(p,f,y,D,P,b){if(a.__super__.constructor.call(this,p),f==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(y==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(f));if(!D)throw new Error("Missing DTD attribute type. "+this.debugInfo(f));if(!P)throw new Error("Missing DTD attribute default. "+this.debugInfo(f));if(P.indexOf("#")!==0&&(P="#"+P),!P.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(f));if(b&&!P.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(f));this.elementName=this.stringify.name(f),this.type=i.AttributeDeclaration,this.attributeName=this.stringify.name(y),this.attributeType=this.stringify.dtdAttType(D),b&&(this.defaultValue=this.stringify.dtdAttDefault(b)),this.defaultValueType=P}return a.prototype.toString=function(p){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(p))},a}(t)}).call(ei)});var It=F((ri,ni)=>{(function(){var i,e,t,r,n=function(a,p){for(var f in p)o.call(p,f)&&(a[f]=p[f]);function y(){this.constructor=a}return y.prototype=p.prototype,a.prototype=new y,a.__super__=p.prototype,a},o={}.hasOwnProperty;r=ve().isObject,t=pe(),i=Q(),ni.exports=e=function(a){n(p,a);function p(f,y,D,P){if(p.__super__.constructor.call(this,f),D==null)throw new Error("Missing DTD entity name. "+this.debugInfo(D));if(P==null)throw new Error("Missing DTD entity value. "+this.debugInfo(D));if(this.pe=!!y,this.name=this.stringify.name(D),this.type=i.EntityDeclaration,!r(P))this.value=this.stringify.dtdEntityValue(P),this.internal=!0;else{if(!P.pubID&&!P.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(D));if(P.pubID&&!P.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(D));if(this.internal=!1,P.pubID!=null&&(this.pubID=this.stringify.dtdPubID(P.pubID)),P.sysID!=null&&(this.sysID=this.stringify.dtdSysID(P.sysID)),P.nData!=null&&(this.nData=this.stringify.dtdNData(P.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(D))}}return Object.defineProperty(p.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(p.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(p.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(p.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(p.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(p.prototype,"xmlVersion",{get:function(){return null}}),p.prototype.toString=function(f){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(f))},p}(t)}).call(ri)});var St=F((ii,oi)=>{(function(){var i,e,t,r=function(o,a){for(var p in a)n.call(a,p)&&(o[p]=a[p]);function f(){this.constructor=o}return f.prototype=a.prototype,o.prototype=new f,o.__super__=a.prototype,o},n={}.hasOwnProperty;t=pe(),i=Q(),oi.exports=e=function(o){r(a,o);function a(p,f,y){if(a.__super__.constructor.call(this,p),f==null)throw new Error("Missing DTD element name. "+this.debugInfo());y||(y="(#PCDATA)"),Array.isArray(y)&&(y="("+y.join(",")+")"),this.name=this.stringify.name(f),this.type=i.ElementDeclaration,this.value=this.stringify.dtdElementValue(y)}return a.prototype.toString=function(p){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(p))},a}(t)}).call(ii)});var Ot=F((si,ai)=>{(function(){var i,e,t,r=function(o,a){for(var p in a)n.call(a,p)&&(o[p]=a[p]);function f(){this.constructor=o}return f.prototype=a.prototype,o.prototype=new f,o.__super__=a.prototype,o},n={}.hasOwnProperty;t=pe(),i=Q(),ai.exports=e=function(o){r(a,o);function a(p,f,y){if(a.__super__.constructor.call(this,p),f==null)throw new Error("Missing DTD notation name. "+this.debugInfo(f));if(!y.pubID&&!y.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(f));this.name=this.stringify.name(f),this.type=i.NotationDeclaration,y.pubID!=null&&(this.pubID=this.stringify.dtdPubID(y.pubID)),y.sysID!=null&&(this.sysID=this.stringify.dtdSysID(y.sysID))}return Object.defineProperty(a.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(a.prototype,"systemId",{get:function(){return this.sysID}}),a.prototype.toString=function(p){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(p))},a}(t)}).call(si)});var Nt=F((ci,ui)=>{(function(){var i,e,t,r,n,o,a,p,f,y=function(P,b){for(var m in b)D.call(b,m)&&(P[m]=b[m]);function v(){this.constructor=P}return v.prototype=b.prototype,P.prototype=new v,P.__super__=b.prototype,P},D={}.hasOwnProperty;f=ve().isObject,p=pe(),i=Q(),e=xt(),r=It(),t=St(),n=Ot(),a=Tt(),ui.exports=o=function(P){y(b,P);function b(m,v,T){var A,O,x,d,u,c;if(b.__super__.constructor.call(this,m),this.type=i.DocType,m.children){for(d=m.children,O=0,x=d.length;O<x;O++)if(A=d[O],A.type===i.Element){this.name=A.name;break}}this.documentObject=m,f(v)&&(u=v,v=u.pubID,T=u.sysID),T==null&&(c=[v,T],T=c[0],v=c[1]),v!=null&&(this.pubID=this.stringify.dtdPubID(v)),T!=null&&(this.sysID=this.stringify.dtdSysID(T))}return Object.defineProperty(b.prototype,"entities",{get:function(){var m,v,T,A,O;for(A={},O=this.children,v=0,T=O.length;v<T;v++)m=O[v],m.type===i.EntityDeclaration&&!m.pe&&(A[m.name]=m);return new a(A)}}),Object.defineProperty(b.prototype,"notations",{get:function(){var m,v,T,A,O;for(A={},O=this.children,v=0,T=O.length;v<T;v++)m=O[v],m.type===i.NotationDeclaration&&(A[m.name]=m);return new a(A)}}),Object.defineProperty(b.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(b.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(b.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),b.prototype.element=function(m,v){var T;return T=new t(this,m,v),this.children.push(T),this},b.prototype.attList=function(m,v,T,A,O){var x;return x=new e(this,m,v,T,A,O),this.children.push(x),this},b.prototype.entity=function(m,v){var T;return T=new r(this,!1,m,v),this.children.push(T),this},b.prototype.pEntity=function(m,v){var T;return T=new r(this,!0,m,v),this.children.push(T),this},b.prototype.notation=function(m,v){var T;return T=new n(this,m,v),this.children.push(T),this},b.prototype.toString=function(m){return this.options.writer.docType(this,this.options.writer.filterOptions(m))},b.prototype.ele=function(m,v){return this.element(m,v)},b.prototype.att=function(m,v,T,A,O){return this.attList(m,v,T,A,O)},b.prototype.ent=function(m,v){return this.entity(m,v)},b.prototype.pent=function(m,v){return this.pEntity(m,v)},b.prototype.not=function(m,v){return this.notation(m,v)},b.prototype.up=function(){return this.root()||this.documentObject},b.prototype.isEqualNode=function(m){return!(!b.__super__.isEqualNode.apply(this,arguments).isEqualNode(m)||m.name!==this.name||m.publicId!==this.publicId||m.systemId!==this.systemId)},b}(p)}).call(ci)});var At=F((li,pi)=>{(function(){var i,e,t,r=function(o,a){for(var p in a)n.call(a,p)&&(o[p]=a[p]);function f(){this.constructor=o}return f.prototype=a.prototype,o.prototype=new f,o.__super__=a.prototype,o},n={}.hasOwnProperty;i=Q(),e=pe(),pi.exports=t=function(o){r(a,o);function a(p,f){if(a.__super__.constructor.call(this,p),f==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=i.Raw,this.value=this.stringify.raw(f)}return a.prototype.clone=function(){return Object.create(this)},a.prototype.toString=function(p){return this.options.writer.raw(this,this.options.writer.filterOptions(p))},a}(e)}).call(li)});var Lt=F((hi,fi)=>{(function(){var i,e,t,r=function(o,a){for(var p in a)n.call(a,p)&&(o[p]=a[p]);function f(){this.constructor=o}return f.prototype=a.prototype,o.prototype=new f,o.__super__=a.prototype,o},n={}.hasOwnProperty;i=Q(),e=Ze(),fi.exports=t=function(o){r(a,o);function a(p,f){if(a.__super__.constructor.call(this,p),f==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=i.Text,this.value=this.stringify.text(f)}return Object.defineProperty(a.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(a.prototype,"wholeText",{get:function(){var p,f,y;for(y="",f=this.previousSibling;f;)y=f.data+y,f=f.previousSibling;for(y+=this.data,p=this.nextSibling;p;)y=y+p.data,p=p.nextSibling;return y}}),a.prototype.clone=function(){return Object.create(this)},a.prototype.toString=function(p){return this.options.writer.text(this,this.options.writer.filterOptions(p))},a.prototype.splitText=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.replaceWholeText=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},a}(e)}).call(hi)});var _t=F((di,mi)=>{(function(){var i,e,t,r=function(o,a){for(var p in a)n.call(a,p)&&(o[p]=a[p]);function f(){this.constructor=o}return f.prototype=a.prototype,o.prototype=new f,o.__super__=a.prototype,o},n={}.hasOwnProperty;i=Q(),e=Ze(),mi.exports=t=function(o){r(a,o);function a(p,f,y){if(a.__super__.constructor.call(this,p),f==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=i.ProcessingInstruction,this.target=this.stringify.insTarget(f),this.name=this.target,y&&(this.value=this.stringify.insValue(y))}return a.prototype.clone=function(){return Object.create(this)},a.prototype.toString=function(p){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(p))},a.prototype.isEqualNode=function(p){return!(!a.__super__.isEqualNode.apply(this,arguments).isEqualNode(p)||p.target!==this.target)},a}(e)}).call(di)});var Gr=F((gi,yi)=>{(function(){var i,e,t,r=function(o,a){for(var p in a)n.call(a,p)&&(o[p]=a[p]);function f(){this.constructor=o}return f.prototype=a.prototype,o.prototype=new f,o.__super__=a.prototype,o},n={}.hasOwnProperty;t=pe(),i=Q(),yi.exports=e=function(o){r(a,o);function a(p){a.__super__.constructor.call(this,p),this.type=i.Dummy}return a.prototype.clone=function(){return Object.create(this)},a.prototype.toString=function(p){return""},a}(t)}).call(gi)});var vi=F((bi,wi)=>{(function(){var i;wi.exports=i=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(t){return this.nodes[t]||null},e}()}).call(bi)});var Ei=F((Ti,Di)=>{(function(){Di.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(Ti)});var pe=F((Pi,Ci)=>{(function(){var i,e,t,r,n,o,a,p,f,y,D,P,b,m,v,T,A,O,x,d={}.hasOwnProperty;x=ve(),O=x.isObject,A=x.isFunction,T=x.isEmpty,v=x.getValue,p=null,t=null,r=null,n=null,o=null,b=null,m=null,P=null,a=null,e=null,D=null,f=null,i=null,Ci.exports=y=function(){function u(c){this.parent=c,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,p||(p=Dt(),t=Et(),r=Pt(),n=Ct(),o=Nt(),b=At(),m=Lt(),P=_t(),a=Gr(),e=Q(),D=vi(),f=Tt(),i=Ei())}return Object.defineProperty(u.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(u.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(u.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(u.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(u.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new D(this.children)),this.childNodeList}}),Object.defineProperty(u.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(u.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(u.prototype,"previousSibling",{get:function(){var c;return c=this.parent.children.indexOf(this),this.parent.children[c-1]||null}}),Object.defineProperty(u.prototype,"nextSibling",{get:function(){var c;return c=this.parent.children.indexOf(this),this.parent.children[c+1]||null}}),Object.defineProperty(u.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(u.prototype,"textContent",{get:function(){var c,g,I,l,S;if(this.nodeType===e.Element||this.nodeType===e.DocumentFragment){for(S="",l=this.children,g=0,I=l.length;g<I;g++)c=l[g],c.textContent&&(S+=c.textContent);return S}else return null},set:function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),u.prototype.setParent=function(c){var g,I,l,S,w;for(this.parent=c,c&&(this.options=c.options,this.stringify=c.stringify),S=this.children,w=[],I=0,l=S.length;I<l;I++)g=S[I],w.push(g.setParent(this));return w},u.prototype.element=function(c,g,I){var l,S,w,C,L,_,q,B,M,Y,V;if(_=null,g===null&&I==null&&(M=[{},null],g=M[0],I=M[1]),g==null&&(g={}),g=v(g),O(g)||(Y=[g,I],I=Y[0],g=Y[1]),c!=null&&(c=v(c)),Array.isArray(c))for(w=0,q=c.length;w<q;w++)S=c[w],_=this.element(S);else if(A(c))_=this.element(c.apply());else if(O(c)){for(L in c)if(!!d.call(c,L))if(V=c[L],A(V)&&(V=V.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&L.indexOf(this.stringify.convertAttKey)===0)_=this.attribute(L.substr(this.stringify.convertAttKey.length),V);else if(!this.options.separateArrayItems&&Array.isArray(V)&&T(V))_=this.dummy();else if(O(V)&&T(V))_=this.element(L);else if(!this.options.keepNullNodes&&V==null)_=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(V))for(C=0,B=V.length;C<B;C++)S=V[C],l={},l[L]=S,_=this.element(l);else O(V)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&L.indexOf(this.stringify.convertTextKey)===0?_=this.element(V):(_=this.element(L),_.element(V)):_=this.element(L,V)}else!this.options.keepNullNodes&&I===null?_=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&c.indexOf(this.stringify.convertTextKey)===0?_=this.text(I):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&c.indexOf(this.stringify.convertCDataKey)===0?_=this.cdata(I):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&c.indexOf(this.stringify.convertCommentKey)===0?_=this.comment(I):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&c.indexOf(this.stringify.convertRawKey)===0?_=this.raw(I):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&c.indexOf(this.stringify.convertPIKey)===0?_=this.instruction(c.substr(this.stringify.convertPIKey.length),I):_=this.node(c,g,I);if(_==null)throw new Error("Could not create any elements with: "+c+". "+this.debugInfo());return _},u.prototype.insertBefore=function(c,g,I){var l,S,w,C,L;if(c?.type)return w=c,C=g,w.setParent(this),C?(S=children.indexOf(C),L=children.splice(S),children.push(w),Array.prototype.push.apply(children,L)):children.push(w),w;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(c));return S=this.parent.children.indexOf(this),L=this.parent.children.splice(S),l=this.parent.element(c,g,I),Array.prototype.push.apply(this.parent.children,L),l},u.prototype.insertAfter=function(c,g,I){var l,S,w;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(c));return S=this.parent.children.indexOf(this),w=this.parent.children.splice(S+1),l=this.parent.element(c,g,I),Array.prototype.push.apply(this.parent.children,w),l},u.prototype.remove=function(){var c,g;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return c=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[c,c-c+1].concat(g=[])),this.parent},u.prototype.node=function(c,g,I){var l,S;return c!=null&&(c=v(c)),g||(g={}),g=v(g),O(g)||(S=[g,I],I=S[0],g=S[1]),l=new p(this,c,g),I!=null&&l.text(I),this.children.push(l),l},u.prototype.text=function(c){var g;return O(c)&&this.element(c),g=new m(this,c),this.children.push(g),this},u.prototype.cdata=function(c){var g;return g=new t(this,c),this.children.push(g),this},u.prototype.comment=function(c){var g;return g=new r(this,c),this.children.push(g),this},u.prototype.commentBefore=function(c){var g,I,l;return I=this.parent.children.indexOf(this),l=this.parent.children.splice(I),g=this.parent.comment(c),Array.prototype.push.apply(this.parent.children,l),this},u.prototype.commentAfter=function(c){var g,I,l;return I=this.parent.children.indexOf(this),l=this.parent.children.splice(I+1),g=this.parent.comment(c),Array.prototype.push.apply(this.parent.children,l),this},u.prototype.raw=function(c){var g;return g=new b(this,c),this.children.push(g),this},u.prototype.dummy=function(){var c;return c=new a(this),c},u.prototype.instruction=function(c,g){var I,l,S,w,C;if(c!=null&&(c=v(c)),g!=null&&(g=v(g)),Array.isArray(c))for(w=0,C=c.length;w<C;w++)I=c[w],this.instruction(I);else if(O(c))for(I in c)!d.call(c,I)||(l=c[I],this.instruction(I,l));else A(g)&&(g=g.apply()),S=new P(this,c,g),this.children.push(S);return this},u.prototype.instructionBefore=function(c,g){var I,l,S;return l=this.parent.children.indexOf(this),S=this.parent.children.splice(l),I=this.parent.instruction(c,g),Array.prototype.push.apply(this.parent.children,S),this},u.prototype.instructionAfter=function(c,g){var I,l,S;return l=this.parent.children.indexOf(this),S=this.parent.children.splice(l+1),I=this.parent.instruction(c,g),Array.prototype.push.apply(this.parent.children,S),this},u.prototype.declaration=function(c,g,I){var l,S;return l=this.document(),S=new n(l,c,g,I),l.children.length===0?l.children.unshift(S):l.children[0].type===e.Declaration?l.children[0]=S:l.children.unshift(S),l.root()||l},u.prototype.dtd=function(c,g){var I,l,S,w,C,L,_,q,B,M;for(l=this.document(),S=new o(l,c,g),B=l.children,w=C=0,_=B.length;C<_;w=++C)if(I=B[w],I.type===e.DocType)return l.children[w]=S,S;for(M=l.children,w=L=0,q=M.length;L<q;w=++L)if(I=M[w],I.isRoot)return l.children.splice(w,0,S),S;return l.children.push(S),S},u.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},u.prototype.root=function(){var c;for(c=this;c;){if(c.type===e.Document)return c.rootObject;if(c.isRoot)return c;c=c.parent}},u.prototype.document=function(){var c;for(c=this;c;){if(c.type===e.Document)return c;c=c.parent}},u.prototype.end=function(c){return this.document().end(c)},u.prototype.prev=function(){var c;if(c=this.parent.children.indexOf(this),c<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[c-1]},u.prototype.next=function(){var c;if(c=this.parent.children.indexOf(this),c===-1||c===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[c+1]},u.prototype.importDocument=function(c){var g;return g=c.root().clone(),g.parent=this,g.isRoot=!1,this.children.push(g),this},u.prototype.debugInfo=function(c){var g,I;return c=c||this.name,c==null&&!((g=this.parent)!=null&&g.name)?"":c==null?"parent: <"+this.parent.name+">":(I=this.parent)!=null&&I.name?"node: <"+c+">, parent: <"+this.parent.name+">":"node: <"+c+">"},u.prototype.ele=function(c,g,I){return this.element(c,g,I)},u.prototype.nod=function(c,g,I){return this.node(c,g,I)},u.prototype.txt=function(c){return this.text(c)},u.prototype.dat=function(c){return this.cdata(c)},u.prototype.com=function(c){return this.comment(c)},u.prototype.ins=function(c,g){return this.instruction(c,g)},u.prototype.doc=function(){return this.document()},u.prototype.dec=function(c,g,I){return this.declaration(c,g,I)},u.prototype.e=function(c,g,I){return this.element(c,g,I)},u.prototype.n=function(c,g,I){return this.node(c,g,I)},u.prototype.t=function(c){return this.text(c)},u.prototype.d=function(c){return this.cdata(c)},u.prototype.c=function(c){return this.comment(c)},u.prototype.r=function(c){return this.raw(c)},u.prototype.i=function(c,g){return this.instruction(c,g)},u.prototype.u=function(){return this.up()},u.prototype.importXMLBuilder=function(c){return this.importDocument(c)},u.prototype.replaceChild=function(c,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.removeChild=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.appendChild=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.hasChildNodes=function(){return this.children.length!==0},u.prototype.cloneNode=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.isSupported=function(c,g){return!0},u.prototype.hasAttributes=function(){return this.attribs.length!==0},u.prototype.compareDocumentPosition=function(c){var g,I;return g=this,g===c?0:this.document()!==c.document()?(I=i.Disconnected|i.ImplementationSpecific,Math.random()<.5?I|=i.Preceding:I|=i.Following,I):g.isAncestor(c)?i.Contains|i.Preceding:g.isDescendant(c)?i.Contains|i.Following:g.isPreceding(c)?i.Preceding:i.Following},u.prototype.isSameNode=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.lookupPrefix=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.isDefaultNamespace=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.lookupNamespaceURI=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.isEqualNode=function(c){var g,I,l;if(c.nodeType!==this.nodeType||c.children.length!==this.children.length)return!1;for(g=I=0,l=this.children.length-1;0<=l?I<=l:I>=l;g=0<=l?++I:--I)if(!this.children[g].isEqualNode(c.children[g]))return!1;return!0},u.prototype.getFeature=function(c,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.setUserData=function(c,g,I){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.getUserData=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.contains=function(c){return c?c===this||this.isDescendant(c):!1},u.prototype.isDescendant=function(c){var g,I,l,S,w;for(w=this.children,l=0,S=w.length;l<S;l++)if(g=w[l],c===g||(I=g.isDescendant(c),I))return!0;return!1},u.prototype.isAncestor=function(c){return c.isDescendant(this)},u.prototype.isPreceding=function(c){var g,I;return g=this.treePosition(c),I=this.treePosition(this),g===-1||I===-1?!1:g<I},u.prototype.isFollowing=function(c){var g,I;return g=this.treePosition(c),I=this.treePosition(this),g===-1||I===-1?!1:g>I},u.prototype.treePosition=function(c){var g,I;return I=0,g=!1,this.foreachTreeNode(this.document(),function(l){if(I++,!g&&l===c)return g=!0}),g?I:-1},u.prototype.foreachTreeNode=function(c,g){var I,l,S,w,C;for(c||(c=this.document()),w=c.children,l=0,S=w.length;l<S;l++){if(I=w[l],C=g(I))return C;if(C=this.foreachTreeNode(I,g),C)return C}},u}()}).call(Pi)});var zr=F((xi,Ii)=>{(function(){var i,e=function(r,n){return function(){return r.apply(n,arguments)}},t={}.hasOwnProperty;Ii.exports=i=function(){function r(n){this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this);var o,a,p;n||(n={}),this.options=n,this.options.version||(this.options.version="1.0"),a=n.stringify||{};for(o in a)!t.call(a,o)||(p=a[o],this[o]=p)}return r.prototype.name=function(n){return this.options.noValidation?n:this.assertLegalName(""+n||"")},r.prototype.text=function(n){return this.options.noValidation?n:this.assertLegalChar(this.textEscape(""+n||""))},r.prototype.cdata=function(n){return this.options.noValidation?n:(n=""+n||"",n=n.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(n))},r.prototype.comment=function(n){if(this.options.noValidation)return n;if(n=""+n||"",n.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+n);return this.assertLegalChar(n)},r.prototype.raw=function(n){return this.options.noValidation?n:""+n||""},r.prototype.attValue=function(n){return this.options.noValidation?n:this.assertLegalChar(this.attEscape(n=""+n||""))},r.prototype.insTarget=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},r.prototype.insValue=function(n){if(this.options.noValidation)return n;if(n=""+n||"",n.match(/\?>/))throw new Error("Invalid processing instruction value: "+n);return this.assertLegalChar(n)},r.prototype.xmlVersion=function(n){if(this.options.noValidation)return n;if(n=""+n||"",!n.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+n);return n},r.prototype.xmlEncoding=function(n){if(this.options.noValidation)return n;if(n=""+n||"",!n.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+n);return this.assertLegalChar(n)},r.prototype.xmlStandalone=function(n){return this.options.noValidation?n:n?"yes":"no"},r.prototype.dtdPubID=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},r.prototype.dtdSysID=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},r.prototype.dtdElementValue=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},r.prototype.dtdAttType=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},r.prototype.dtdAttDefault=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},r.prototype.dtdEntityValue=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},r.prototype.dtdNData=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},r.prototype.convertAttKey="@",r.prototype.convertPIKey="?",r.prototype.convertTextKey="#text",r.prototype.convertCDataKey="#cdata",r.prototype.convertCommentKey="#comment",r.prototype.convertRawKey="#raw",r.prototype.assertLegalChar=function(n){var o,a;if(this.options.noValidation)return n;if(o="",this.options.version==="1.0"){if(o=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,a=n.match(o))throw new Error("Invalid character in string: "+n+" at index "+a.index)}else if(this.options.version==="1.1"&&(o=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,a=n.match(o)))throw new Error("Invalid character in string: "+n+" at index "+a.index);return n},r.prototype.assertLegalName=function(n){var o;if(this.options.noValidation)return n;if(this.assertLegalChar(n),o=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!n.match(o))throw new Error("Invalid character in name");return n},r.prototype.textEscape=function(n){var o;return this.options.noValidation?n:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,n.replace(o,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},r.prototype.attEscape=function(n){var o;return this.options.noValidation?n:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,n.replace(o,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},r}()}).call(xi)});var Je=F((Si,Oi)=>{(function(){Oi.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(Si)});var Yr=F((Ni,Ai)=>{(function(){var i,e,t,r,n,o,a,p,f,y,D,P,b,m,v,T,A,O={}.hasOwnProperty;A=ve().assign,i=Q(),f=Ct(),y=Nt(),t=Et(),r=Pt(),P=Dt(),m=At(),v=Lt(),b=_t(),D=Gr(),n=xt(),o=St(),a=It(),p=Ot(),e=Je(),Ai.exports=T=function(){function x(d){var u,c,g;d||(d={}),this.options=d,c=d.writer||{};for(u in c)!O.call(c,u)||(g=c[u],this["_"+u]=this[u],this[u]=g)}return x.prototype.filterOptions=function(d){var u,c,g,I,l,S,w,C;return d||(d={}),d=A({},this.options,d),u={writer:this},u.pretty=d.pretty||!1,u.allowEmpty=d.allowEmpty||!1,u.indent=(c=d.indent)!=null?c:"  ",u.newline=(g=d.newline)!=null?g:`
`,u.offset=(I=d.offset)!=null?I:0,u.dontPrettyTextNodes=(l=(S=d.dontPrettyTextNodes)!=null?S:d.dontprettytextnodes)!=null?l:0,u.spaceBeforeSlash=(w=(C=d.spaceBeforeSlash)!=null?C:d.spacebeforeslash)!=null?w:"",u.spaceBeforeSlash===!0&&(u.spaceBeforeSlash=" "),u.suppressPrettyCount=0,u.user={},u.state=e.None,u},x.prototype.indent=function(d,u,c){var g;return!u.pretty||u.suppressPrettyCount?"":u.pretty&&(g=(c||0)+u.offset+1,g>0)?new Array(g).join(u.indent):""},x.prototype.endline=function(d,u,c){return!u.pretty||u.suppressPrettyCount?"":u.newline},x.prototype.attribute=function(d,u,c){var g;return this.openAttribute(d,u,c),g=" "+d.name+'="'+d.value+'"',this.closeAttribute(d,u,c),g},x.prototype.cdata=function(d,u,c){var g;return this.openNode(d,u,c),u.state=e.OpenTag,g=this.indent(d,u,c)+"<![CDATA[",u.state=e.InsideTag,g+=d.value,u.state=e.CloseTag,g+="]]>"+this.endline(d,u,c),u.state=e.None,this.closeNode(d,u,c),g},x.prototype.comment=function(d,u,c){var g;return this.openNode(d,u,c),u.state=e.OpenTag,g=this.indent(d,u,c)+"<!-- ",u.state=e.InsideTag,g+=d.value,u.state=e.CloseTag,g+=" -->"+this.endline(d,u,c),u.state=e.None,this.closeNode(d,u,c),g},x.prototype.declaration=function(d,u,c){var g;return this.openNode(d,u,c),u.state=e.OpenTag,g=this.indent(d,u,c)+"<?xml",u.state=e.InsideTag,g+=' version="'+d.version+'"',d.encoding!=null&&(g+=' encoding="'+d.encoding+'"'),d.standalone!=null&&(g+=' standalone="'+d.standalone+'"'),u.state=e.CloseTag,g+=u.spaceBeforeSlash+"?>",g+=this.endline(d,u,c),u.state=e.None,this.closeNode(d,u,c),g},x.prototype.docType=function(d,u,c){var g,I,l,S,w;if(c||(c=0),this.openNode(d,u,c),u.state=e.OpenTag,S=this.indent(d,u,c),S+="<!DOCTYPE "+d.root().name,d.pubID&&d.sysID?S+=' PUBLIC "'+d.pubID+'" "'+d.sysID+'"':d.sysID&&(S+=' SYSTEM "'+d.sysID+'"'),d.children.length>0){for(S+=" [",S+=this.endline(d,u,c),u.state=e.InsideTag,w=d.children,I=0,l=w.length;I<l;I++)g=w[I],S+=this.writeChildNode(g,u,c+1);u.state=e.CloseTag,S+="]"}return u.state=e.CloseTag,S+=u.spaceBeforeSlash+">",S+=this.endline(d,u,c),u.state=e.None,this.closeNode(d,u,c),S},x.prototype.element=function(d,u,c){var g,I,l,S,w,C,L,_,q,B,M,Y,V,Ee;c||(c=0),B=!1,M="",this.openNode(d,u,c),u.state=e.OpenTag,M+=this.indent(d,u,c)+"<"+d.name,Y=d.attribs;for(q in Y)!O.call(Y,q)||(g=Y[q],M+=this.attribute(g,u,c));if(l=d.children.length,S=l===0?null:d.children[0],l===0||d.children.every(function(ie){return(ie.type===i.Text||ie.type===i.Raw)&&ie.value===""}))u.allowEmpty?(M+=">",u.state=e.CloseTag,M+="</"+d.name+">"+this.endline(d,u,c)):(u.state=e.CloseTag,M+=u.spaceBeforeSlash+"/>"+this.endline(d,u,c));else if(u.pretty&&l===1&&(S.type===i.Text||S.type===i.Raw)&&S.value!=null)M+=">",u.state=e.InsideTag,u.suppressPrettyCount++,B=!0,M+=this.writeChildNode(S,u,c+1),u.suppressPrettyCount--,B=!1,u.state=e.CloseTag,M+="</"+d.name+">"+this.endline(d,u,c);else{if(u.dontPrettyTextNodes){for(V=d.children,w=0,L=V.length;w<L;w++)if(I=V[w],(I.type===i.Text||I.type===i.Raw)&&I.value!=null){u.suppressPrettyCount++,B=!0;break}}for(M+=">"+this.endline(d,u,c),u.state=e.InsideTag,Ee=d.children,C=0,_=Ee.length;C<_;C++)I=Ee[C],M+=this.writeChildNode(I,u,c+1);u.state=e.CloseTag,M+=this.indent(d,u,c)+"</"+d.name+">",B&&u.suppressPrettyCount--,M+=this.endline(d,u,c),u.state=e.None}return this.closeNode(d,u,c),M},x.prototype.writeChildNode=function(d,u,c){switch(d.type){case i.CData:return this.cdata(d,u,c);case i.Comment:return this.comment(d,u,c);case i.Element:return this.element(d,u,c);case i.Raw:return this.raw(d,u,c);case i.Text:return this.text(d,u,c);case i.ProcessingInstruction:return this.processingInstruction(d,u,c);case i.Dummy:return"";case i.Declaration:return this.declaration(d,u,c);case i.DocType:return this.docType(d,u,c);case i.AttributeDeclaration:return this.dtdAttList(d,u,c);case i.ElementDeclaration:return this.dtdElement(d,u,c);case i.EntityDeclaration:return this.dtdEntity(d,u,c);case i.NotationDeclaration:return this.dtdNotation(d,u,c);default:throw new Error("Unknown XML node type: "+d.constructor.name)}},x.prototype.processingInstruction=function(d,u,c){var g;return this.openNode(d,u,c),u.state=e.OpenTag,g=this.indent(d,u,c)+"<?",u.state=e.InsideTag,g+=d.target,d.value&&(g+=" "+d.value),u.state=e.CloseTag,g+=u.spaceBeforeSlash+"?>",g+=this.endline(d,u,c),u.state=e.None,this.closeNode(d,u,c),g},x.prototype.raw=function(d,u,c){var g;return this.openNode(d,u,c),u.state=e.OpenTag,g=this.indent(d,u,c),u.state=e.InsideTag,g+=d.value,u.state=e.CloseTag,g+=this.endline(d,u,c),u.state=e.None,this.closeNode(d,u,c),g},x.prototype.text=function(d,u,c){var g;return this.openNode(d,u,c),u.state=e.OpenTag,g=this.indent(d,u,c),u.state=e.InsideTag,g+=d.value,u.state=e.CloseTag,g+=this.endline(d,u,c),u.state=e.None,this.closeNode(d,u,c),g},x.prototype.dtdAttList=function(d,u,c){var g;return this.openNode(d,u,c),u.state=e.OpenTag,g=this.indent(d,u,c)+"<!ATTLIST",u.state=e.InsideTag,g+=" "+d.elementName+" "+d.attributeName+" "+d.attributeType,d.defaultValueType!=="#DEFAULT"&&(g+=" "+d.defaultValueType),d.defaultValue&&(g+=' "'+d.defaultValue+'"'),u.state=e.CloseTag,g+=u.spaceBeforeSlash+">"+this.endline(d,u,c),u.state=e.None,this.closeNode(d,u,c),g},x.prototype.dtdElement=function(d,u,c){var g;return this.openNode(d,u,c),u.state=e.OpenTag,g=this.indent(d,u,c)+"<!ELEMENT",u.state=e.InsideTag,g+=" "+d.name+" "+d.value,u.state=e.CloseTag,g+=u.spaceBeforeSlash+">"+this.endline(d,u,c),u.state=e.None,this.closeNode(d,u,c),g},x.prototype.dtdEntity=function(d,u,c){var g;return this.openNode(d,u,c),u.state=e.OpenTag,g=this.indent(d,u,c)+"<!ENTITY",u.state=e.InsideTag,d.pe&&(g+=" %"),g+=" "+d.name,d.value?g+=' "'+d.value+'"':(d.pubID&&d.sysID?g+=' PUBLIC "'+d.pubID+'" "'+d.sysID+'"':d.sysID&&(g+=' SYSTEM "'+d.sysID+'"'),d.nData&&(g+=" NDATA "+d.nData)),u.state=e.CloseTag,g+=u.spaceBeforeSlash+">"+this.endline(d,u,c),u.state=e.None,this.closeNode(d,u,c),g},x.prototype.dtdNotation=function(d,u,c){var g;return this.openNode(d,u,c),u.state=e.OpenTag,g=this.indent(d,u,c)+"<!NOTATION",u.state=e.InsideTag,g+=" "+d.name,d.pubID&&d.sysID?g+=' PUBLIC "'+d.pubID+'" "'+d.sysID+'"':d.pubID?g+=' PUBLIC "'+d.pubID+'"':d.sysID&&(g+=' SYSTEM "'+d.sysID+'"'),u.state=e.CloseTag,g+=u.spaceBeforeSlash+">"+this.endline(d,u,c),u.state=e.None,this.closeNode(d,u,c),g},x.prototype.openNode=function(d,u,c){},x.prototype.closeNode=function(d,u,c){},x.prototype.openAttribute=function(d,u,c){},x.prototype.closeAttribute=function(d,u,c){},x}()}).call(Ni)});var Rt=F((Li,_i)=>{(function(){var i,e,t=function(n,o){for(var a in o)r.call(o,a)&&(n[a]=o[a]);function p(){this.constructor=n}return p.prototype=o.prototype,n.prototype=new p,n.__super__=o.prototype,n},r={}.hasOwnProperty;e=Yr(),_i.exports=i=function(n){t(o,n);function o(a){o.__super__.constructor.call(this,a)}return o.prototype.document=function(a,p){var f,y,D,P,b;for(p=this.filterOptions(p),P="",b=a.children,y=0,D=b.length;y<D;y++)f=b[y],P+=this.writeChildNode(f,p,0);return p.pretty&&P.slice(-p.newline.length)===p.newline&&(P=P.slice(0,-p.newline.length)),P},o}(e)}).call(Li)});var Kr=F((Ri,Mi)=>{(function(){var i,e,t,r,n,o,a,p,f=function(D,P){for(var b in P)y.call(P,b)&&(D[b]=P[b]);function m(){this.constructor=D}return m.prototype=P.prototype,D.prototype=new m,D.__super__=P.prototype,D},y={}.hasOwnProperty;p=ve().isPlainObject,t=$r(),e=Fn(),n=pe(),i=Q(),a=zr(),o=Rt(),Mi.exports=r=function(D){f(P,D);function P(b){P.__super__.constructor.call(this,null),this.name="#document",this.type=i.Document,this.documentURI=null,this.domConfig=new e,b||(b={}),b.writer||(b.writer=new o),this.options=b,this.stringify=new a(b)}return Object.defineProperty(P.prototype,"implementation",{value:new t}),Object.defineProperty(P.prototype,"doctype",{get:function(){var b,m,v,T;for(T=this.children,m=0,v=T.length;m<v;m++)if(b=T[m],b.type===i.DocType)return b;return null}}),Object.defineProperty(P.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(P.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(P.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(P.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===i.Declaration?this.children[0].encoding:null}}),Object.defineProperty(P.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===i.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(P.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===i.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(P.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(P.prototype,"origin",{get:function(){return null}}),Object.defineProperty(P.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(P.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(P.prototype,"contentType",{get:function(){return null}}),P.prototype.end=function(b){var m;return m={},b?p(b)&&(m=b,b=this.options.writer):b=this.options.writer,b.document(this,b.filterOptions(m))},P.prototype.toString=function(b){return this.options.writer.document(this,this.options.writer.filterOptions(b))},P.prototype.createElement=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createTextNode=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createComment=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createCDATASection=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createProcessingInstruction=function(b,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createAttribute=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createEntityReference=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.getElementsByTagName=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.importNode=function(b,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createElementNS=function(b,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createAttributeNS=function(b,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.getElementsByTagNameNS=function(b,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.getElementById=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.adoptNode=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.renameNode=function(b,m,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.getElementsByClassName=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createEvent=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createNodeIterator=function(b,m,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createTreeWalker=function(b,m,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},P}(n)}).call(Ri)});var qi=F((ki,Fi)=>{(function(){var i,e,t,r,n,o,a,p,f,y,D,P,b,m,v,T,A,O,x,d,u,c,g,I,l={}.hasOwnProperty;I=ve(),c=I.isObject,u=I.isFunction,g=I.isPlainObject,d=I.getValue,i=Q(),P=Kr(),m=Dt(),r=Et(),n=Pt(),T=At(),x=Lt(),v=_t(),y=Ct(),D=Nt(),o=xt(),p=It(),a=St(),f=Ot(),t=Wr(),O=zr(),A=Rt(),e=Je(),Fi.exports=b=function(){function S(w,C,L){var _;this.name="?xml",this.type=i.Document,w||(w={}),_={},w.writer?g(w.writer)&&(_=w.writer,w.writer=new A):w.writer=new A,this.options=w,this.writer=w.writer,this.writerOptions=this.writer.filterOptions(_),this.stringify=new O(w),this.onDataCallback=C||function(){},this.onEndCallback=L||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return S.prototype.createChildNode=function(w){var C,L,_,q,B,M,Y,V;switch(w.type){case i.CData:this.cdata(w.value);break;case i.Comment:this.comment(w.value);break;case i.Element:_={},Y=w.attribs;for(L in Y)!l.call(Y,L)||(C=Y[L],_[L]=C.value);this.node(w.name,_);break;case i.Dummy:this.dummy();break;case i.Raw:this.raw(w.value);break;case i.Text:this.text(w.value);break;case i.ProcessingInstruction:this.instruction(w.target,w.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+w.constructor.name)}for(V=w.children,B=0,M=V.length;B<M;B++)q=V[B],this.createChildNode(q),q.type===i.Element&&this.up();return this},S.prototype.dummy=function(){return this},S.prototype.node=function(w,C,L){var _;if(w==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(w));return this.openCurrent(),w=d(w),C==null&&(C={}),C=d(C),c(C)||(_=[C,L],L=_[0],C=_[1]),this.currentNode=new m(this,w,C),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,L!=null&&this.text(L),this},S.prototype.element=function(w,C,L){var _,q,B,M,Y,V;if(this.currentNode&&this.currentNode.type===i.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(w)||c(w)||u(w))for(M=this.options.noValidation,this.options.noValidation=!0,V=new P(this.options).element("TEMP_ROOT"),V.element(w),this.options.noValidation=M,Y=V.children,q=0,B=Y.length;q<B;q++)_=Y[q],this.createChildNode(_),_.type===i.Element&&this.up();else this.node(w,C,L);return this},S.prototype.attribute=function(w,C){var L,_;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(w));if(w!=null&&(w=d(w)),c(w))for(L in w)!l.call(w,L)||(_=w[L],this.attribute(L,_));else u(C)&&(C=C.apply()),this.options.keepNullAttributes&&C==null?this.currentNode.attribs[w]=new t(this,w,""):C!=null&&(this.currentNode.attribs[w]=new t(this,w,C));return this},S.prototype.text=function(w){var C;return this.openCurrent(),C=new x(this,w),this.onData(this.writer.text(C,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},S.prototype.cdata=function(w){var C;return this.openCurrent(),C=new r(this,w),this.onData(this.writer.cdata(C,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},S.prototype.comment=function(w){var C;return this.openCurrent(),C=new n(this,w),this.onData(this.writer.comment(C,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},S.prototype.raw=function(w){var C;return this.openCurrent(),C=new T(this,w),this.onData(this.writer.raw(C,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},S.prototype.instruction=function(w,C){var L,_,q,B,M;if(this.openCurrent(),w!=null&&(w=d(w)),C!=null&&(C=d(C)),Array.isArray(w))for(L=0,B=w.length;L<B;L++)_=w[L],this.instruction(_);else if(c(w))for(_ in w)!l.call(w,_)||(q=w[_],this.instruction(_,q));else u(C)&&(C=C.apply()),M=new v(this,w,C),this.onData(this.writer.processingInstruction(M,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},S.prototype.declaration=function(w,C,L){var _;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return _=new y(this,w,C,L),this.onData(this.writer.declaration(_,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},S.prototype.doctype=function(w,C,L){if(this.openCurrent(),w==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new D(this,C,L),this.currentNode.rootNodeName=w,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},S.prototype.dtdElement=function(w,C){var L;return this.openCurrent(),L=new a(this,w,C),this.onData(this.writer.dtdElement(L,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},S.prototype.attList=function(w,C,L,_,q){var B;return this.openCurrent(),B=new o(this,w,C,L,_,q),this.onData(this.writer.dtdAttList(B,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},S.prototype.entity=function(w,C){var L;return this.openCurrent(),L=new p(this,!1,w,C),this.onData(this.writer.dtdEntity(L,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},S.prototype.pEntity=function(w,C){var L;return this.openCurrent(),L=new p(this,!0,w,C),this.onData(this.writer.dtdEntity(L,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},S.prototype.notation=function(w,C){var L;return this.openCurrent(),L=new f(this,w,C),this.onData(this.writer.dtdNotation(L,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},S.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},S.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},S.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},S.prototype.openNode=function(w){var C,L,_,q;if(!w.isOpen){if(!this.root&&this.currentLevel===0&&w.type===i.Element&&(this.root=w),L="",w.type===i.Element){this.writerOptions.state=e.OpenTag,L=this.writer.indent(w,this.writerOptions,this.currentLevel)+"<"+w.name,q=w.attribs;for(_ in q)!l.call(q,_)||(C=q[_],L+=this.writer.attribute(C,this.writerOptions,this.currentLevel));L+=(w.children?">":"/>")+this.writer.endline(w,this.writerOptions,this.currentLevel),this.writerOptions.state=e.InsideTag}else this.writerOptions.state=e.OpenTag,L=this.writer.indent(w,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+w.rootNodeName,w.pubID&&w.sysID?L+=' PUBLIC "'+w.pubID+'" "'+w.sysID+'"':w.sysID&&(L+=' SYSTEM "'+w.sysID+'"'),w.children?(L+=" [",this.writerOptions.state=e.InsideTag):(this.writerOptions.state=e.CloseTag,L+=">"),L+=this.writer.endline(w,this.writerOptions,this.currentLevel);return this.onData(L,this.currentLevel),w.isOpen=!0}},S.prototype.closeNode=function(w){var C;if(!w.isClosed)return C="",this.writerOptions.state=e.CloseTag,w.type===i.Element?C=this.writer.indent(w,this.writerOptions,this.currentLevel)+"</"+w.name+">"+this.writer.endline(w,this.writerOptions,this.currentLevel):C=this.writer.indent(w,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(w,this.writerOptions,this.currentLevel),this.writerOptions.state=e.None,this.onData(C,this.currentLevel),w.isClosed=!0},S.prototype.onData=function(w,C){return this.documentStarted=!0,this.onDataCallback(w,C+1)},S.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},S.prototype.debugInfo=function(w){return w==null?"":"node: <"+w+">"},S.prototype.ele=function(){return this.element.apply(this,arguments)},S.prototype.nod=function(w,C,L){return this.node(w,C,L)},S.prototype.txt=function(w){return this.text(w)},S.prototype.dat=function(w){return this.cdata(w)},S.prototype.com=function(w){return this.comment(w)},S.prototype.ins=function(w,C){return this.instruction(w,C)},S.prototype.dec=function(w,C,L){return this.declaration(w,C,L)},S.prototype.dtd=function(w,C,L){return this.doctype(w,C,L)},S.prototype.e=function(w,C,L){return this.element(w,C,L)},S.prototype.n=function(w,C,L){return this.node(w,C,L)},S.prototype.t=function(w){return this.text(w)},S.prototype.d=function(w){return this.cdata(w)},S.prototype.c=function(w){return this.comment(w)},S.prototype.r=function(w){return this.raw(w)},S.prototype.i=function(w,C){return this.instruction(w,C)},S.prototype.att=function(){return this.currentNode&&this.currentNode.type===i.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},S.prototype.a=function(){return this.currentNode&&this.currentNode.type===i.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},S.prototype.ent=function(w,C){return this.entity(w,C)},S.prototype.pent=function(w,C){return this.pEntity(w,C)},S.prototype.not=function(w,C){return this.notation(w,C)},S}()}).call(ki)});var ji=F((Bi,Vi)=>{(function(){var i,e,t,r,n=function(a,p){for(var f in p)o.call(p,f)&&(a[f]=p[f]);function y(){this.constructor=a}return y.prototype=p.prototype,a.prototype=new y,a.__super__=p.prototype,a},o={}.hasOwnProperty;i=Q(),r=Yr(),e=Je(),Vi.exports=t=function(a){n(p,a);function p(f,y){this.stream=f,p.__super__.constructor.call(this,y)}return p.prototype.endline=function(f,y,D){return f.isLastRootNode&&y.state===e.CloseTag?"":p.__super__.endline.call(this,f,y,D)},p.prototype.document=function(f,y){var D,P,b,m,v,T,A,O,x;for(A=f.children,P=b=0,v=A.length;b<v;P=++b)D=A[P],D.isLastRootNode=P===f.children.length-1;for(y=this.filterOptions(y),O=f.children,x=[],m=0,T=O.length;m<T;m++)D=O[m],x.push(this.writeChildNode(D,y,0));return x},p.prototype.attribute=function(f,y,D){return this.stream.write(p.__super__.attribute.call(this,f,y,D))},p.prototype.cdata=function(f,y,D){return this.stream.write(p.__super__.cdata.call(this,f,y,D))},p.prototype.comment=function(f,y,D){return this.stream.write(p.__super__.comment.call(this,f,y,D))},p.prototype.declaration=function(f,y,D){return this.stream.write(p.__super__.declaration.call(this,f,y,D))},p.prototype.docType=function(f,y,D){var P,b,m,v;if(D||(D=0),this.openNode(f,y,D),y.state=e.OpenTag,this.stream.write(this.indent(f,y,D)),this.stream.write("<!DOCTYPE "+f.root().name),f.pubID&&f.sysID?this.stream.write(' PUBLIC "'+f.pubID+'" "'+f.sysID+'"'):f.sysID&&this.stream.write(' SYSTEM "'+f.sysID+'"'),f.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(f,y,D)),y.state=e.InsideTag,v=f.children,b=0,m=v.length;b<m;b++)P=v[b],this.writeChildNode(P,y,D+1);y.state=e.CloseTag,this.stream.write("]")}return y.state=e.CloseTag,this.stream.write(y.spaceBeforeSlash+">"),this.stream.write(this.endline(f,y,D)),y.state=e.None,this.closeNode(f,y,D)},p.prototype.element=function(f,y,D){var P,b,m,v,T,A,O,x,d,u;D||(D=0),this.openNode(f,y,D),y.state=e.OpenTag,this.stream.write(this.indent(f,y,D)+"<"+f.name),d=f.attribs;for(O in d)!o.call(d,O)||(P=d[O],this.attribute(P,y,D));if(m=f.children.length,v=m===0?null:f.children[0],m===0||f.children.every(function(c){return(c.type===i.Text||c.type===i.Raw)&&c.value===""}))y.allowEmpty?(this.stream.write(">"),y.state=e.CloseTag,this.stream.write("</"+f.name+">")):(y.state=e.CloseTag,this.stream.write(y.spaceBeforeSlash+"/>"));else if(y.pretty&&m===1&&(v.type===i.Text||v.type===i.Raw)&&v.value!=null)this.stream.write(">"),y.state=e.InsideTag,y.suppressPrettyCount++,x=!0,this.writeChildNode(v,y,D+1),y.suppressPrettyCount--,x=!1,y.state=e.CloseTag,this.stream.write("</"+f.name+">");else{for(this.stream.write(">"+this.endline(f,y,D)),y.state=e.InsideTag,u=f.children,T=0,A=u.length;T<A;T++)b=u[T],this.writeChildNode(b,y,D+1);y.state=e.CloseTag,this.stream.write(this.indent(f,y,D)+"</"+f.name+">")}return this.stream.write(this.endline(f,y,D)),y.state=e.None,this.closeNode(f,y,D)},p.prototype.processingInstruction=function(f,y,D){return this.stream.write(p.__super__.processingInstruction.call(this,f,y,D))},p.prototype.raw=function(f,y,D){return this.stream.write(p.__super__.raw.call(this,f,y,D))},p.prototype.text=function(f,y,D){return this.stream.write(p.__super__.text.call(this,f,y,D))},p.prototype.dtdAttList=function(f,y,D){return this.stream.write(p.__super__.dtdAttList.call(this,f,y,D))},p.prototype.dtdElement=function(f,y,D){return this.stream.write(p.__super__.dtdElement.call(this,f,y,D))},p.prototype.dtdEntity=function(f,y,D){return this.stream.write(p.__super__.dtdEntity.call(this,f,y,D))},p.prototype.dtdNotation=function(f,y,D){return this.stream.write(p.__super__.dtdNotation.call(this,f,y,D))},p}(r)}).call(Bi)});var Ui=F((Xi,Re)=>{(function(){var i,e,t,r,n,o,a,p,f,y;y=ve(),p=y.assign,f=y.isFunction,t=$r(),r=Kr(),n=qi(),a=Rt(),o=ji(),i=Q(),e=Je(),Re.exports.create=function(D,P,b,m){var v,T;if(D==null)throw new Error("Root element needs a name.");return m=p({},P,b,m),v=new r(m),T=v.element(D),m.headless||(v.declaration(m),(m.pubID!=null||m.sysID!=null)&&v.dtd(m)),T},Re.exports.begin=function(D,P,b){var m;return f(D)&&(m=[D,P],P=m[0],b=m[1],D={}),P?new n(D,P,b):new r(D)},Re.exports.stringWriter=function(D){return new a(D)},Re.exports.streamWriter=function(D,P){return new o(D,P)},Re.exports.implementation=new t,Re.exports.nodeType=i,Re.exports.writerState=e}).call(Xi)});var Hi=F(Qr=>{(function(){"use strict";var i,e,t,r,n,o={}.hasOwnProperty;i=Ui(),e=vt().defaults,r=function(a){return typeof a=="string"&&(a.indexOf("&")>=0||a.indexOf(">")>=0||a.indexOf("<")>=0)},n=function(a){return"<![CDATA["+t(a)+"]]>"},t=function(a){return a.replace("]]>","]]]]><![CDATA[>")},Qr.Builder=function(){function a(p){var f,y,D;this.options={},y=e["0.2"];for(f in y)!o.call(y,f)||(D=y[f],this.options[f]=D);for(f in p)!o.call(p,f)||(D=p[f],this.options[f]=D)}return a.prototype.buildObject=function(p){var f,y,D,P,b;return f=this.options.attrkey,y=this.options.charkey,Object.keys(p).length===1&&this.options.rootName===e["0.2"].rootName?(b=Object.keys(p)[0],p=p[b]):b=this.options.rootName,D=function(m){return function(v,T){var A,O,x,d,u,c;if(typeof T!="object")m.options.cdata&&r(T)?v.raw(n(T)):v.txt(T);else if(Array.isArray(T)){for(d in T)if(!!o.call(T,d)){O=T[d];for(u in O)x=O[u],v=D(v.ele(u),x).up()}}else for(u in T)if(!!o.call(T,u))if(O=T[u],u===f){if(typeof O=="object")for(A in O)c=O[A],v=v.att(A,c)}else if(u===y)m.options.cdata&&r(O)?v=v.raw(n(O)):v=v.txt(O);else if(Array.isArray(O))for(d in O)!o.call(O,d)||(x=O[d],typeof x=="string"?m.options.cdata&&r(x)?v=v.ele(u).raw(n(x)).up():v=v.ele(u,x).up():v=D(v.ele(u),x).up());else typeof O=="object"?v=D(v.ele(u),O).up():typeof O=="string"&&m.options.cdata&&r(O)?v=v.ele(u).raw(n(O)).up():(O==null&&(O=""),v=v.ele(u,O.toString()).up());return v}}(this),P=i.create(b,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),D(P,p).end(this.options.renderOpts)},a}()}).call(Qr)});var $i=F(Mt=>{(function(i){i.parser=function(h,s){return new t(h,s)},i.SAXParser=t,i.SAXStream=y,i.createStream=f,i.MAX_BUFFER_LENGTH=64*1024;var e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];i.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function t(h,s){if(!(this instanceof t))return new t(h,s);var N=this;n(N),N.q=N.c="",N.bufferCheckPosition=i.MAX_BUFFER_LENGTH,N.opt=s||{},N.opt.lowercase=N.opt.lowercase||N.opt.lowercasetags,N.looseCase=N.opt.lowercase?"toLowerCase":"toUpperCase",N.tags=[],N.closed=N.closedRoot=N.sawRoot=!1,N.tag=N.error=null,N.strict=!!h,N.noscript=!!(h||N.opt.noscript),N.state=l.BEGIN,N.strictEntities=N.opt.strictEntities,N.ENTITIES=N.strictEntities?Object.create(i.XML_ENTITIES):Object.create(i.ENTITIES),N.attribList=[],N.opt.xmlns&&(N.ns=Object.create(v)),N.trackPosition=N.opt.position!==!1,N.trackPosition&&(N.position=N.line=N.column=0),w(N,"onready")}Object.create||(Object.create=function(h){function s(){}s.prototype=h;var N=new s;return N}),Object.keys||(Object.keys=function(h){var s=[];for(var N in h)h.hasOwnProperty(N)&&s.push(N);return s});function r(h){for(var s=Math.max(i.MAX_BUFFER_LENGTH,10),N=0,E=0,j=e.length;E<j;E++){var $=h[e[E]].length;if($>s)switch(e[E]){case"textNode":L(h);break;case"cdata":C(h,"oncdata",h.cdata),h.cdata="";break;case"script":C(h,"onscript",h.script),h.script="";break;default:q(h,"Max buffer length exceeded: "+e[E])}N=Math.max(N,$)}var z=i.MAX_BUFFER_LENGTH-N;h.bufferCheckPosition=z+h.position}function n(h){for(var s=0,N=e.length;s<N;s++)h[e[s]]=""}function o(h){L(h),h.cdata!==""&&(C(h,"oncdata",h.cdata),h.cdata=""),h.script!==""&&(C(h,"onscript",h.script),h.script="")}t.prototype={end:function(){B(this)},write:ae,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var a;try{a=require("stream").Stream}catch{a=function(){}}var p=i.EVENTS.filter(function(h){return h!=="error"&&h!=="end"});function f(h,s){return new y(h,s)}function y(h,s){if(!(this instanceof y))return new y(h,s);a.apply(this),this._parser=new t(h,s),this.writable=!0,this.readable=!0;var N=this;this._parser.onend=function(){N.emit("end")},this._parser.onerror=function(E){N.emit("error",E),N._parser.error=null},this._decoder=null,p.forEach(function(E){Object.defineProperty(N,"on"+E,{get:function(){return N._parser["on"+E]},set:function(j){if(!j)return N.removeAllListeners(E),N._parser["on"+E]=j,j;N.on(E,j)},enumerable:!0,configurable:!1})})}y.prototype=Object.create(a.prototype,{constructor:{value:y}}),y.prototype.write=function(h){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(h)){if(!this._decoder){var s=require("string_decoder").StringDecoder;this._decoder=new s("utf8")}h=this._decoder.write(h)}return this._parser.write(h.toString()),this.emit("data",h),!0},y.prototype.end=function(h){return h&&h.length&&this.write(h),this._parser.end(),!0},y.prototype.on=function(h,s){var N=this;return!N._parser["on"+h]&&p.indexOf(h)!==-1&&(N._parser["on"+h]=function(){var E=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);E.splice(0,0,h),N.emit.apply(N,E)}),a.prototype.on.call(N,h,s)};var D="[CDATA[",P="DOCTYPE",b="http://www.w3.org/XML/1998/namespace",m="http://www.w3.org/2000/xmlns/",v={xml:b,xmlns:m},T=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,A=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,O=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,x=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function d(h){return h===" "||h===`
`||h==="\r"||h==="	"}function u(h){return h==='"'||h==="'"}function c(h){return h===">"||d(h)}function g(h,s){return h.test(s)}function I(h,s){return!g(h,s)}var l=0;i.STATE={BEGIN:l++,BEGIN_WHITESPACE:l++,TEXT:l++,TEXT_ENTITY:l++,OPEN_WAKA:l++,SGML_DECL:l++,SGML_DECL_QUOTED:l++,DOCTYPE:l++,DOCTYPE_QUOTED:l++,DOCTYPE_DTD:l++,DOCTYPE_DTD_QUOTED:l++,COMMENT_STARTING:l++,COMMENT:l++,COMMENT_ENDING:l++,COMMENT_ENDED:l++,CDATA:l++,CDATA_ENDING:l++,CDATA_ENDING_2:l++,PROC_INST:l++,PROC_INST_BODY:l++,PROC_INST_ENDING:l++,OPEN_TAG:l++,OPEN_TAG_SLASH:l++,ATTRIB:l++,ATTRIB_NAME:l++,ATTRIB_NAME_SAW_WHITE:l++,ATTRIB_VALUE:l++,ATTRIB_VALUE_QUOTED:l++,ATTRIB_VALUE_CLOSED:l++,ATTRIB_VALUE_UNQUOTED:l++,ATTRIB_VALUE_ENTITY_Q:l++,ATTRIB_VALUE_ENTITY_U:l++,CLOSE_TAG:l++,CLOSE_TAG_SAW_WHITE:l++,SCRIPT:l++,SCRIPT_ENDING:l++},i.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},i.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(i.ENTITIES).forEach(function(h){var s=i.ENTITIES[h],N=typeof s=="number"?String.fromCharCode(s):s;i.ENTITIES[h]=N});for(var S in i.STATE)i.STATE[i.STATE[S]]=S;l=i.STATE;function w(h,s,N){h[s]&&h[s](N)}function C(h,s,N){h.textNode&&L(h),w(h,s,N)}function L(h){h.textNode=_(h.opt,h.textNode),h.textNode&&w(h,"ontext",h.textNode),h.textNode=""}function _(h,s){return h.trim&&(s=s.trim()),h.normalize&&(s=s.replace(/\s+/g," ")),s}function q(h,s){return L(h),h.trackPosition&&(s+=`
Line: `+h.line+`
Column: `+h.column+`
Char: `+h.c),s=new Error(s),h.error=s,w(h,"onerror",s),h}function B(h){return h.sawRoot&&!h.closedRoot&&M(h,"Unclosed root tag"),h.state!==l.BEGIN&&h.state!==l.BEGIN_WHITESPACE&&h.state!==l.TEXT&&q(h,"Unexpected end"),L(h),h.c="",h.closed=!0,w(h,"onend"),t.call(h,h.strict,h.opt),h}function M(h,s){if(typeof h!="object"||!(h instanceof t))throw new Error("bad call to strictFail");h.strict&&q(h,s)}function Y(h){h.strict||(h.tagName=h.tagName[h.looseCase]());var s=h.tags[h.tags.length-1]||h,N=h.tag={name:h.tagName,attributes:{}};h.opt.xmlns&&(N.ns=s.ns),h.attribList.length=0,C(h,"onopentagstart",N)}function V(h,s){var N=h.indexOf(":"),E=N<0?["",h]:h.split(":"),j=E[0],$=E[1];return s&&h==="xmlns"&&(j="xmlns",$=""),{prefix:j,local:$}}function Ee(h){if(h.strict||(h.attribName=h.attribName[h.looseCase]()),h.attribList.indexOf(h.attribName)!==-1||h.tag.attributes.hasOwnProperty(h.attribName)){h.attribName=h.attribValue="";return}if(h.opt.xmlns){var s=V(h.attribName,!0),N=s.prefix,E=s.local;if(N==="xmlns")if(E==="xml"&&h.attribValue!==b)M(h,"xml: prefix must be bound to "+b+`
Actual: `+h.attribValue);else if(E==="xmlns"&&h.attribValue!==m)M(h,"xmlns: prefix must be bound to "+m+`
Actual: `+h.attribValue);else{var j=h.tag,$=h.tags[h.tags.length-1]||h;j.ns===$.ns&&(j.ns=Object.create($.ns)),j.ns[E]=h.attribValue}h.attribList.push([h.attribName,h.attribValue])}else h.tag.attributes[h.attribName]=h.attribValue,C(h,"onattribute",{name:h.attribName,value:h.attribValue});h.attribName=h.attribValue=""}function ie(h,s){if(h.opt.xmlns){var N=h.tag,E=V(h.tagName);N.prefix=E.prefix,N.local=E.local,N.uri=N.ns[E.prefix]||"",N.prefix&&!N.uri&&(M(h,"Unbound namespace prefix: "+JSON.stringify(h.tagName)),N.uri=E.prefix);var j=h.tags[h.tags.length-1]||h;N.ns&&j.ns!==N.ns&&Object.keys(N.ns).forEach(function(sn){C(h,"onopennamespace",{prefix:sn,uri:N.ns[sn]})});for(var $=0,z=h.attribList.length;$<z;$++){var te=h.attribList[$],ce=te[0],Pe=te[1],X=V(ce,!0),re=X.prefix,Po=X.local,on=re===""?"":N.ns[re]||"",cr={name:ce,value:Pe,prefix:re,local:Po,uri:on};re&&re!=="xmlns"&&!on&&(M(h,"Unbound namespace prefix: "+JSON.stringify(re)),cr.uri=re),h.tag.attributes[ce]=cr,C(h,"onattribute",cr)}h.attribList.length=0}h.tag.isSelfClosing=!!s,h.sawRoot=!0,h.tags.push(h.tag),C(h,"onopentag",h.tag),s||(!h.noscript&&h.tagName.toLowerCase()==="script"?h.state=l.SCRIPT:h.state=l.TEXT,h.tag=null,h.tagName=""),h.attribName=h.attribValue="",h.attribList.length=0}function Ve(h){if(!h.tagName){M(h,"Weird empty close tag."),h.textNode+="</>",h.state=l.TEXT;return}if(h.script){if(h.tagName!=="script"){h.script+="</"+h.tagName+">",h.tagName="",h.state=l.SCRIPT;return}C(h,"onscript",h.script),h.script=""}var s=h.tags.length,N=h.tagName;h.strict||(N=N[h.looseCase]());for(var E=N;s--;){var j=h.tags[s];if(j.name!==E)M(h,"Unexpected close tag");else break}if(s<0){M(h,"Unmatched closing tag: "+h.tagName),h.textNode+="</"+h.tagName+">",h.state=l.TEXT;return}h.tagName=N;for(var $=h.tags.length;$-- >s;){var z=h.tag=h.tags.pop();h.tagName=h.tag.name,C(h,"onclosetag",h.tagName);var te={};for(var ce in z.ns)te[ce]=z.ns[ce];var Pe=h.tags[h.tags.length-1]||h;h.opt.xmlns&&z.ns!==Pe.ns&&Object.keys(z.ns).forEach(function(X){var re=z.ns[X];C(h,"onclosenamespace",{prefix:X,uri:re})})}s===0&&(h.closedRoot=!0),h.tagName=h.attribValue=h.attribName="",h.attribList.length=0,h.state=l.TEXT}function it(h){var s=h.entity,N=s.toLowerCase(),E,j="";return h.ENTITIES[s]?h.ENTITIES[s]:h.ENTITIES[N]?h.ENTITIES[N]:(s=N,s.charAt(0)==="#"&&(s.charAt(1)==="x"?(s=s.slice(2),E=parseInt(s,16),j=E.toString(16)):(s=s.slice(1),E=parseInt(s,10),j=E.toString(10))),s=s.replace(/^0+/,""),isNaN(E)||j.toLowerCase()!==s?(M(h,"Invalid character entity"),"&"+h.entity+";"):String.fromCodePoint(E))}function ze(h,s){s==="<"?(h.state=l.OPEN_WAKA,h.startTagPosition=h.position):d(s)||(M(h,"Non-whitespace before first tag."),h.textNode=s,h.state=l.TEXT)}function fe(h,s){var N="";return s<h.length&&(N=h.charAt(s)),N}function ae(h){var s=this;if(this.error)throw this.error;if(s.closed)return q(s,"Cannot write after close. Assign an onready handler.");if(h===null)return B(s);typeof h=="object"&&(h=h.toString());for(var N=0,E="";E=fe(h,N++),s.c=E,!!E;)switch(s.trackPosition&&(s.position++,E===`
`?(s.line++,s.column=0):s.column++),s.state){case l.BEGIN:if(s.state=l.BEGIN_WHITESPACE,E==="\uFEFF")continue;ze(s,E);continue;case l.BEGIN_WHITESPACE:ze(s,E);continue;case l.TEXT:if(s.sawRoot&&!s.closedRoot){for(var j=N-1;E&&E!=="<"&&E!=="&";)E=fe(h,N++),E&&s.trackPosition&&(s.position++,E===`
`?(s.line++,s.column=0):s.column++);s.textNode+=h.substring(j,N-1)}E==="<"&&!(s.sawRoot&&s.closedRoot&&!s.strict)?(s.state=l.OPEN_WAKA,s.startTagPosition=s.position):(!d(E)&&(!s.sawRoot||s.closedRoot)&&M(s,"Text data outside of root node."),E==="&"?s.state=l.TEXT_ENTITY:s.textNode+=E);continue;case l.SCRIPT:E==="<"?s.state=l.SCRIPT_ENDING:s.script+=E;continue;case l.SCRIPT_ENDING:E==="/"?s.state=l.CLOSE_TAG:(s.script+="<"+E,s.state=l.SCRIPT);continue;case l.OPEN_WAKA:if(E==="!")s.state=l.SGML_DECL,s.sgmlDecl="";else if(!d(E))if(g(T,E))s.state=l.OPEN_TAG,s.tagName=E;else if(E==="/")s.state=l.CLOSE_TAG,s.tagName="";else if(E==="?")s.state=l.PROC_INST,s.procInstName=s.procInstBody="";else{if(M(s,"Unencoded <"),s.startTagPosition+1<s.position){var $=s.position-s.startTagPosition;E=new Array($).join(" ")+E}s.textNode+="<"+E,s.state=l.TEXT}continue;case l.SGML_DECL:(s.sgmlDecl+E).toUpperCase()===D?(C(s,"onopencdata"),s.state=l.CDATA,s.sgmlDecl="",s.cdata=""):s.sgmlDecl+E==="--"?(s.state=l.COMMENT,s.comment="",s.sgmlDecl=""):(s.sgmlDecl+E).toUpperCase()===P?(s.state=l.DOCTYPE,(s.doctype||s.sawRoot)&&M(s,"Inappropriately located doctype declaration"),s.doctype="",s.sgmlDecl=""):E===">"?(C(s,"onsgmldeclaration",s.sgmlDecl),s.sgmlDecl="",s.state=l.TEXT):(u(E)&&(s.state=l.SGML_DECL_QUOTED),s.sgmlDecl+=E);continue;case l.SGML_DECL_QUOTED:E===s.q&&(s.state=l.SGML_DECL,s.q=""),s.sgmlDecl+=E;continue;case l.DOCTYPE:E===">"?(s.state=l.TEXT,C(s,"ondoctype",s.doctype),s.doctype=!0):(s.doctype+=E,E==="["?s.state=l.DOCTYPE_DTD:u(E)&&(s.state=l.DOCTYPE_QUOTED,s.q=E));continue;case l.DOCTYPE_QUOTED:s.doctype+=E,E===s.q&&(s.q="",s.state=l.DOCTYPE);continue;case l.DOCTYPE_DTD:s.doctype+=E,E==="]"?s.state=l.DOCTYPE:u(E)&&(s.state=l.DOCTYPE_DTD_QUOTED,s.q=E);continue;case l.DOCTYPE_DTD_QUOTED:s.doctype+=E,E===s.q&&(s.state=l.DOCTYPE_DTD,s.q="");continue;case l.COMMENT:E==="-"?s.state=l.COMMENT_ENDING:s.comment+=E;continue;case l.COMMENT_ENDING:E==="-"?(s.state=l.COMMENT_ENDED,s.comment=_(s.opt,s.comment),s.comment&&C(s,"oncomment",s.comment),s.comment=""):(s.comment+="-"+E,s.state=l.COMMENT);continue;case l.COMMENT_ENDED:E!==">"?(M(s,"Malformed comment"),s.comment+="--"+E,s.state=l.COMMENT):s.state=l.TEXT;continue;case l.CDATA:E==="]"?s.state=l.CDATA_ENDING:s.cdata+=E;continue;case l.CDATA_ENDING:E==="]"?s.state=l.CDATA_ENDING_2:(s.cdata+="]"+E,s.state=l.CDATA);continue;case l.CDATA_ENDING_2:E===">"?(s.cdata&&C(s,"oncdata",s.cdata),C(s,"onclosecdata"),s.cdata="",s.state=l.TEXT):E==="]"?s.cdata+="]":(s.cdata+="]]"+E,s.state=l.CDATA);continue;case l.PROC_INST:E==="?"?s.state=l.PROC_INST_ENDING:d(E)?s.state=l.PROC_INST_BODY:s.procInstName+=E;continue;case l.PROC_INST_BODY:if(!s.procInstBody&&d(E))continue;E==="?"?s.state=l.PROC_INST_ENDING:s.procInstBody+=E;continue;case l.PROC_INST_ENDING:E===">"?(C(s,"onprocessinginstruction",{name:s.procInstName,body:s.procInstBody}),s.procInstName=s.procInstBody="",s.state=l.TEXT):(s.procInstBody+="?"+E,s.state=l.PROC_INST_BODY);continue;case l.OPEN_TAG:g(A,E)?s.tagName+=E:(Y(s),E===">"?ie(s):E==="/"?s.state=l.OPEN_TAG_SLASH:(d(E)||M(s,"Invalid character in tag name"),s.state=l.ATTRIB));continue;case l.OPEN_TAG_SLASH:E===">"?(ie(s,!0),Ve(s)):(M(s,"Forward-slash in opening tag not followed by >"),s.state=l.ATTRIB);continue;case l.ATTRIB:if(d(E))continue;E===">"?ie(s):E==="/"?s.state=l.OPEN_TAG_SLASH:g(T,E)?(s.attribName=E,s.attribValue="",s.state=l.ATTRIB_NAME):M(s,"Invalid attribute name");continue;case l.ATTRIB_NAME:E==="="?s.state=l.ATTRIB_VALUE:E===">"?(M(s,"Attribute without value"),s.attribValue=s.attribName,Ee(s),ie(s)):d(E)?s.state=l.ATTRIB_NAME_SAW_WHITE:g(A,E)?s.attribName+=E:M(s,"Invalid attribute name");continue;case l.ATTRIB_NAME_SAW_WHITE:if(E==="=")s.state=l.ATTRIB_VALUE;else{if(d(E))continue;M(s,"Attribute without value"),s.tag.attributes[s.attribName]="",s.attribValue="",C(s,"onattribute",{name:s.attribName,value:""}),s.attribName="",E===">"?ie(s):g(T,E)?(s.attribName=E,s.state=l.ATTRIB_NAME):(M(s,"Invalid attribute name"),s.state=l.ATTRIB)}continue;case l.ATTRIB_VALUE:if(d(E))continue;u(E)?(s.q=E,s.state=l.ATTRIB_VALUE_QUOTED):(M(s,"Unquoted attribute value"),s.state=l.ATTRIB_VALUE_UNQUOTED,s.attribValue=E);continue;case l.ATTRIB_VALUE_QUOTED:if(E!==s.q){E==="&"?s.state=l.ATTRIB_VALUE_ENTITY_Q:s.attribValue+=E;continue}Ee(s),s.q="",s.state=l.ATTRIB_VALUE_CLOSED;continue;case l.ATTRIB_VALUE_CLOSED:d(E)?s.state=l.ATTRIB:E===">"?ie(s):E==="/"?s.state=l.OPEN_TAG_SLASH:g(T,E)?(M(s,"No whitespace between attributes"),s.attribName=E,s.attribValue="",s.state=l.ATTRIB_NAME):M(s,"Invalid attribute name");continue;case l.ATTRIB_VALUE_UNQUOTED:if(!c(E)){E==="&"?s.state=l.ATTRIB_VALUE_ENTITY_U:s.attribValue+=E;continue}Ee(s),E===">"?ie(s):s.state=l.ATTRIB;continue;case l.CLOSE_TAG:if(s.tagName)E===">"?Ve(s):g(A,E)?s.tagName+=E:s.script?(s.script+="</"+s.tagName,s.tagName="",s.state=l.SCRIPT):(d(E)||M(s,"Invalid tagname in closing tag"),s.state=l.CLOSE_TAG_SAW_WHITE);else{if(d(E))continue;I(T,E)?s.script?(s.script+="</"+E,s.state=l.SCRIPT):M(s,"Invalid tagname in closing tag."):s.tagName=E}continue;case l.CLOSE_TAG_SAW_WHITE:if(d(E))continue;E===">"?Ve(s):M(s,"Invalid characters in closing tag");continue;case l.TEXT_ENTITY:case l.ATTRIB_VALUE_ENTITY_Q:case l.ATTRIB_VALUE_ENTITY_U:var z,te;switch(s.state){case l.TEXT_ENTITY:z=l.TEXT,te="textNode";break;case l.ATTRIB_VALUE_ENTITY_Q:z=l.ATTRIB_VALUE_QUOTED,te="attribValue";break;case l.ATTRIB_VALUE_ENTITY_U:z=l.ATTRIB_VALUE_UNQUOTED,te="attribValue";break}E===";"?(s[te]+=it(s),s.entity="",s.state=z):g(s.entity.length?x:O,E)?s.entity+=E:(M(s,"Invalid character in entity name"),s[te]+="&"+s.entity+E,s.entity="",s.state=z);continue;default:throw new Error(s,"Unknown state: "+s.state)}return s.position>=s.bufferCheckPosition&&r(s),s}String.fromCodePoint||function(){var h=String.fromCharCode,s=Math.floor,N=function(){var E=16384,j=[],$,z,te=-1,ce=arguments.length;if(!ce)return"";for(var Pe="";++te<ce;){var X=Number(arguments[te]);if(!isFinite(X)||X<0||X>1114111||s(X)!==X)throw RangeError("Invalid code point: "+X);X<=65535?j.push(X):(X-=65536,$=(X>>10)+55296,z=X%1024+56320,j.push($,z)),(te+1===ce||j.length>E)&&(Pe+=h.apply(null,j),j.length=0)}return Pe};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:N,configurable:!0,writable:!0}):String.fromCodePoint=N}()})(typeof Mt>"u"?Mt.sax={}:Mt)});var Wi=F(Zr=>{(function(){"use strict";Zr.stripBOM=function(i){return i[0]==="\uFEFF"?i.substring(1):i}}).call(Zr)});var Jr=F(Fe=>{(function(){"use strict";var i;i=new RegExp(/(?!xmlns)^.*:/),Fe.normalize=function(e){return e.toLowerCase()},Fe.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},Fe.stripPrefix=function(e){return e.replace(i,"")},Fe.parseNumbers=function(e){return isNaN(e)||(e=e%1===0?parseInt(e,10):parseFloat(e)),e},Fe.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e=e.toLowerCase()==="true"),e}}).call(Fe)});var Gi=F(xe=>{(function(){"use strict";var i,e,t,r,n,o,a,p,f,y=function(b,m){return function(){return b.apply(m,arguments)}},D=function(b,m){for(var v in m)P.call(m,v)&&(b[v]=m[v]);function T(){this.constructor=b}return T.prototype=m.prototype,b.prototype=new T,b.__super__=m.prototype,b},P={}.hasOwnProperty;p=$i(),r=require("events"),i=Wi(),a=Jr(),f=require("timers").setImmediate,e=vt().defaults,n=function(b){return typeof b=="object"&&b!=null&&Object.keys(b).length===0},o=function(b,m,v){var T,A,O;for(T=0,A=b.length;T<A;T++)O=b[T],m=O(m,v);return m},t=function(b,m,v){var T;return T=Object.create(null),T.value=v,T.writable=!0,T.enumerable=!0,T.configurable=!0,Object.defineProperty(b,m,T)},xe.Parser=function(b){D(m,b);function m(v){this.parseStringPromise=y(this.parseStringPromise,this),this.parseString=y(this.parseString,this),this.reset=y(this.reset,this),this.assignOrPush=y(this.assignOrPush,this),this.processAsync=y(this.processAsync,this);var T,A,O;if(!(this instanceof xe.Parser))return new xe.Parser(v);this.options={},A=e["0.2"];for(T in A)!P.call(A,T)||(O=A[T],this.options[T]=O);for(T in v)!P.call(v,T)||(O=v[T],this.options[T]=O);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(a.normalize)),this.reset()}return m.prototype.processAsync=function(){var v,T;try{return this.remaining.length<=this.options.chunkSize?(v=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(v),this.saxParser.close()):(v=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(v),f(this.processAsync))}catch(A){if(T=A,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(T)}},m.prototype.assignOrPush=function(v,T,A){return T in v?(v[T]instanceof Array||t(v,T,[v[T]]),v[T].push(A)):this.options.explicitArray?t(v,T,[A]):t(v,T,A)},m.prototype.reset=function(){var v,T,A,O;return this.removeAllListeners(),this.saxParser=p.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(x){return function(d){if(x.saxParser.resume(),!x.saxParser.errThrown)return x.saxParser.errThrown=!0,x.emit("error",d)}}(this),this.saxParser.onend=function(x){return function(){if(!x.saxParser.ended)return x.saxParser.ended=!0,x.emit("end",x.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,O=[],v=this.options.attrkey,T=this.options.charkey,this.saxParser.onopentag=function(x){return function(d){var u,c,g,I,l;if(g={},g[T]="",!x.options.ignoreAttrs){l=d.attributes;for(u in l)!P.call(l,u)||(!(v in g)&&!x.options.mergeAttrs&&(g[v]={}),c=x.options.attrValueProcessors?o(x.options.attrValueProcessors,d.attributes[u],u):d.attributes[u],I=x.options.attrNameProcessors?o(x.options.attrNameProcessors,u):u,x.options.mergeAttrs?x.assignOrPush(g,I,c):t(g[v],I,c))}return g["#name"]=x.options.tagNameProcessors?o(x.options.tagNameProcessors,d.name):d.name,x.options.xmlns&&(g[x.options.xmlnskey]={uri:d.uri,local:d.local}),O.push(g)}}(this),this.saxParser.onclosetag=function(x){return function(){var d,u,c,g,I,l,S,w,C,L;if(l=O.pop(),I=l["#name"],(!x.options.explicitChildren||!x.options.preserveChildrenOrder)&&delete l["#name"],l.cdata===!0&&(d=l.cdata,delete l.cdata),C=O[O.length-1],l[T].match(/^\s*$/)&&!d?(u=l[T],delete l[T]):(x.options.trim&&(l[T]=l[T].trim()),x.options.normalize&&(l[T]=l[T].replace(/\s{2,}/g," ").trim()),l[T]=x.options.valueProcessors?o(x.options.valueProcessors,l[T],I):l[T],Object.keys(l).length===1&&T in l&&!x.EXPLICIT_CHARKEY&&(l=l[T])),n(l)&&(typeof x.options.emptyTag=="function"?l=x.options.emptyTag():l=x.options.emptyTag!==""?x.options.emptyTag:u),x.options.validator!=null&&(L="/"+function(){var _,q,B;for(B=[],_=0,q=O.length;_<q;_++)g=O[_],B.push(g["#name"]);return B}().concat(I).join("/"),function(){var _;try{return l=x.options.validator(L,C&&C[I],l)}catch(q){return _=q,x.emit("error",_)}}()),x.options.explicitChildren&&!x.options.mergeAttrs&&typeof l=="object"){if(!x.options.preserveChildrenOrder)g={},x.options.attrkey in l&&(g[x.options.attrkey]=l[x.options.attrkey],delete l[x.options.attrkey]),!x.options.charsAsChildren&&x.options.charkey in l&&(g[x.options.charkey]=l[x.options.charkey],delete l[x.options.charkey]),Object.getOwnPropertyNames(l).length>0&&(g[x.options.childkey]=l),l=g;else if(C){C[x.options.childkey]=C[x.options.childkey]||[],S={};for(c in l)!P.call(l,c)||t(S,c,l[c]);C[x.options.childkey].push(S),delete l["#name"],Object.keys(l).length===1&&T in l&&!x.EXPLICIT_CHARKEY&&(l=l[T])}}return O.length>0?x.assignOrPush(C,I,l):(x.options.explicitRoot&&(w=l,l={},t(l,I,w)),x.resultObject=l,x.saxParser.ended=!0,x.emit("end",x.resultObject))}}(this),A=function(x){return function(d){var u,c;if(c=O[O.length-1],c)return c[T]+=d,x.options.explicitChildren&&x.options.preserveChildrenOrder&&x.options.charsAsChildren&&(x.options.includeWhiteChars||d.replace(/\\n/g,"").trim()!=="")&&(c[x.options.childkey]=c[x.options.childkey]||[],u={"#name":"__text__"},u[T]=d,x.options.normalize&&(u[T]=u[T].replace(/\s{2,}/g," ").trim()),c[x.options.childkey].push(u)),c}}(this),this.saxParser.ontext=A,this.saxParser.oncdata=function(x){return function(d){var u;if(u=A(d),u)return u.cdata=!0}}(this)},m.prototype.parseString=function(v,T){var A;T!=null&&typeof T=="function"&&(this.on("end",function(O){return this.reset(),T(null,O)}),this.on("error",function(O){return this.reset(),T(O)}));try{return v=v.toString(),v.trim()===""?(this.emit("end",null),!0):(v=i.stripBOM(v),this.options.async?(this.remaining=v,f(this.processAsync),this.saxParser):this.saxParser.write(v).close())}catch(O){if(A=O,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw A}else return this.emit("error",A),this.saxParser.errThrown=!0}},m.prototype.parseStringPromise=function(v){return new Promise(function(T){return function(A,O){return T.parseString(v,function(x,d){return x?O(x):A(d)})}}(this))},m}(r),xe.parseString=function(b,m,v){var T,A,O;return v!=null?(typeof v=="function"&&(T=v),typeof m=="object"&&(A=m)):(typeof m=="function"&&(T=m),A={}),O=new xe.Parser(A),O.parseString(b,T)},xe.parseStringPromise=function(b,m){var v,T;return typeof m=="object"&&(v=m),T=new xe.Parser(v),T.parseStringPromise(b)}}).call(xe)});var zi=F(Ie=>{(function(){"use strict";var i,e,t,r,n=function(a,p){for(var f in p)o.call(p,f)&&(a[f]=p[f]);function y(){this.constructor=a}return y.prototype=p.prototype,a.prototype=new y,a.__super__=p.prototype,a},o={}.hasOwnProperty;e=vt(),i=Hi(),t=Gi(),r=Jr(),Ie.defaults=e.defaults,Ie.processors=r,Ie.ValidationError=function(a){n(p,a);function p(f){this.message=f}return p}(Error),Ie.Builder=i.Builder,Ie.Parser=t.Parser,Ie.parseString=t.parseString,Ie.parseStringPromise=t.parseStringPromise}).call(Ie)});var Ji=F((da,en)=>{"use strict";var Ko=require("net"),$t=class extends Error{constructor(e){super(`${e} is locked`)}},Ge={old:new Set,young:new Set},Qo=1e3*15,Ht,Zi=i=>new Promise((e,t)=>{let r=Ko.createServer();r.unref(),r.on("error",t),r.listen(i,()=>{let{port:n}=r.address();r.close(()=>{e(n)})})}),Zo=function*(i){i&&(yield*i),yield 0};en.exports=async i=>{let e;i&&(e=typeof i.port=="number"?[i.port]:i.port),Ht===void 0&&(Ht=setInterval(()=>{Ge.old=Ge.young,Ge.young=new Set},Qo),Ht.unref&&Ht.unref());for(let t of Zo(e))try{let r=await Zi({...i,port:t});for(;Ge.old.has(r)||Ge.young.has(r);){if(t!==0)throw new $t(t);r=await Zi({...i,port:t})}return Ge.young.add(r),r}catch(r){if(!["EADDRINUSE","EACCES"].includes(r.code)&&!(r instanceof $t))throw r}throw new Error("No available ports found")};en.exports.makeRange=(i,e)=>{if(!Number.isInteger(i)||!Number.isInteger(e))throw new TypeError("`from` and `to` must be integer numbers");if(i<1024||i>65535)throw new RangeError("`from` must be between 1024 and 65535");if(e<1024||e>65536)throw new RangeError("`to` must be between 1024 and 65536");if(e<i)throw new RangeError("`to` must be greater than or equal to `from`");return function*(r,n){for(let o=r;o<=n;o++)yield o}(i,e)}});var ys={};No(ys,{activate:()=>gs});module.exports=Ao(ys);var K=W(require("vscode"));var je=W(require("vscode")),U=class{static getConfig(e){return je.workspace.getConfiguration(this.configPrefix).get(e)}static updateStatusBarItems(e){this.statusBarItem||(this.statusBarItem=je.window.createStatusBarItem(je.StatusBarAlignment.Left)),this.statusBarItem.text=e,this.statusBarItem.show()}static hide(){this.statusBarItem.hide()}};U.configPrefix="ahk++";var ct=W(require("fs")),ut=W(require("vscode"));var cn=W(require("vscode"));var un=i=>i==null?void 0:i.document.getText(i.selection),be=class{static purify(e){return e?e.replace(/;.+/,"").replace(/".*?"/g,'""').replace(/{.*}/g,"").replace(/ +/g," ").replace(/\bgui\b.*/gi,"").replace(/\b(msgbox)\b.+?%/gi,"$1"):""}static join(e,t){if(!(!e||!t))if(Array.isArray(t))for(let r of t)e.push(r);else e.push(t)}static matchAll(e,t){if(!e.global)throw new Error("Only support global regex!");let r=[],n;for(;n=e.exec(t);)r.push(n);return r}},oe=()=>{var i;return((i=cn.window.activeTextEditor)==null?void 0:i.document.languageId)==="ahk"},st=i=>i==="ahk"||i==="ahk2";var ln=W(require("vscode")),de=class{static debug(e){this.log(e,!1)}static log(e,t=!0){e instanceof Error&&(console.trace(e),e=e.message),t&&this.outputChannel.show(t),this.outputChannel.appendLine(`${new Date().toISOString()} ${e}`)}};de.outputChannel=ln.window.createOutputChannel("AHK");var at=class{constructor(e,t,r,n){this.name=e;this.document=t;this.line=r;this.character=n}},Xe=class{constructor(e,t,r,n){this.name=e;this.document=t;this.line=r;this.character=n}};var Ue=class{constructor(e,t,r,n,o,a,p){this.origin=e;this.name=t;this.uriString=r;this.line=n;this.character=o;this.withQuote=a;this.comment=p;this.buildParams(),this.variables=[]}buildParams(){let e=/\s*\((.+?)\)\s*$/;if(this.origin!==this.name){let t=this.origin.match(e);t?(this.params=t[1].split(",").filter(r=>r.trim()).map(r=>{var a;let n=/[^:=* \t]+/,o=r.match(n);return(a=o==null?void 0:o[0])!=null?a:r}),this.full=this.origin.replace(t[1],this.params.join(", "))):(this.params=[],this.full=this.origin)}}pushVariable(e){Array.isArray(e)||(e=[e]);e:for(let t of e){for(let r of this.variables)if(r.name===t.name)continue e;for(let r of this.params)if(r===t.name)continue e;this.variables.push(t)}}};var we=class{static async buildByPath(e){if(!!e){if(ct.statSync(e).isDirectory())ct.readdir(e,(t,r)=>{if(t){de.log(t);return}for(let n of r)n.match(/(^\.|out|target|node_modules)/)||this.buildByPath(e+"/"+n)});else if(e.match(/\b(ahk|ext)$/i)){let t=await ut.workspace.openTextDocument(ut.Uri.file(e));this.buildScript(t)}}}static async buildScript(e,t={}){var v;if(t.usingCache&&this.documentCache.get(e.uri.path))return this.documentCache.get(e.uri.path);let r=(v=t.maximumParseLength)!=null?v:U.getConfig("intellisense.maximumParseLength"),n=r>=0?Math.min(e.lineCount,r):e.lineCount,o=[],a=[],p=[],f=[],y=[],D,P=0,b=!1;for(let T=0;T<n;T++){let A=e.lineAt(T).text;if(A.match(_o)&&(b=!0),A.match(Ro)&&(b=!1),b)continue;let O=we.detectMethodByLine(e,T);if(O)if(O instanceof Ue){o.push(O),a.push(new Xe(O.name,e,T,O.character)),D=O,O.withQuote&&P++;continue}else be.join(a,O);let x=we.getLabelByLine(e,T);if(x){p.push(x);continue}let d=we.getBlockByLine(e,T);d&&y.push(d),A.includes("{")&&P++,A.includes("}")&&(P--,D&&(D.endLine=T));let u=we.detectVariableByLine(e,T);u&&(P===0||!D?this.joinVars(f,u):D.pushVariable(u))}let m={methods:o,labels:p,refs:a,variables:f,blocks:y};return this.documentCache.set(e.uri.path,m),m}static async getMethodByName(e,t){t=t.toLowerCase();for(let r of this.documentCache.get(e.uri.path).methods)if(r.name.toLowerCase()===t)return r;for(let r of this.documentCache.keys())for(let n of this.documentCache.get(r).methods)if(n.name.toLowerCase()===t)return n}static async getAllMethod(){let e=[];for(let t of this.documentCache.keys())for(let r of this.documentCache.get(t).methods)e.push(r);return e}static async getLabelByName(e,t){t=t.toLowerCase();for(let r of this.documentCache.get(e.uri.path).labels)if(r.name.toLowerCase()===t)return r;for(let r of this.documentCache.keys())for(let n of this.documentCache.get(r).labels)if(n.name.toLowerCase()===t)return n}static getAllRefByName(e){let t=[];e=e.toLowerCase();for(let r of this.documentCache.keys()){let n=this.documentCache.get(r);for(let o of n.refs)o.name.toLowerCase()===e&&t.push(o)}return t}static getBlockByLine(e,t){let{text:r}=e.lineAt(t),n=r.match(/;;(.+)/);if(n)return{document:e,line:t,name:n[1],character:r.indexOf(n[1])}}static getLabelByLine(e,t){let r=be.purify(e.lineAt(t).text),n=/^[ \t]*([\u4e00-\u9fa5_a-zA-Z0-9]+) *:{1}(?!(:|=))/.exec(r);if(n){let o=n[1];return o.toLowerCase()==="case"||o.toLowerCase()==="default"?void 0:new at(n[1],e,t,r.indexOf(o))}}static detectVariableByLine(e,t){let r=be.purify(e.lineAt(t).text),n=r.match(we.varDefPattern);if(n){let o=n[1];return{line:t,document:e,isGlobal:!0,method:null,name:o,character:r.indexOf(o)}}else{let o=[],a=be.matchAll(we.varCommandPattern,r.replace(/\(.+?\)/g,""));for(let p=0;p<a.length;p++){if(p===0)continue;let f=a[p][1];this.keywords.includes(f.toLowerCase())||o.push({line:t,document:e,isGlobal:!0,method:null,name:f,character:r.indexOf(a[p][0])})}return o}}static detectMethodByLine(e,t,r){r!=null||(r=e.lineAt(t).text);let n=be.purify(r),o=/\s*(([\u4e00-\u9fa5_a-zA-Z0-9]+)(?<!if|while)\(.*?\))\s*(\{)?\s*/i,a=n.match(o);if(!a)return;let p=a[2],f=r.indexOf(p);if(n.length!==a[0].length){let P=[new Xe(p,e,t,f)],b=this.detectMethodByLine(e,t,r.replace(new RegExp(p+"\\s*\\("),""));return be.join(P,b),P}let y=a[1];if(a[3])return new Ue(y,p,e.uri.toString(),t,f,!0,we.getRemarkByLine(e,t-1));for(let P=t+1;P<e.lineCount;P++){let b=be.purify(e.lineAt(P).text);if(!!b.trim())return b.match(/^\s*{/)?new Ue(y,p,e.uri.toString(),t,f,!1,we.getRemarkByLine(e,t-1)):new Xe(p,e,t,f)}}static getRemarkByLine(e,t){if(t>=0){let{text:r}=e.lineAt(t),n=r.match(/^\s*;\s*(.+)/);if(n)return n[1]}return null}static joinVars(e,t){if(!e||!t)return;Array.isArray(t)||(t=[t]);e:for(let r of t){for(let n of e)if(n.name===r.name)continue e;e.push(r)}}},H=we;H.documentCache=new Map,H.varDefPattern=/[ \t]*(\w+?)\s*([+\-*/.:])?(?<![=!])=(?![=!]).+/,H.varCommandPattern=/(\w+)[ \t,]+/g,H.keywords=["and","or","new","extends","if","loop"];var _o=/ *\/\*/,Ro=/ *\*\//;var hr=require("path"),Z=W(require("vscode"));var Ne=W(require("fs")),ur=W(require("path")),Ce=W(require("vscode"));var $e=class{static init(e){this.storagePath=e.globalStoragePath,Ce.workspace.onDidSaveTextDocument(t=>{H.buildScript(t)})}static check(e){Ne.existsSync(e)||Ne.mkdirSync(e)}static show(e){if(this.storagePath||Ce.window.showErrorMessage("FileManager is not init!"),!e)return;let t=`${this.storagePath}/${e}`;this.check(this.storagePath),this.check(ur.resolve(t,".."));let r=Ce.Uri.file(t);return new Promise(n=>{Ce.workspace.openTextDocument(r).then(async o=>{n(await Ce.window.showTextDocument(o))})})}static record(e,t,r){if(this.storagePath||Ce.window.showErrorMessage("FileManager is not init!"),!!e)return new Promise((n,o)=>{let a=`${this.storagePath}/${e}`;this.check(this.storagePath),this.check(ur.resolve(a,"..")),r===lr.write?Ne.writeFileSync(a,`${t}`,{encoding:"utf8"}):Ne.appendFileSync(a,`${t}`,{encoding:"utf8"}),n(a)})}},lr=(t=>(t[t.write=0]="write",t[t.append=1]="append",t))(lr||{});var pn=W(require("child_process"));var pr=(i,e={})=>new Promise((t,r)=>{pn.exec(i,e,n=>{if(n){de.log(n.message),r(n);return}t(!0)})});var hn=W(require("fs"));var Mo=(i,e,t,r,n,o)=>{if(!i||!e)return"";let a=e.lastIndexOf("."),p=e.substring(0,a<0?e.length:a)+".exe",f=t?"/gui":"",y=r?`/icon "${r}"`:"",D=n?`/bin "${n}"`:"";return`"${i}" ${f} /in "${e}" /out "${p}" ${y} ${D} ${o?"/mpress 1":""}`},me=class{static async runSelection(){let e=un(Z.window.activeTextEditor);if(e===void 0){Z.window.showErrorMessage("No active editor found!");return}this.run(await this.createTemplate(e))}static async startDebugger(e){let t=e?Z.Uri.file(e):Z.window.activeTextEditor.document.uri;e=e||await this.getPathByActive();let r=!!Z.extensions.getExtension("zero-plusplus.vscode-autohotkey-debug"),n=oe()?"file.interpreterPathV1":"file.interpreterPathV2";Z.debug.startDebugging(Z.workspace.getWorkspaceFolder(t),{type:r?"autohotkey":"ahk",request:"launch",name:"AutoHotkey Debugger",runtime:U.getConfig(n),program:e})}static async run(e){let t=U.getConfig(oe()?"file.interpreterPathV1":"file.interpreterPathV2");this.checkAndSaveActive(),e||(e=await this.getPathByActive()),pr(`"${t}" "${e}"`,{cwd:`${(0,hr.resolve)(e,"..")}`})}static async compile(e){let t=Z.window.activeTextEditor.document.uri.fsPath;if(!hn.existsSync(t)){Z.window.showErrorMessage("Cannot compile new files.");return}this.checkAndSaveActive();let r=U.getConfig("file.compilerPath"),n=U.getConfig("compiler.compileIcon"),o=U.getConfig(oe()?"compiler.compileBaseFileV1":"compiler.compileBaseFileV2"),a=U.getConfig("compiler.useMpress"),p=Mo(r,t,e,n,o,a);if(!p){Z.window.showErrorMessage("Cannot build compile command.");return}await pr(p,{cwd:`${(0,hr.resolve)(t,"..")}`})&&!e&&Z.window.showInformationMessage("Compile success!")}static async getPathByActive(){let e=Z.window.activeTextEditor.document;return e.isUntitled?await this.createTemplate(e.getText()):e.fileName}static async createTemplate(e){let t=`temp-${this.getNowDate()}.ahk`;return await $e.record(t,e,0)}static checkAndSaveActive(){Z.window.activeTextEditor.document.isUntitled||Z.commands.executeCommand("workbench.action.files.save")}static getNowDate(){let e=new Date,t=e.getMonth()+1,r=e.getDate();return t<=9&&(t="0"+t),r<=9&&(r="0"+r),e.getFullYear()+"-"+t+"-"+r+"-"+this.pad(e.getHours(),2)+"-"+this.pad(e.getMinutes(),2)+"-"+this.pad(e.getSeconds(),2)}static pad(e,t,r){return r=r||"0",e=e+"",e.length>=t?e:new Array(t-e.length+1).join(r)+e}};var oo=require("vscode"),se=W(Qe());var to=require("events");var Yi=require("events");var Go=require("net"),zo=zi(),kt=class extends Yi.EventEmitter{constructor(t){super();this.port=t;this.header='<?xml version="1.0" encoding="UTF-8"?>';this.parser=new zo.Parser({attrkey:"attr",charsAsChildren:!1,charkey:"content",explicitCharkey:!0,explicitArray:!1})}start(){let r;return this.proxyServer=new Go.Server().listen(this.port).on("connection",n=>{this.ahkConnection=n,n.on("data",o=>{r=r?Buffer.concat([r,o]):o,r[r.length-1]===0&&(this.process(r.toString()),r=null)})}).on("error",n=>{throw de.log(n.message),n}),this}shutdown(){this.ahkConnection&&this.ahkConnection.end(),this.proxyServer&&this.proxyServer.close()}write(t){this.ahkConnection&&this.ahkConnection.write(t)}process(t){t=t.substr(t.indexOf("<?xml")),t.indexOf(this.header)===-1&&(t=this.header+t);for(let r of t.split(this.header)){if(!(r!=null&&r.trim()))continue;let n=this.header+r;this.parser.parseStringPromise(n).then(o=>{for(let a in o)o.hasOwnProperty(a)&&this.emit(a,o[a])}).catch(o=>{de.log(o)})}}};var Ki=require("path"),qt=W(Qe()),Bt=require("fs"),Ft=class{constructor(){this._breakPoints=new Map}loopPoints(e){for(let t of this._breakPoints.keys())for(let r of this._breakPoints.get(t))e(r)}get(e){return this._breakPoints.get(e)}buildBreakPoint(e,t,r){if(!(0,Bt.existsSync)(e))return[];let n=(0,Bt.readFileSync)(e).toString().split(`
`),o=t.map(a=>{let p=new qt.Breakpoint(!1,a.line,a.column,new qt.Source((0,Ki.basename)(e),e)),f=n[a.line];return f&&f.trim().charAt(0)!==";"&&(p.verified=!0),r(p),p});return this._breakPoints.set(e,o),o}};var Vt=class{constructor(e){this.debugServer=e;this.transId=1;this.commandCallback={}}sendCommand(e,t){if(!!this.debugServer)return this.transId++,e+=` -i ${this.transId}`,typeof t=="string"&&(e+=` -- ${Buffer.from(t).toString("base64")}`),e+="\0",this.debugServer.write(`${e}`),new Promise(r=>{this.commandCallback[""+this.transId]=n=>{r(n)}})}callback(e,t){let r=this.commandCallback[e];r&&r(t),this.commandCallback[e]=null}};var Xt=W(Qe()),Qi=require("path"),jt=class{handle(e,t){return t?(Array.isArray(t.stack)?t.stack:Array.of(t.stack)).map((n,o)=>new Xt.StackFrame(o,n.attr.where,new Xt.Source((0,Qi.basename)(n.attr.filename),n.attr.filename),parseInt(n.attr.lineno))):[]}};var qe=W(Qe());var Te=class{static toArray(e){return e?Array.isArray(e)?e:[e]:[]}static atob(e){return e?Buffer.from(e,"base64").toString():null}static btoa(e){return e?Buffer.from(e).toString("base64"):null}};var Ut=class{constructor(){this.variableHandles=new qe.Handles;this.variableMap=new Map}getScopeByRef(e){let t=this.variableHandles.get(e);return typeof t=="string"?t==="Local"?0:1:t.scope}getVarByRef(e){return this.variableHandles.get(e)}getVarByName(e){return this.variableMap.get(e)}obtainValue(e){let t,r=!1,n=e.match(/^(?:()|\"(.*)\"|(true|false)|([+-]?\d+)|([+-]?\d+\.[+-]?\d+)|([\w\d]+))$/is);if(!n)return Promise.reject(new Error(`"${e}" is invalid value.`));let[,o,a,p,f,y,D]=n;return o!==void 0?(t="string",e=""):a!==void 0?(t="string",e=a):p!==void 0?(t="string",e=p.match(/true/i)?"1":"0"):f!==void 0?(t="integer",e=f):y!==void 0?(t="float",e=y):(r=!0,e=D),Promise.resolve({type:t,value:e,isVariable:r})}getArrayValue(e,t,r){let n=this.getVarByRef(e);return Array.isArray(n==null?void 0:n.value)?n.value.slice(t,t+r).map((o,a)=>new qe.Variable(`[${t+a+1}]`,o)):[]}scopes(e){return this.frameId=e,[new qe.Scope("Local",this.variableHandles.create("Local"),!1),new qe.Scope("Global",this.variableHandles.create("Global"),!1)]}getFrameId(){return this.frameId}parsePropertyget(e,t){return this.parse(e.property.content?e:e.property,t)}parse(e,t){return Te.toArray(e.property).map(r=>{try{let{attr:n}=r,o,a;if(this.likeArray(r)){let f=this.getLikeArrayLength(r);o=100<f?f:void 0,a=100<f?1:void 0}let p={scope:t,frameId:t===1?-1:this.frameId,name:r.attr.fullname,value:this.buildVariableValue(r)};return this.variableMap.set(n.name,p),{type:n.type,name:n.name,value:this.formatPropertyValue(r),indexedVariables:o,namedVariables:a,variablesReference:n.type!=="object"?0:this.variableHandles.create(p)}}catch(n){console.log(n);return}})}buildVariableValue(e){let{attr:t,content:r=""}=e;if(["string","integer","float"].includes(t.type)){let n=Te.atob(r);return t.type==="integer"||t.type==="float"?n:`"${n}"`}else if(t.type==="object"){let n=Te.toArray(e.property);return this.likeArray(e)&&t.classname==="Object"?n.map(o=>Te.atob(o.content)):n.reduce((o,a)=>(o[a.attr.fullname]=Te.atob(a.content),o),{})}return`${t.classname}`}formatPropertyValue(e){let{attr:t,content:r=""}=e;if(["string","integer","float"].includes(t.type)){let n=Buffer.from(r,t.encoding).toString();return t.type==="integer"||t.type==="float"?n:`"${n}"`}else if(t.type==="object"&&this.likeArray(e)){let n=t.classname==="Object"?"Array":t.classname,o=this.getLikeArrayLength(e);return`${n}(${o})`}return`${t.classname}`}getLikeArrayLength(e){let t=Te.toArray(e.property);if(t.length===0)return 0;for(let r=t.length-1;r>0;r--){let n=t[r].attr.name.match(/\[([0-9]+)\]/);if(n)return parseInt(n[1])}return 0}likeArray(e){return Te.toArray(e.property).some(t=>t.attr.name.match(/\[[0-9]+\]/))}};var ro=require("child_process"),no=require("path"),io=require("fs");var eo=Ji(),Wt=class extends to.EventEmitter{constructor(){super()}async start(t){var P,b;let r=oe()?"file.interpreterPathV1":"file.interpreterPathV2",n=(P=t.runtime)!=null?P:U.getConfig(r),o=(b=t.dbgpSettings)!=null?b:{},{maxChildren:a,maxData:p}={maxChildren:300,maxData:131072,...o};this.breakPointHandler=new Ft,this.stackHandler=new jt,this.variableHandler=new Ut,this.startArgs=t;let f=await eo({port:eo.makeRange(9e3,9100)});this.debugServer=new kt(f),this.commandHandler=new Vt(this.debugServer),this.debugServer.start().on("init",()=>{this.breakPointHandler.loopPoints(m=>{this.setBreakPonit(m)}),this.sendCommand(`feature_set -n max_children -v ${a}`),this.sendCommand(`feature_set -n max_data -v ${p}`),this.sendCommand("feature_set -n max_depth -v 2"),this.sendCommand("stdout -c 1"),this.sendCommand("stderr -c 1"),this.sendCommand("run")}).on("stream",m=>{this.emit("output",Buffer.from(m.content,"base64").toString())}).on("response",m=>{if(m.attr.command)switch(this.commandHandler.callback(m.attr.transaction_id,m),m.attr.command){case"run":case"step_into":case"step_over":case"step_out":this.processRunResponse(m);break;case"stop":this.end();break}}),t.program||(t.program=await me.getPathByActive());let y=Jo(t.program);if(!(0,io.existsSync)(n)){de.log(`AutoHotkey execute bin not found: ${n}`),this.end();return}(0,ro.spawn)(n,["/ErrorStdOut",`/debug=localhost:${f}`,y],{cwd:`${(0,no.resolve)(t.program,"..")}`}).stderr.on("data",m=>{this.emit("output",m.toString("utf8")),this.end()})}async restart(){this.sendCommand("stop"),this.end(),me.startDebugger(this.startArgs.program)}sendCommand(t,r){return this.commandHandler?this.commandHandler.sendCommand(t,r):null}stop(){this.sendCommand("stop"),this.debugServer.shutdown()}end(){this.emit("end"),this.debugServer.shutdown()}scopes(t){return this.variableHandler.scopes(t)}async listVariables(t){var p;if(t.filter==="named")return[];if(t.filter==="indexed")return this.variableHandler.getArrayValue(t.variablesReference,t.start,t.count);let r=this.variableHandler.getScopeByRef(t.variablesReference),n=this.variableHandler.getFrameId(),o=(p=this.variableHandler.getVarByRef(t.variablesReference))==null?void 0:p.name;if(o)return this.getVariable(n,r,o);let a=await this.sendCommand(`context_get -d ${n} -c ${r}`);return this.variableHandler.parse(a,r)}async getVariableByEval(t){let r=this.variableHandler.getFrameId(),n=await this.getVariable(r,0,t);if(n.length===0)return null;if(n.length===1)return n[0].value;{let o=this.variableHandler.getVarByName(t);return JSON.stringify(o.value)}}async getVariable(t,r,n){let o=await this.sendCommand(`property_get -d ${t} -c ${r} -n ${n}`);return this.variableHandler.parsePropertyget(o,r)}async setVariable(t){return this.variableHandler.obtainValue(t.value).then(async({type:r,value:n,isVariable:o})=>{var m;let a=this.variableHandler.getFrameId(),p=this.variableHandler.getScopeByRef(t.variablesReference);if(o){let v=(await this.getVariable(a,p,n))[0];if(!v)throw new Error(`variable ${t.value} not found!`);n=v.value,n.match(/^"|"$/g)&&(r="string",n=n.replace(/^"|"$/g,""))}let f=(m=this.variableHandler.getVarByRef(t.variablesReference))==null?void 0:m.name,y=t.name;f&&(y=y.includes("[")&&y.includes("]")?`${f}${y}`:`${f}.${y}`);let D=await this.sendCommand(`property_set -d ${a} -c ${p} -n ${y} -t ${r}`,n);if(!parseInt(D.attr.success))throw new Error(`"${y}" cannot be written. Probably read-only.`);let P=r==="string"?`"${n}"`:n,b=0;return{name:t.name,value:P,type:r,variablesReference:b}})}async stack(t){let r=await this.sendCommand("stack_get");return this.stackHandler.handle(t,r)}async setBreakPonit(t){if(this.debugServer&&t.verified){let r=await this.sendCommand(`breakpoint_set -t line -f ${t.source.path} -n ${t.line}`);t.id=r.attr.id}}buildBreakPoint(t,r){return this.clearBreakpoints(t),this.breakPointHandler.buildBreakPoint(t,r,n=>{this.setBreakPonit(n)})}clearBreakpoints(t){let r;if(this.debugServer&&(r=this.breakPointHandler.get(t)))for(let n of r)this.sendCommand(`breakpoint_remove -d ${n.id}`)}processRunResponse(t){switch(t.attr.status){case"break":this.emit("break",t.attr.command);break;case"stopping":case"stopped":this.end();break}}},Jo=i=>{let e=i.split("\\");return e[e.length-1]};var Gt=class extends se.LoggingDebugSession{constructor(){super("ahk-debug.txt");this.setDebuggerLinesStartAt1(!1),this.setDebuggerColumnsStartAt1(!1),this.dispatcher=new Wt,this.dispatcher.on("break",t=>{this.sendEvent(new se.StoppedEvent(t,Gt.threadId))}).on("breakpointValidated",t=>{this.sendEvent(new se.BreakpointEvent("changed",{verified:t.verified,id:t.id}))}).on("output",t=>{this.sendEvent(new se.OutputEvent(`${t}
`)),oo.commands.executeCommand("workbench.debug.action.focusRepl")}).on("end",()=>{this.sendEvent(new se.TerminatedEvent)})}initializeRequest(t,r){t.body={...t.body,completionTriggerCharacters:[".","["],supportsConfigurationDoneRequest:!1,supportsEvaluateForHovers:!0,supportsStepBack:!1,supportsDataBreakpoints:!1,supportsCompletionsRequest:!0,supportsCancelRequest:!0,supportsRestartRequest:!0,supportsBreakpointLocationsRequest:!1,supportsSetVariable:!0},this.sendResponse(t),this.sendEvent(new se.InitializedEvent)}restartRequest(t,r,n){this.dispatcher.restart(),this.sendResponse(t)}async launchRequest(t,r){this.dispatcher.start(r),this.sendResponse(t)}disconnectRequest(t,r,n){this.dispatcher.stop(),this.sendResponse(t)}async setBreakPointsRequest(t,r){t.body={breakpoints:this.dispatcher.buildBreakPoint(r.source.path,r.breakpoints)},this.sendResponse(t)}async stackTraceRequest(t,r){t.body={stackFrames:await this.dispatcher.stack(r)},this.sendResponse(t)}scopesRequest(t,r){t.body={scopes:this.dispatcher.scopes(r.frameId)},this.sendResponse(t)}async variablesRequest(t,r,n){t.body={variables:await this.dispatcher.listVariables(r)},this.sendResponse(t)}async setVariableRequest(t,r,n){try{t.body=await this.dispatcher.setVariable(r),this.sendResponse(t)}catch(o){this.sendErrorResponse(t,{id:r.variablesReference,format:o.message})}}pauseRequest(t,r,n){this.dispatcher.sendCommand("break"),this.sendResponse(t)}continueRequest(t,r){this.dispatcher.sendCommand("run"),this.sendResponse(t)}nextRequest(t,r){this.dispatcher.sendCommand("step_over"),this.sendResponse(t)}stepInRequest(t,r,n){this.dispatcher.sendCommand("step_into"),this.sendResponse(t)}stepOutRequest(t,r,n){this.dispatcher.sendCommand("step_out"),this.sendResponse(t)}threadsRequest(t){t.body={threads:[new se.Thread(Gt.threadId,"main thread")]},this.sendResponse(t)}async completionsRequest(t,r){t.body={targets:[...await this.dispatcher.listVariables({variablesReference:1e3}),...await this.dispatcher.listVariables({variablesReference:1001})].map(n=>({type:"variable",label:n.name,sortText:n.name}))},this.sendResponse(t)}async evaluateRequest(t,r){let n=r.expression.split("="),o;n.length===1?o=await this.dispatcher.getVariableByEval(r.expression):(this.dispatcher.setVariable({name:n[0],value:n[1],variablesReference:1e3}),o=`execute: ${r.expression}`),t.body={result:o||"null",variablesReference:0},this.sendResponse(t)}},et=Gt;et.threadId=1;var J=W(require("vscode"));var so=require("fs"),zt=class{async provideDefinition(e,t,r){let n=await this.tryGetFileLink(e,t);if(n)return n;let o=e.getText(e.getWordRangeAtPosition(t));if(new RegExp(o+"\\s*\\(.*?\\)").test(e.lineAt(t.line).text)){let f=await H.getMethodByName(e,o);if(f)return new J.Location(J.Uri.parse(f.uriString),new J.Position(f.line,f.character))}let a=await H.getLabelByName(e,o);if(a){let f=a.document;return new J.Location(f.uri,new J.Position(a.line,a.character))}let p=await H.buildScript(e,{usingCache:!0});for(let f of p.methods)if(t.line>=f.line&&t.line<=f.endLine){for(let y of f.variables)if(y.name===o)return new J.Location(e.uri,new J.Position(y.line,y.character));for(let y of f.params)if(y===o)return new J.Location(e.uri,new J.Position(f.line,f.character+f.origin.indexOf(y)))}for(let f of p.variables)if(f.name===o)return new J.Location(e.uri,new J.Position(f.line,f.character));return null}async tryGetFileLink(e,t,r){let{text:n}=e.lineAt(t.line),o=n.match(/(?<=#include).+?\.(ahk|ext)\b/i);if(!o)return;let a=r||e.uri.path.substr(0,e.uri.path.lastIndexOf("/")),p=J.Uri.file(o[0].trim().replace(/(%A_ScriptDir%|%A_WorkingDir%)/,a).replace(/(%A_LineFile%)/,e.uri.path));return(0,so.existsSync)(p.fsPath)?new J.Location(p,new J.Position(0,0)):r?this.tryGetFileLink(e,t,J.workspace.rootPath):void 0}};var Yt=W(require("vscode")),ao=()=>Yt.window.onDidChangeActiveTextEditor(i=>{if(i&&st(i.document.languageId)&&i.document.getText()===""){let e=oe()?"file.templateSnippetNameV1":"file.templateSnippetNameV2",t=U.getConfig(e);if(t==="")return;Yt.commands.executeCommand("editor.action.insertSnippet",{name:t})}});var nt=require("util"),Jt=W(require("vscode"));var tt=/(?<=^|\s+);.*/;var co=i=>new Array(i.lineCount).fill(0).map((e,t)=>i.lineAt(t).text).join(`
`);function uo(i,e){return e.insertSpaces?" ".repeat(i*e.tabSize):"	".repeat(i)}function lo(i,e,t){return t||e!=null&&e.trim()?i+e:e}function Be(i,e,t,r,n){let o=uo(r,n),a=lo(o,t,n.preserveIndent);return i!==e-1&&(a+=`
`),a}function Kt(i){if(!i)return"";let e=["autotrim","blockinput","click","clipwait","control","controlclick","controlfocus","controlget","controlgetfocus","controlgetpos","controlgettext","controlmove","controlsend","controlsendraw","controlsettext","coordmode","critical","detecthiddentext","detecthiddenwindows","drive","driveget","drivespacefree","edit","envadd","envdiv","envget","envmult","envset","envsub","envupdate","exit","exitapp","fileappend","filecopy","filecopydir","filecreatedir","filecreateshortcut","filedelete","fileencoding","filegetattrib","filegetshortcut","filegetsize","filegettime","filegetversion","fileinstall","filemove","filemovedir","fileread","filereadline","filerecycle","filerecycleempty","fileremovedir","fileselectfile","fileselectfolder","filesetattrib","filesettime","formattime","getkeystate","groupactivate","groupadd","groupclose","groupdeactivate","gui","guicontrol","guicontrolget","hotkey","imagesearch","inidelete","iniread","iniwrite","input","inputbox","keyhistory","keywait","listhotkeys","listlines","listvars","menu","mouseclick","mouseclickdrag","mousegetpos","mousemove","msgbox","onexit","outputdebug","pause","pixelgetcolor","pixelsearch","postmessage","process","progress","random","regdelete","regread","regwrite","reload","run","runas","runwait","send","sendevent","sendinput","sendlevel","sendmessage","sendmode","sendplay","sendraw","setbatchlines","setcapslockstate","setcontroldelay","setdefaultmousespeed","setenv","setformat","setkeydelay","setmousedelay","setnumlockstate","setregview","setscrolllockstate","setstorecapslockmode","settimer","settitlematchmode","setwindelay","setworkingdir","shutdown","sleep","sort","soundbeep","soundget","soundgetwavevolume","soundplay","soundset","soundsetwavevolume","splashimage","splashtextoff","splashtexton","splitpath","statusbargettext","statusbarwait","stringcasesense","stringgetpos","stringleft","stringlen","stringlower","stringmid","stringreplace","stringright","stringsplit","stringtrimleft","stringtrimright","stringupper","suspend","sysget","thread","tooltip","transform","traytip","urldownloadtofile","winactivate","winactivatebottom","winclose","winget","wingetactivestats","wingetactivetitle","wingetclass","wingetpos","wingettext","wingettitle","winhide","winkill","winmaximize","winmenuselectitem","winminimize","winminimizeall","winminimizeallundo","winmove","winrestore","winset","winsettitle","winshow","winwait","winwaitactive","winwaitclose","winwaitnotactive"],t=i;for(let n of e){let o="(^\\s*"+n+"\\b(?!\\()).*",a=new RegExp(o,"i");if(i.search(a)!==-1){t=i.replace(a,"$1");break}}let r=t.replace(/".*?"/g,'""');return r=go(r,/{[^{}]*}/g,""),r=r.replace(/\s+/g," ").replace(tt,"").trim(),r}function rt(i){let e=["ifexist","ifinstring","ifmsgbox","ifnotexist","ifnotinstring","ifwinactive","ifwinexist","ifwinnotactive","ifwinnotexist","if","else","loop","for","while","catch"];for(let t of e)if(i.match("^}?\\s*"+t+"\\b(?!:)"))return!0;return!1}function po(i,e){if(e===-1)return i;let t=new RegExp(`\\n(\\s*?\\n){${e},}`,"g");return i.replace(t,`
`+"$1".repeat(e)).replace(/^\s*\n+/,"")}function ho(i,e){return e?i.replace(/ {2,}/g," "):i}function Qt(i,e){var n,o;let t=new RegExp(e,"g");return(o=(n=go(i,/{[^{}]*}/g,"").match(t))==null?void 0:n.length)!=null?o:0}function fo(i){let e=Math.max(...i.map(r=>mo(r).indexOf("=")));return i.map(r=>es(r,e))}function mo(i){return i.replace(/(?<!`);.+/,"").replace(/(?<=\S) {2,}(?=\S)/g," ").replace(/\s?(?=:?=)/," ").replace(/(?<=:?=)\s?/," ")}function es(i,e){var n,o;let t=(o=(n=/;.+/.exec(i))==null?void 0:n[0])!=null?o:"";i=mo(i);let r=i.indexOf("=");return i.replace(/\s(?=:?=)/," ".repeat(e-r+1)).concat(t).trimEnd()}function go(i,e,t){for(;;){let r=i.length;if(i=i.replace(e,t),r===i.length)break}return i}var Se=class{constructor(e){this.depth=e!=null?e:[-1]}enterBlockOfCode(e){for(let t=e;t>0;t--)this.depth.push(-1);return this.depth}exitBlockOfCode(e){for(let t=e;t>0;t--)this.depth.splice(this.depth.lastIndexOf(-1));return this.restoreEmptyDepth(),this.depth}last(){return this.depth[this.depth.length-1]}push(e){return this.depth.push(e)}pop(){let e=this.depth.pop();return this.restoreEmptyDepth(),e}restoreDepth(){let e=this.depth.lastIndexOf(-1)+1,t=this.depth[e];return this.depth.splice(e),t}restoreEmptyDepth(){this.depth.length===0&&(this.depth=[-1])}};function yo(i,e){let t=0,r=0,n=i.split(`
`);for(let o=n.length-1;o>=0;o--){let a=n[o];if(Kt(a)===""){let f=uo(r,e);n[o]=lo(f,a.trim(),e.preserveIndent)}else{if(t=ts(a,e),a.match(/^\s*}/)){let f=Qt(Kt(a),"}");t+=f}r=t}}return n.join(`
`)}function ts(i,e){var n;let t=i.match(/^\s+/),r=(n=t==null?void 0:t[0].length)!=null?n:0;return e.insertSpaces?r/e.tabSize:r}function rs(i){let e=i.lineCount-1;return new Jt.Range(0,0,e,i.lineAt(e).text.length)}var ns=(i,e)=>{let t="",r=0,n=0,o=0,a=!1,p=!1,f=!0,y=new Se,D=new Se,P=!1,b=[],m=!1,v=!1,T=!1,A=!1,O=!1,x=-1,d=!1,u="",c=!1,g=0,I=0,l=0,S=!1,w=new Se,C=new Se,L=e.indentCodeAfterLabel,_=e.indentCodeAfterIfDirective,q=e.trimExtraSpaces,B=/;\s*@AHK\+\+AlignAssignmentOn/i,M=/;\s*@AHK\+\+AlignAssignmentOff/i,Y=/;\s*@AHK\+\+FormatBlockCommentOn/i,V=/;\s*@AHK\+\+FormatBlockCommentOff/i,Ee=/^(((and|or|not)\b)|[\^!~?:&<>=.,|]|\+(?!\+)|-(?!-)|\/(?!\*)|\*(?!\/))/,ie=/^[^\s\t,`]+(?<!:):$/,Ve=/^.+::$/,it="#(ifwinactive|ifwinnotactive|ifwinexist|ifwinnotexist|if)",ze=/^(case\s*.+?:|default:)\s*.*/,fe=i.split(`
`);return fe.forEach((ae,h)=>{var te,ce,Pe;let s=Kt(ae).toLowerCase(),N=(ce=(te=tt.exec(ae))==null?void 0:te[0])!=null?ce:"",E=ae.replace(tt,"");E=ho(E,q).concat(N).trim();let j=s==="";f=!0;let $=Qt(s,"{"),z=Qt(s,"}");if(j&&(P&&N.match(M)&&(P=!1,b=fo(b),b.forEach((X,re)=>{t+=Be(h-b.length+re+1,fe.length,X,r,e)}),b=[]),c&&N.match(V)&&(c=!1)),P){if(b.push(E),h!==fe.length-1)return;b.forEach((X,re)=>{t+=Be(h-b.length+re+1,fe.length,X,r,e)}),b=[]}if(!d&&ae.match(/^\s*\/\*/)&&(d=!0,u=(Pe=ae.match(/(^\s*)\/\*/))==null?void 0:Pe[1],c&&(g=r,I=o,l=n,S=a,w=y,C=D,o=r,n=r,a=!1,y=new Se,D=new Se)),d){if(!c){let X="";ae.startsWith(u)?X=ae.substring(u.length):X=ae,t+=Be(h,fe.length,X.trimEnd(),r,e)}if(ae.match(/^\s*\*\//)&&(d=!1,c&&(r=g,o=I,n=l,a=S,y=w,D=C)),!c)return}if(j&&!N.match(B)&&!N.match(M)&&!N.match(Y)&&!N.match(V)){t+=Be(h,fe.length,E,0,e);return}if(s.match(/^\((?!::)(?!.*\bltrim\b)/)&&(T=!0),T){t+=ae.trimEnd()+`
`,s.match(/^\)/)&&(T=!1);return}if(v&&s.match(/^\)/)&&(v=!1,r--),v){t+=Be(h,fe.length,ae.trim(),r,e);return}if(s.match(Ee)&&!s.match(/::/)&&(m=!0,A&&(r--,x=n),a&&(O=!0,a=!1,p=!1,r--),p&&(a=!0,r++),r++),O&&!m&&(O=!1,a=!0,r++),z&&(D.last()>-1&&(r=D.last()),y.exitBlockOfCode(z),D.exitBlockOfCode(z),m||(r-=z)),$&&(a||O)&&!rt(s)&&(O?O=!1:s.match(/^{/)&&(a=!1,r-=$),r===D.last()&&D.pop()),(y.last()>-1||D.last()>-1)&&!m&&!a&&(!d||c)){if(s.match(/^}? ?else\b(?!:)/))r=y.pop();else if(!s.match(/^{/)&&!s.match(/^}/)){let X=y.restoreDepth(),re=D.restoreDepth();X!==void 0&&re!==void 0?r=Math.min(X,re):r=X!=null?X:re}}s.match("^"+it+"\\b")&&(o>0?r-=o:r--),s.match(/^(return|exit|exitapp)\b/)&&o===r&&(o=0,r--),(s.match(ze)||(s.match(ie)||s.match(Ve))&&L&&o===r)&&r--,r<0&&(r=0),g<0&&(g=0),n=r,t+=Be(h,fe.length,E,r,e),j&&(N.match(B)?P=!0:N.match(Y)&&(c=!0)),a&&(!d||c)?(a=!1,p=!0,rt(s)||r--):p=!1,rt(s)&&$===0&&D.last()===-1&&D.push(r),s.match(/^(}? ?else )?if\b(?!:)/)&&y.push(r),$?(r+=$,f=!1,m?A=!1:A=!0,y.enterBlockOfCode($),D.enterBlockOfCode($)):A=!1,s.match("^"+it+"\\b.+")&&_&&r++,s.match(ze)?r++:(s.match(ie)||s.match(Ve))&&L&&(r++,o=r),m&&(m=!1,z&&(r-=z,x===r&&(x=-1,r++)),r--),s.match(/^\((?!::)(?=.*\bltrim\b)/)&&(v=!0,r++),f&&rt(s)&&(a=!0,r++),h===fe.length-1&&!((0,nt.isDeepStrictEqual)(y.depth,[-1])||(0,nt.isDeepStrictEqual)(y.depth,[-1,0]))&&!((0,nt.isDeepStrictEqual)(D.depth,[-1])||(0,nt.isDeepStrictEqual)(D.depth,[-1,0]))&&(console.error("Internal formatter data:"),console.log(" ifDepth:"),console.log(y.depth),console.log("occDepth:"),console.log(D.depth))}),t=yo(t,e),t=po(t,e.allowedNumberOfEmptyLines),t},Zt=class{provideDocumentFormattingEdits(e,t,r){let n=co(e),o=U.getConfig("formatter.allowedNumberOfEmptyLines"),a=U.getConfig("formatter.indentCodeAfterLabel"),p=U.getConfig("formatter.indentCodeAfterIfDirective"),f=U.getConfig("formatter.preserveIndent"),y=U.getConfig("formatter.trimExtraSpaces"),D=ns(n,{...t,allowedNumberOfEmptyLines:o,indentCodeAfterLabel:a,indentCodeAfterIfDirective:p,preserveIndent:f,trimExtraSpaces:y});return[new Jt.TextEdit(rs(e),D)]}};var ee=W(require("vscode"));var er=class{async provideDocumentSymbols(e,t){let r=[],n=await H.buildScript(e);for(let o of n.methods)r.push(new ee.SymbolInformation(o.full,ee.SymbolKind.Method,o.comment,new ee.Location(ee.Uri.parse(o.uriString),new ee.Position(o.line,o.character))));for(let o of n.labels)r.push(new ee.SymbolInformation(o.name,ee.SymbolKind.Field,null,new ee.Location(o.document.uri,new ee.Position(o.line,o.character))));for(let o of n.blocks)r.push(new ee.SymbolInformation(o.name,ee.SymbolKind.Module,null,new ee.Location(o.document.uri,new ee.Position(o.line,o.character))));return r}};var bo=require("fs"),wo=require("path"),Oe=require("vscode");var tr=class{constructor(e){this.initSnippetCache(e)}async provideHover(e,t,r){let n=this.buildContext(e,t);if(!n)return null;let o=this.tryGetSnippetHover(n);if(o)return o;let a=await H.getMethodByName(e,n.word);if(a){let p=new Oe.MarkdownString("",!0).appendCodeblock(a.full);return a.comment&&p.appendText(a.comment),new Oe.Hover(p)}return null}tryGetSnippetHover(e){let t=e.word.toLowerCase();e.charAfter==="("&&(t+="()");let r=this.snippetCache.get(t);if(!r)return;let n=new Oe.MarkdownString("",!0).appendCodeblock(r.body,"ahk");return r.description&&n.appendText(r.description),new Oe.Hover(n)}buildContext(e,t){let r=t.line,n=e.getWordRangeAtPosition(t);if(!n)return;let o=e.getText(n);n.start.character>0&&e.getText(new Oe.Range(r,n.start.character-1,r,n.start.character))==="#"&&(o="#"+o);let a=e.getText(new Oe.Range(r,n.end.character,r,n.end.character+1));return{word:o,charAfter:a}}initSnippetCache(e){var r;let t=JSON.parse((0,bo.readFileSync)((0,wo.join)(e.extensionPath,"language","snippetsV1.json"),"utf8"));this.snippetCache=new Map;for(let n in t){let o=t[n];typeof o.body=="string"&&(o.body=(r=o.body)==null?void 0:r.replace(/\d{1}:/g,"")),this.snippetCache.set(n.toLowerCase(),o)}}};var nr=W(require("vscode"));var rr=class{provideReferences(e,t,r,n){let o=e.getText(e.getWordRangeAtPosition(t)),a=[],p=H.getAllRefByName(o);for(let f of p)a.push(new nr.Location(f.document.uri,new nr.Position(f.line,f.character)));return a}};var ye=W(require("vscode"));var ir=class{async provideRenameEdits(e,t,r,n){for(let f of ye.workspace.textDocuments)H.buildScript(f);let o=e.getText(e.getWordRangeAtPosition(t)),a=H.getAllRefByName(o),p=new ye.WorkspaceEdit;for(let f of a){if(f.document.uri.scheme!=="file")continue;let y=[];y.push(new ye.TextEdit(new ye.Range(new ye.Position(f.line,f.character),new ye.Position(f.line,f.character+o.length)),r)),console.debug(`url:${f.document.uri},line:${f.line},character:${f.character}`),p.set(f.document.uri,y)}return p}async prepareRename(e,t,r){let n=e.getWordRangeAtPosition(t),o=e.getText(n);if(await H.getMethodByName(e,o))return n;throw new Error("You cannot rename this element.")}};var vo=W(require("vscode"));var or=class{async provideSignatureHelp(e,t,r,n){let o,a=e.lineAt(t.line).text,p=0;for(let D=t.character-1;D>0;D--){let P=a.charAt(D);if(P==="("){o=new vo.Position(t.line,D);break}P===","&&p++}let f=e.getText(e.getWordRangeAtPosition(o)),y=await H.getMethodByName(e,f);return y?{activeSignature:0,signatures:[{label:y.origin,parameters:y.params.map(D=>({label:D}))}],activeParameter:p}:null}};var De=W(require("vscode"));var To=require("vscode"),is=i=>{let e=new De.CompletionItem(i.params.length===0?i.name:i.full,De.CompletionItemKind.Method);return e.insertText=i.params.length?new To.SnippetString(`${i.name}($1)`):`${i.name}()`,e.detail=i.comment,e},os=(i,e,t)=>i.uriString===e&&i.line<=t&&t<=i.endLine,ss=i=>i.params.concat(i.variables).map(e=>new De.CompletionItem(e,De.CompletionItemKind.Variable)),as=(i,e,t)=>{let r=[is(i)];return os(i,e,t)&&r.push(...ss(i)),r},cs=i=>new De.CompletionItem(i,De.CompletionItemKind.Variable),us=(i,e,t,r)=>i.map(n=>as(n,e,t)).reduce((n,o)=>n.concat(o),[]).concat(r.map(cs)),sr=class{async provideCompletionItems(e,t){if(e.getText(new De.Range(t.translate(0,-1),t))===".")return[];let n=await H.getAllMethod(),o=await H.buildScript(e,{usingCache:!0});return us(n.map(a=>({...a,variables:a.variables.map(p=>p.name)})),e.uri.toString(),t.line,o.variables.map(a=>a.name))}};var tn=require("fs"),ar=W(require("vscode")),rn=W(require("child_process"));var ls=(i,e)=>{let t=i.getText(e).trim();if(t)return t;let r=i.getText(i.getWordRangeAtPosition(e.active));return r.includes(`
`)?"":r},ps=(i,e)=>`
SetWinDelay 10
SetKeyDelay 0
searchText := "${i}"
IfWinNotExist, AutoHotkey Help
{
    Run ${e}
    WinWait AutoHotkey Help
}
WinActivate
WinWaitActive
StringReplace, searchText, searchText, #, {#}
Send, !s
Sleep 200
Send {home}
Sleep 10
Send +{end}%searchText%{enter}
ExitApp
`,hs=(i,e)=>`
SetWinDelay(10)
SetKeyDelay(0)
searchText := "${i}"
if (not WinExist("AutoHotkey v2 Help", ""))
{
    Run "${e}"
    WinWait "AutoHotkey v2 Help"
}
WinActivate
WinWaitActive
StrReplace(searchText, "#", "{#}")
Send "!s"
Sleep 200
Send "{home}"
Sleep 10
Send "+{end}" searchText "{enter}"
ExitApp()
`;async function Do(){let i=ar.window.activeTextEditor;if(!i)return;let e=ls(i.document,i.selection),t=oe()?U.getConfig("file.helpPathV1"):U.getConfig("file.helpPathV2"),r=U.getConfig(oe()?"file.interpreterPathV1":"file.interpreterPathV2"),n=oe()?ps:hs;if(!(0,tn.existsSync)(t)){ar.window.showErrorMessage(`Help path "${t}" does not exist`);return}if(!(0,tn.existsSync)(r)){ar.window.showErrorMessage(`Interpreter path "${r}" does not exist`);return}try{rn.execSync(`"${r}" /ErrorStdOut *`,{input:n(e,t)})}catch{rn.execSync(`"${r}" /ErrorStdOut *`,{input:n("",t)})}}var he=W(require("vscode"));var fs=i=>{let t=i.getText(new he.Range(0,0,50,0)),r=/^[ \t]*#Requires[ \t]+AutoHotkey[ \t]v?(1|2)\b/im,n=t.match(r);return n?Number.parseInt(n[1]):void 0},ds=i=>e=>{if(!e||!st(e.languageId)||i.has(e.uri))return;i.add(e.uri);let t=fs(e),r=["ahk","ahk2"][t-1],n=e.languageId;r&&r!==n&&ms(e,r)},ms=(i,e)=>{he.languages.setTextDocumentLanguage(i,e).then(t=>{let r=oe()?"v1":"v2";he.window.showInformationMessage(`Found '#Requires ${r}'. Switched to AutoHotkey ${r}.`)},t=>{he.window.showErrorMessage(`Failed to switch to ${e}:
${t.message}`)})},Eo=i=>{let e=ds(new Set);he.window.onDidChangeActiveTextEditor(t=>e(t==null?void 0:t.document),null,i.subscriptions),he.window.tabGroups.all.forEach(t=>t.tabs.filter(r=>r.input instanceof he.TabInputText).forEach(async r=>{let n=await he.workspace.openTextDocument(r.input.uri);e(n)}))};function gs(i){(async()=>(U.updateStatusBarItems("Indexing AutoHotkey Workspace..."),await H.buildByPath(K.workspace.rootPath),U.updateStatusBarItems("Index Workspace Success!"),U.hide()))();let e={language:"ahk"};$e.init(i),Eo(i),i.subscriptions.push(K.languages.registerHoverProvider(e,new tr(i)),K.languages.registerDefinitionProvider(e,new zt),K.languages.registerRenameProvider(e,new ir),K.languages.registerSignatureHelpProvider(e,new or,"(",","),K.languages.registerDocumentSymbolProvider(e,new er),K.languages.registerDocumentFormattingEditProvider(e,new Zt),K.languages.registerReferenceProvider(e,new rr),K.debug.registerDebugAdapterDescriptorFactory("ahk",new nn),ao(),K.commands.registerCommand("ahk++.compile",()=>me.compile(!1)),K.commands.registerCommand("ahk++.compilerGui",()=>me.compile(!0)),K.commands.registerCommand("ahk++.debug",()=>me.startDebugger()),K.commands.registerCommand("ahk++.openHelp",Do),K.commands.registerCommand("ahk++.run",()=>me.run()),K.commands.registerCommand("ahk++.runSelection",()=>me.runSelection())),U.getConfig("intellisense.enableIntellisense")&&i.subscriptions.push(K.languages.registerCompletionItemProvider(e,new sr,"."))}var nn=class{createDebugAdapterDescriptor(e){return new K.DebugAdapterInlineImplementation(new et)}};0&&(module.exports={activate});
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */
