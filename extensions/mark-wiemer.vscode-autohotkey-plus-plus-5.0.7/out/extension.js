"use strict";var Co=Object.create;var st=Object.defineProperty;var xo=Object.getOwnPropertyDescriptor;var Io=Object.getOwnPropertyNames;var So=Object.getPrototypeOf,Oo=Object.prototype.hasOwnProperty;var F=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),No=(i,e)=>{for(var t in e)st(i,t,{get:e[t],enumerable:!0})},cn=(i,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Io(e))!Oo.call(i,n)&&n!==t&&st(i,n,{get:()=>e[n],enumerable:!(r=xo(e,n))||r.enumerable});return i};var H=(i,e,t)=>(t=i!=null?Co(So(i)):{},cn(e||!i||!i.__esModule?st(t,"default",{value:i,enumerable:!0}):t,i)),Ao=i=>cn(st({},"__esModule",{value:!0}),i);var pt=F(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.Event=Ae.Response=Ae.Message=void 0;var Ke=class{constructor(e){this.seq=0,this.type=e}};Ae.Message=Ke;var dr=class extends Ke{constructor(e,t){super("response"),this.request_seq=e.seq,this.command=e.command,t?(this.success=!1,this.message=t):this.success=!0}};Ae.Response=dr;var mr=class extends Ke{constructor(e,t){super("event"),this.event=e,t&&(this.body=t)}};Ae.Event=mr});var dn=F(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.ProtocolServer=void 0;var ko=require("events"),Qe=pt(),gr=class{get event(){return this._event||(this._event=(e,t)=>{this._listener=e,this._this=t;let r;return r={dispose:()=>{this._listener=void 0,this._this=void 0}},r}),this._event}fire(e){if(this._listener)try{this._listener.call(this._this,e)}catch{}}hasListener(){return!!this._listener}dispose(){this._listener=void 0,this._this=void 0}},Me=class extends ko.EventEmitter{constructor(){super(),this._sendMessage=new gr,this._pendingRequests=new Map,this.onDidSendMessage=this._sendMessage.event}dispose(){}handleMessage(e){if(e.type==="request")this.dispatchRequest(e);else if(e.type==="response"){let t=e,r=this._pendingRequests.get(t.request_seq);r&&(this._pendingRequests.delete(t.request_seq),r(t))}}_isRunningInline(){return this._sendMessage&&this._sendMessage.hasListener()}start(e,t){this._sequence=1,this._writableStream=t,this._rawData=Buffer.alloc(0),e.on("data",r=>this._handleData(r)),e.on("close",()=>{this._emitEvent(new Qe.Event("close"))}),e.on("error",r=>{this._emitEvent(new Qe.Event("error","inStream error: "+(r&&r.message)))}),t.on("error",r=>{this._emitEvent(new Qe.Event("error","outStream error: "+(r&&r.message)))}),e.resume()}stop(){this._writableStream&&this._writableStream.end()}sendEvent(e){this._send("event",e)}sendResponse(e){e.seq>0?console.error(`attempt to send more than one response for command ${e.command}`):this._send("response",e)}sendRequest(e,t,r,n){let o={command:e};if(t&&Object.keys(t).length>0&&(o.arguments=t),this._send("request",o),n){this._pendingRequests.set(o.seq,n);let s=setTimeout(()=>{clearTimeout(s);let h=this._pendingRequests.get(o.seq);h&&(this._pendingRequests.delete(o.seq),h(new Qe.Response(o,"timeout")))},r)}}dispatchRequest(e){}_emitEvent(e){this.emit(e.event,e)}_send(e,t){if(t.type=e,t.seq=this._sequence++,this._writableStream){let r=JSON.stringify(t);this._writableStream.write(`Content-Length: ${Buffer.byteLength(r,"utf8")}\r
\r
${r}`,"utf8")}this._sendMessage.fire(t)}_handleData(e){for(this._rawData=Buffer.concat([this._rawData,e]);;){if(this._contentLength>=0){if(this._rawData.length>=this._contentLength){let t=this._rawData.toString("utf8",0,this._contentLength);if(this._rawData=this._rawData.slice(this._contentLength),this._contentLength=-1,t.length>0)try{let r=JSON.parse(t);this.handleMessage(r)}catch(r){this._emitEvent(new Qe.Event("error","Error handling data: "+(r&&r.message)))}continue}}else{let t=this._rawData.indexOf(Me.TWO_CRLF);if(t!==-1){let n=this._rawData.toString("utf8",0,t).split(`\r
`);for(let o=0;o<n.length;o++){let s=n[o].split(/: +/);s[0]=="Content-Length"&&(this._contentLength=+s[1])}this._rawData=this._rawData.slice(t+Me.TWO_CRLF.length);continue}}break}}};ht.ProtocolServer=Me;Me.TWO_CRLF=`\r
\r
`});var mn=F(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.runDebugAdapter=void 0;var Fo=require("net");function qo(i){let e=0;if(process.argv.slice(2).forEach(function(r,n,o){let s=/^--server=(\d{4,5})$/.exec(r);s&&(e=parseInt(s[1],10))}),e>0)console.error(`waiting for debug protocol on port ${e}`),Fo.createServer(r=>{console.error(">> accepted connection from client"),r.on("end",()=>{console.error(`>> client connection closed
`)});let n=new i(!1,!0);n.setRunAsServer(!0),n.start(r,r)}).listen(e);else{let r=new i(!1);process.on("SIGTERM",()=>{r.shutdown()}),r.start(process.stdin,process.stdout)}}ft.runDebugAdapter=qo});var dt=F(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.DebugSession=k.ErrorDestination=k.MemoryEvent=k.InvalidatedEvent=k.ProgressEndEvent=k.ProgressUpdateEvent=k.ProgressStartEvent=k.CapabilitiesEvent=k.LoadedSourceEvent=k.ModuleEvent=k.BreakpointEvent=k.ThreadEvent=k.OutputEvent=k.ExitedEvent=k.TerminatedEvent=k.InitializedEvent=k.ContinuedEvent=k.StoppedEvent=k.CompletionItem=k.Module=k.Breakpoint=k.Variable=k.Thread=k.StackFrame=k.Scope=k.Source=void 0;var Bo=dn(),ne=pt(),Vo=mn(),gn=require("url"),yr=class{constructor(e,t,r=0,n,o){this.name=e,this.path=t,this.sourceReference=r,n&&(this.origin=n),o&&(this.adapterData=o)}};k.Source=yr;var br=class{constructor(e,t,r=!1){this.name=e,this.variablesReference=t,this.expensive=r}};k.Scope=br;var wr=class{constructor(e,t,r,n=0,o=0){this.id=e,this.source=r,this.line=n,this.column=o,this.name=t}};k.StackFrame=wr;var vr=class{constructor(e,t){this.id=e,t?this.name=t:this.name="Thread #"+e}};k.Thread=vr;var Tr=class{constructor(e,t,r=0,n,o){this.name=e,this.value=t,this.variablesReference=r,typeof o=="number"&&(this.namedVariables=o),typeof n=="number"&&(this.indexedVariables=n)}};k.Variable=Tr;var Dr=class{constructor(e,t,r,n){this.verified=e;let o=this;typeof t=="number"&&(o.line=t),typeof r=="number"&&(o.column=r),n&&(o.source=n)}setId(e){this.id=e}};k.Breakpoint=Dr;var Er=class{constructor(e,t){this.id=e,this.name=t}};k.Module=Er;var Pr=class{constructor(e,t,r=0){this.label=e,this.start=t,this.length=r}};k.CompletionItem=Pr;var Cr=class extends ne.Event{constructor(e,t,r){super("stopped"),this.body={reason:e},typeof t=="number"&&(this.body.threadId=t),typeof r=="string"&&(this.body.text=r)}};k.StoppedEvent=Cr;var xr=class extends ne.Event{constructor(e,t){super("continued"),this.body={threadId:e},typeof t=="boolean"&&(this.body.allThreadsContinued=t)}};k.ContinuedEvent=xr;var Ir=class extends ne.Event{constructor(){super("initialized")}};k.InitializedEvent=Ir;var Sr=class extends ne.Event{constructor(e){if(super("terminated"),typeof e=="boolean"||e){let t=this;t.body={restart:e}}}};k.TerminatedEvent=Sr;var Or=class extends ne.Event{constructor(e){super("exited"),this.body={exitCode:e}}};k.ExitedEvent=Or;var Nr=class extends ne.Event{constructor(e,t="console",r){super("output"),this.body={category:t,output:e},r!==void 0&&(this.body.data=r)}};k.OutputEvent=Nr;var Ar=class extends ne.Event{constructor(e,t){super("thread"),this.body={reason:e,threadId:t}}};k.ThreadEvent=Ar;var Lr=class extends ne.Event{constructor(e,t){super("breakpoint"),this.body={reason:e,breakpoint:t}}};k.BreakpointEvent=Lr;var _r=class extends ne.Event{constructor(e,t){super("module"),this.body={reason:e,module:t}}};k.ModuleEvent=_r;var Rr=class extends ne.Event{constructor(e,t){super("loadedSource"),this.body={reason:e,source:t}}};k.LoadedSourceEvent=Rr;var Mr=class extends ne.Event{constructor(e){super("capabilities"),this.body={capabilities:e}}};k.CapabilitiesEvent=Mr;var kr=class extends ne.Event{constructor(e,t,r){super("progressStart"),this.body={progressId:e,title:t},typeof r=="string"&&(this.body.message=r)}};k.ProgressStartEvent=kr;var Fr=class extends ne.Event{constructor(e,t){super("progressUpdate"),this.body={progressId:e},typeof t=="string"&&(this.body.message=t)}};k.ProgressUpdateEvent=Fr;var qr=class extends ne.Event{constructor(e,t){super("progressEnd"),this.body={progressId:e},typeof t=="string"&&(this.body.message=t)}};k.ProgressEndEvent=qr;var Br=class extends ne.Event{constructor(e,t,r){super("invalidated"),this.body={},e&&(this.body.areas=e),t&&(this.body.threadId=t),r&&(this.body.stackFrameId=r)}};k.InvalidatedEvent=Br;var Vr=class extends ne.Event{constructor(e,t,r){super("memory"),this.body={memoryReference:e,offset:t,count:r}}};k.MemoryEvent=Vr;var ke;(function(i){i[i.User=1]="User",i[i.Telemetry=2]="Telemetry"})(ke=k.ErrorDestination||(k.ErrorDestination={}));var me=class extends Bo.ProtocolServer{constructor(e,t){super();let r=typeof e=="boolean"?e:!1;this._debuggerLinesStartAt1=r,this._debuggerColumnsStartAt1=r,this._debuggerPathsAreURIs=!1,this._clientLinesStartAt1=!0,this._clientColumnsStartAt1=!0,this._clientPathsAreURIs=!1,this._isServer=typeof t=="boolean"?t:!1,this.on("close",()=>{this.shutdown()}),this.on("error",n=>{this.shutdown()})}setDebuggerPathFormat(e){this._debuggerPathsAreURIs=e!=="path"}setDebuggerLinesStartAt1(e){this._debuggerLinesStartAt1=e}setDebuggerColumnsStartAt1(e){this._debuggerColumnsStartAt1=e}setRunAsServer(e){this._isServer=e}static run(e){(0,Vo.runDebugAdapter)(e)}shutdown(){this._isServer||this._isRunningInline()||setTimeout(()=>{process.exit(0)},100)}sendErrorResponse(e,t,r,n,o=ke.User){let s;typeof t=="number"?(s={id:t,format:r},n&&(s.variables=n),o&ke.User&&(s.showUser=!0),o&ke.Telemetry&&(s.sendTelemetry=!0)):s=t,e.success=!1,e.message=me.formatPII(s.format,!0,s.variables),e.body||(e.body={}),e.body.error=s,this.sendResponse(e)}runInTerminalRequest(e,t,r){this.sendRequest("runInTerminal",e,t,r)}dispatchRequest(e){let t=new ne.Response(e);try{if(e.command==="initialize"){var r=e.arguments;if(typeof r.linesStartAt1=="boolean"&&(this._clientLinesStartAt1=r.linesStartAt1),typeof r.columnsStartAt1=="boolean"&&(this._clientColumnsStartAt1=r.columnsStartAt1),r.pathFormat!=="path")this.sendErrorResponse(t,2018,"debug adapter only supports native paths",null,ke.Telemetry);else{let n=t;n.body={},this.initializeRequest(n,r)}}else e.command==="launch"?this.launchRequest(t,e.arguments,e):e.command==="attach"?this.attachRequest(t,e.arguments,e):e.command==="disconnect"?this.disconnectRequest(t,e.arguments,e):e.command==="terminate"?this.terminateRequest(t,e.arguments,e):e.command==="restart"?this.restartRequest(t,e.arguments,e):e.command==="setBreakpoints"?this.setBreakPointsRequest(t,e.arguments,e):e.command==="setFunctionBreakpoints"?this.setFunctionBreakPointsRequest(t,e.arguments,e):e.command==="setExceptionBreakpoints"?this.setExceptionBreakPointsRequest(t,e.arguments,e):e.command==="configurationDone"?this.configurationDoneRequest(t,e.arguments,e):e.command==="continue"?this.continueRequest(t,e.arguments,e):e.command==="next"?this.nextRequest(t,e.arguments,e):e.command==="stepIn"?this.stepInRequest(t,e.arguments,e):e.command==="stepOut"?this.stepOutRequest(t,e.arguments,e):e.command==="stepBack"?this.stepBackRequest(t,e.arguments,e):e.command==="reverseContinue"?this.reverseContinueRequest(t,e.arguments,e):e.command==="restartFrame"?this.restartFrameRequest(t,e.arguments,e):e.command==="goto"?this.gotoRequest(t,e.arguments,e):e.command==="pause"?this.pauseRequest(t,e.arguments,e):e.command==="stackTrace"?this.stackTraceRequest(t,e.arguments,e):e.command==="scopes"?this.scopesRequest(t,e.arguments,e):e.command==="variables"?this.variablesRequest(t,e.arguments,e):e.command==="setVariable"?this.setVariableRequest(t,e.arguments,e):e.command==="setExpression"?this.setExpressionRequest(t,e.arguments,e):e.command==="source"?this.sourceRequest(t,e.arguments,e):e.command==="threads"?this.threadsRequest(t,e):e.command==="terminateThreads"?this.terminateThreadsRequest(t,e.arguments,e):e.command==="evaluate"?this.evaluateRequest(t,e.arguments,e):e.command==="stepInTargets"?this.stepInTargetsRequest(t,e.arguments,e):e.command==="gotoTargets"?this.gotoTargetsRequest(t,e.arguments,e):e.command==="completions"?this.completionsRequest(t,e.arguments,e):e.command==="exceptionInfo"?this.exceptionInfoRequest(t,e.arguments,e):e.command==="loadedSources"?this.loadedSourcesRequest(t,e.arguments,e):e.command==="dataBreakpointInfo"?this.dataBreakpointInfoRequest(t,e.arguments,e):e.command==="setDataBreakpoints"?this.setDataBreakpointsRequest(t,e.arguments,e):e.command==="readMemory"?this.readMemoryRequest(t,e.arguments,e):e.command==="writeMemory"?this.writeMemoryRequest(t,e.arguments,e):e.command==="disassemble"?this.disassembleRequest(t,e.arguments,e):e.command==="cancel"?this.cancelRequest(t,e.arguments,e):e.command==="breakpointLocations"?this.breakpointLocationsRequest(t,e.arguments,e):e.command==="setInstructionBreakpoints"?this.setInstructionBreakpointsRequest(t,e.arguments,e):this.customRequest(e.command,t,e.arguments,e)}catch(n){this.sendErrorResponse(t,1104,"{_stack}",{_exception:n.message,_stack:n.stack},ke.Telemetry)}}initializeRequest(e,t){e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!1,e.body.supportsRestartFrame=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCompletionsRequest=!1,e.body.supportsRestartRequest=!1,e.body.supportsExceptionOptions=!1,e.body.supportsValueFormattingOptions=!1,e.body.supportsExceptionInfoRequest=!1,e.body.supportTerminateDebuggee=!1,e.body.supportsDelayedStackTraceLoading=!1,e.body.supportsLoadedSourcesRequest=!1,e.body.supportsLogPoints=!1,e.body.supportsTerminateThreadsRequest=!1,e.body.supportsSetExpression=!1,e.body.supportsTerminateRequest=!1,e.body.supportsDataBreakpoints=!1,e.body.supportsReadMemoryRequest=!1,e.body.supportsDisassembleRequest=!1,e.body.supportsCancelRequest=!1,e.body.supportsBreakpointLocationsRequest=!1,e.body.supportsClipboardContext=!1,e.body.supportsSteppingGranularity=!1,e.body.supportsInstructionBreakpoints=!1,e.body.supportsExceptionFilterOptions=!1,this.sendResponse(e)}disconnectRequest(e,t,r){this.sendResponse(e),this.shutdown()}launchRequest(e,t,r){this.sendResponse(e)}attachRequest(e,t,r){this.sendResponse(e)}terminateRequest(e,t,r){this.sendResponse(e)}restartRequest(e,t,r){this.sendResponse(e)}setBreakPointsRequest(e,t,r){this.sendResponse(e)}setFunctionBreakPointsRequest(e,t,r){this.sendResponse(e)}setExceptionBreakPointsRequest(e,t,r){this.sendResponse(e)}configurationDoneRequest(e,t,r){this.sendResponse(e)}continueRequest(e,t,r){this.sendResponse(e)}nextRequest(e,t,r){this.sendResponse(e)}stepInRequest(e,t,r){this.sendResponse(e)}stepOutRequest(e,t,r){this.sendResponse(e)}stepBackRequest(e,t,r){this.sendResponse(e)}reverseContinueRequest(e,t,r){this.sendResponse(e)}restartFrameRequest(e,t,r){this.sendResponse(e)}gotoRequest(e,t,r){this.sendResponse(e)}pauseRequest(e,t,r){this.sendResponse(e)}sourceRequest(e,t,r){this.sendResponse(e)}threadsRequest(e,t){this.sendResponse(e)}terminateThreadsRequest(e,t,r){this.sendResponse(e)}stackTraceRequest(e,t,r){this.sendResponse(e)}scopesRequest(e,t,r){this.sendResponse(e)}variablesRequest(e,t,r){this.sendResponse(e)}setVariableRequest(e,t,r){this.sendResponse(e)}setExpressionRequest(e,t,r){this.sendResponse(e)}evaluateRequest(e,t,r){this.sendResponse(e)}stepInTargetsRequest(e,t,r){this.sendResponse(e)}gotoTargetsRequest(e,t,r){this.sendResponse(e)}completionsRequest(e,t,r){this.sendResponse(e)}exceptionInfoRequest(e,t,r){this.sendResponse(e)}loadedSourcesRequest(e,t,r){this.sendResponse(e)}dataBreakpointInfoRequest(e,t,r){this.sendResponse(e)}setDataBreakpointsRequest(e,t,r){this.sendResponse(e)}readMemoryRequest(e,t,r){this.sendResponse(e)}writeMemoryRequest(e,t,r){this.sendResponse(e)}disassembleRequest(e,t,r){this.sendResponse(e)}cancelRequest(e,t,r){this.sendResponse(e)}breakpointLocationsRequest(e,t,r){this.sendResponse(e)}setInstructionBreakpointsRequest(e,t,r){this.sendResponse(e)}customRequest(e,t,r,n){this.sendErrorResponse(t,1014,"unrecognized request",null,ke.Telemetry)}convertClientLineToDebugger(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e+1:this._clientLinesStartAt1?e-1:e}convertDebuggerLineToClient(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e-1:this._clientLinesStartAt1?e+1:e}convertClientColumnToDebugger(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e+1:this._clientColumnsStartAt1?e-1:e}convertDebuggerColumnToClient(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e-1:this._clientColumnsStartAt1?e+1:e}convertClientPathToDebugger(e){return this._clientPathsAreURIs!==this._debuggerPathsAreURIs?this._clientPathsAreURIs?me.uri2path(e):me.path2uri(e):e}convertDebuggerPathToClient(e){return this._debuggerPathsAreURIs!==this._clientPathsAreURIs?this._debuggerPathsAreURIs?me.uri2path(e):me.path2uri(e):e}static path2uri(e){process.platform==="win32"&&(/^[A-Z]:/.test(e)&&(e=e[0].toLowerCase()+e.substr(1)),e=e.replace(/\\/g,"/")),e=encodeURI(e);let t=new gn.URL("file:");return t.pathname=e,t.toString()}static uri2path(e){let t=new gn.URL(e),r=decodeURIComponent(t.pathname);return process.platform==="win32"&&(/^\/[a-zA-Z]:/.test(r)&&(r=r[1].toLowerCase()+r.substr(2)),r=r.replace(/\//g,"\\")),r}static formatPII(e,t,r){return e.replace(me._formatPIIRegexp,function(n,o){return t&&o.length>0&&o[0]!=="_"?n:r[o]&&r.hasOwnProperty(o)?r[o]:n})}};k.DebugSession=me;me._formatPIIRegexp=/{([^}]+)}/g});var vn=F(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.InternalLogger=void 0;var yn=require("fs"),bn=require("path"),ce=yt(),jr=class{constructor(e,t){this.beforeExitCallback=()=>this.dispose(),this._logCallback=e,this._logToConsole=t,this._minLogLevel=ce.LogLevel.Warn,this.disposeCallback=(r,n)=>{this.dispose(),n=n||2,n+=128,process.exit(n)}}async setup(e){if(this._minLogLevel=e.consoleMinLogLevel,this._prependTimestamp=e.prependTimestamp,e.logFilePath)if(!bn.isAbsolute(e.logFilePath))this.log(`logFilePath must be an absolute path: ${e.logFilePath}`,ce.LogLevel.Error);else{let t=r=>this.sendLog(`Error creating log file at path: ${e.logFilePath}. Error: ${r.toString()}
`,ce.LogLevel.Error);try{await yn.promises.mkdir(bn.dirname(e.logFilePath),{recursive:!0}),this.log(`Verbose logs are written to:
`,ce.LogLevel.Warn),this.log(e.logFilePath+`
`,ce.LogLevel.Warn),this._logFileStream=yn.createWriteStream(e.logFilePath),this.logDateTime(),this.setupShutdownListeners(),this._logFileStream.on("error",r=>{t(r)})}catch(r){t(r)}}}logDateTime(){let e=new Date,r=e.getUTCFullYear()+`-${e.getUTCMonth()+1}-`+e.getUTCDate()+", "+wn();this.log(r+`
`,ce.LogLevel.Verbose,!1)}setupShutdownListeners(){process.on("beforeExit",this.beforeExitCallback),process.on("SIGTERM",this.disposeCallback),process.on("SIGINT",this.disposeCallback)}removeShutdownListeners(){process.removeListener("beforeExit",this.beforeExitCallback),process.removeListener("SIGTERM",this.disposeCallback),process.removeListener("SIGINT",this.disposeCallback)}dispose(){return new Promise(e=>{this.removeShutdownListeners(),this._logFileStream?(this._logFileStream.end(e),this._logFileStream=null):e()})}log(e,t,r=!0){if(this._minLogLevel!==ce.LogLevel.Stop){if(t>=this._minLogLevel&&this.sendLog(e,t),this._logToConsole){let n=t===ce.LogLevel.Error?console.error:t===ce.LogLevel.Warn?console.warn:null;n&&n((0,ce.trimLastNewline)(e))}t===ce.LogLevel.Error&&(e=`[${ce.LogLevel[t]}] ${e}`),this._prependTimestamp&&r&&(e="["+wn()+"] "+e),this._logFileStream&&this._logFileStream.write(e)}}sendLog(e,t){if(e.length>1500){let r=!!e.match(/(\n|\r\n)$/);e=e.substr(0,1500)+"[...]",r&&(e=e+`
`)}if(this._logCallback){let r=new ce.LogOutputEvent(e,t);this._logCallback(r)}}};gt.InternalLogger=jr;function wn(){let i=new Date,e=mt(2,String(i.getUTCHours())),t=mt(2,String(i.getUTCMinutes())),r=mt(2,String(i.getUTCSeconds())),n=mt(3,String(i.getUTCMilliseconds()));return e+":"+t+":"+r+"."+n+" UTC"}function mt(i,e){return e.length>=i?e:String("0".repeat(i)+e).slice(-i)}});var yt=F(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.trimLastNewline=ue.LogOutputEvent=ue.logger=ue.Logger=ue.LogLevel=void 0;var jo=vn(),Xo=dt(),Le;(function(i){i[i.Verbose=0]="Verbose",i[i.Log=1]="Log",i[i.Warn=2]="Warn",i[i.Error=3]="Error",i[i.Stop=4]="Stop"})(Le=ue.LogLevel||(ue.LogLevel={}));var bt=class{constructor(){this._pendingLogQ=[]}log(e,t=Le.Log){e=e+`
`,this._write(e,t)}verbose(e){this.log(e,Le.Verbose)}warn(e){this.log(e,Le.Warn)}error(e){this.log(e,Le.Error)}dispose(){if(this._currentLogger){let e=this._currentLogger.dispose();return this._currentLogger=null,e}else return Promise.resolve()}_write(e,t=Le.Log){e=e+"",this._pendingLogQ?this._pendingLogQ.push({msg:e,level:t}):this._currentLogger&&this._currentLogger.log(e,t)}setup(e,t,r=!0){let n=typeof t=="string"?t:t&&this._logFilePathFromInit;if(this._currentLogger){let o={consoleMinLogLevel:e,logFilePath:n,prependTimestamp:r};this._currentLogger.setup(o).then(()=>{if(this._pendingLogQ){let s=this._pendingLogQ;this._pendingLogQ=null,s.forEach(h=>this._write(h.msg,h.level))}})}}init(e,t,r){this._pendingLogQ=this._pendingLogQ||[],this._currentLogger=new jo.InternalLogger(e,r),this._logFilePathFromInit=t}};ue.Logger=bt;ue.logger=new bt;var Xr=class extends Xo.OutputEvent{constructor(e,t){let r=t===Le.Error?"stderr":t===Le.Warn?"console":"stdout";super(e,r)}};ue.LogOutputEvent=Xr;function Uo(i){return i.replace(/(\n|\r\n)$/,"")}ue.trimLastNewline=Uo});var En=F(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.LoggingDebugSession=void 0;var Dn=yt(),We=Dn.logger,Tn=dt(),Ur=class extends Tn.DebugSession{constructor(e,t,r){super(t,r),this.obsolete_logFilePath=e,this.on("error",n=>{We.error(n.body)})}start(e,t){super.start(e,t),We.init(r=>this.sendEvent(r),this.obsolete_logFilePath,this._isServer)}sendEvent(e){if(!(e instanceof Dn.LogOutputEvent)){let t=e;e instanceof Tn.OutputEvent&&e.body&&e.body.data&&e.body.data.doNotLogOutput&&(delete e.body.data.doNotLogOutput,t={...e},t.body={...e.body,output:"<output not logged>"}),We.verbose(`To client: ${JSON.stringify(t)}`)}super.sendEvent(e)}sendRequest(e,t,r,n){We.verbose(`To client: ${JSON.stringify(e)}(${JSON.stringify(t)}), timeout: ${r}`),super.sendRequest(e,t,r,n)}sendResponse(e){We.verbose(`To client: ${JSON.stringify(e)}`),super.sendResponse(e)}dispatchRequest(e){We.verbose(`From client: ${e.command}(${JSON.stringify(e.arguments)})`),super.dispatchRequest(e)}};wt.LoggingDebugSession=Ur});var Pn=F(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.Handles=void 0;var Hr=class{constructor(e){this.START_HANDLE=1e3,this._handleMap=new Map,this._nextHandle=typeof e=="number"?e:this.START_HANDLE}reset(){this._nextHandle=this.START_HANDLE,this._handleMap=new Map}create(e){var t=this._nextHandle++;return this._handleMap.set(t,e),t}get(e,t){return this._handleMap.get(e)||t}};vt.Handles=Hr});var Ze=F(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});R.Handles=R.Response=R.Event=R.ErrorDestination=R.CompletionItem=R.Module=R.Source=R.Breakpoint=R.Variable=R.Scope=R.StackFrame=R.Thread=R.MemoryEvent=R.InvalidatedEvent=R.ProgressEndEvent=R.ProgressUpdateEvent=R.ProgressStartEvent=R.CapabilitiesEvent=R.LoadedSourceEvent=R.ModuleEvent=R.BreakpointEvent=R.ThreadEvent=R.OutputEvent=R.ContinuedEvent=R.StoppedEvent=R.ExitedEvent=R.TerminatedEvent=R.InitializedEvent=R.logger=R.Logger=R.LoggingDebugSession=R.DebugSession=void 0;var W=dt();Object.defineProperty(R,"DebugSession",{enumerable:!0,get:function(){return W.DebugSession}});Object.defineProperty(R,"InitializedEvent",{enumerable:!0,get:function(){return W.InitializedEvent}});Object.defineProperty(R,"TerminatedEvent",{enumerable:!0,get:function(){return W.TerminatedEvent}});Object.defineProperty(R,"ExitedEvent",{enumerable:!0,get:function(){return W.ExitedEvent}});Object.defineProperty(R,"StoppedEvent",{enumerable:!0,get:function(){return W.StoppedEvent}});Object.defineProperty(R,"ContinuedEvent",{enumerable:!0,get:function(){return W.ContinuedEvent}});Object.defineProperty(R,"OutputEvent",{enumerable:!0,get:function(){return W.OutputEvent}});Object.defineProperty(R,"ThreadEvent",{enumerable:!0,get:function(){return W.ThreadEvent}});Object.defineProperty(R,"BreakpointEvent",{enumerable:!0,get:function(){return W.BreakpointEvent}});Object.defineProperty(R,"ModuleEvent",{enumerable:!0,get:function(){return W.ModuleEvent}});Object.defineProperty(R,"LoadedSourceEvent",{enumerable:!0,get:function(){return W.LoadedSourceEvent}});Object.defineProperty(R,"CapabilitiesEvent",{enumerable:!0,get:function(){return W.CapabilitiesEvent}});Object.defineProperty(R,"ProgressStartEvent",{enumerable:!0,get:function(){return W.ProgressStartEvent}});Object.defineProperty(R,"ProgressUpdateEvent",{enumerable:!0,get:function(){return W.ProgressUpdateEvent}});Object.defineProperty(R,"ProgressEndEvent",{enumerable:!0,get:function(){return W.ProgressEndEvent}});Object.defineProperty(R,"InvalidatedEvent",{enumerable:!0,get:function(){return W.InvalidatedEvent}});Object.defineProperty(R,"MemoryEvent",{enumerable:!0,get:function(){return W.MemoryEvent}});Object.defineProperty(R,"Thread",{enumerable:!0,get:function(){return W.Thread}});Object.defineProperty(R,"StackFrame",{enumerable:!0,get:function(){return W.StackFrame}});Object.defineProperty(R,"Scope",{enumerable:!0,get:function(){return W.Scope}});Object.defineProperty(R,"Variable",{enumerable:!0,get:function(){return W.Variable}});Object.defineProperty(R,"Breakpoint",{enumerable:!0,get:function(){return W.Breakpoint}});Object.defineProperty(R,"Source",{enumerable:!0,get:function(){return W.Source}});Object.defineProperty(R,"Module",{enumerable:!0,get:function(){return W.Module}});Object.defineProperty(R,"CompletionItem",{enumerable:!0,get:function(){return W.CompletionItem}});Object.defineProperty(R,"ErrorDestination",{enumerable:!0,get:function(){return W.ErrorDestination}});var Ho=En();Object.defineProperty(R,"LoggingDebugSession",{enumerable:!0,get:function(){return Ho.LoggingDebugSession}});var Cn=yt();R.Logger=Cn;var xn=pt();Object.defineProperty(R,"Event",{enumerable:!0,get:function(){return xn.Event}});Object.defineProperty(R,"Response",{enumerable:!0,get:function(){return xn.Response}});var $o=Pn();Object.defineProperty(R,"Handles",{enumerable:!0,get:function(){return $o.Handles}});var Wo=Cn.logger;R.logger=Wo});var Tt=F($r=>{(function(){$r.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call($r)});var we=F((In,_e)=>{(function(){var i,e,t,r,n,o,s,h=[].slice,f={}.hasOwnProperty;i=function(){var y,D,P,b,m,v;if(v=arguments[0],m=2<=arguments.length?h.call(arguments,1):[],n(Object.assign))Object.assign.apply(null,arguments);else for(y=0,P=m.length;y<P;y++)if(b=m[y],b!=null)for(D in b)!f.call(b,D)||(v[D]=b[D]);return v},n=function(y){return!!y&&Object.prototype.toString.call(y)==="[object Function]"},o=function(y){var D;return!!y&&((D=typeof y)=="function"||D==="object")},t=function(y){return n(Array.isArray)?Array.isArray(y):Object.prototype.toString.call(y)==="[object Array]"},r=function(y){var D;if(t(y))return!y.length;for(D in y)if(!!f.call(y,D))return!1;return!0},s=function(y){var D,P;return o(y)&&(P=Object.getPrototypeOf(y))&&(D=P.constructor)&&typeof D=="function"&&D instanceof D&&Function.prototype.toString.call(D)===Function.prototype.toString.call(Object)},e=function(y){return n(y.valueOf)?y.valueOf():y},_e.exports.assign=i,_e.exports.isFunction=n,_e.exports.isObject=o,_e.exports.isArray=t,_e.exports.isEmpty=r,_e.exports.isPlainObject=s,_e.exports.getValue=e}).call(In)});var Wr=F((Sn,On)=>{(function(){var i;On.exports=i=function(){function e(){}return e.prototype.hasFeature=function(t,r){return!0},e.prototype.createDocumentType=function(t,r,n){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(t,r,n){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(t,r){throw new Error("This DOM method is not implemented.")},e}()}).call(Sn)});var Ln=F((Nn,An)=>{(function(){var i;An.exports=i=function(){function e(){}return e.prototype.handleError=function(t){throw new Error(t)},e}()}).call(Nn)});var Mn=F((_n,Rn)=>{(function(){var i;Rn.exports=i=function(){function e(t){this.arr=t||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(t){return this.arr[t]||null},e.prototype.contains=function(t){return this.arr.indexOf(t)!==-1},e}()}).call(_n)});var qn=F((kn,Fn)=>{(function(){var i,e,t;e=Ln(),t=Mn(),Fn.exports=i=function(){function r(){var n;this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=n=Object.create(this.defaultParams)}return Object.defineProperty(r.prototype,"parameterNames",{get:function(){return new t(Object.keys(this.defaultParams))}}),r.prototype.getParameter=function(n){return this.params.hasOwnProperty(n)?this.params[n]:null},r.prototype.canSetParameter=function(n,o){return!0},r.prototype.setParameter=function(n,o){return o!=null?this.params[n]=o:delete this.params[n]},r}()}).call(kn)});var Z=F((Bn,Vn)=>{(function(){Vn.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(Bn)});var Gr=F((jn,Xn)=>{(function(){var i,e,t;i=Z(),t=le(),Xn.exports=e=function(){function r(n,o,s){if(this.parent=n,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),o==null)throw new Error("Missing attribute name. "+this.debugInfo(o));this.name=this.stringify.name(o),this.value=this.stringify.attValue(s),this.type=i.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(r.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(r.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(r.prototype,"textContent",{get:function(){return this.value},set:function(n){return this.value=n||""}}),Object.defineProperty(r.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(r.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(r.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(r.prototype,"specified",{get:function(){return!0}}),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(n){return this.options.writer.attribute(this,this.options.writer.filterOptions(n))},r.prototype.debugInfo=function(n){return n=n||this.name,n==null?"parent: <"+this.parent.name+">":"attribute: {"+n+"}, parent: <"+this.parent.name+">"},r.prototype.isEqualNode=function(n){return!(n.namespaceURI!==this.namespaceURI||n.prefix!==this.prefix||n.localName!==this.localName||n.value!==this.value)},r}()}).call(jn)});var Dt=F((Un,Hn)=>{(function(){var i;Hn.exports=i=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(t){return this.nodes[t]},e.prototype.setNamedItem=function(t){var r;return r=this.nodes[t.nodeName],this.nodes[t.nodeName]=t,r||null},e.prototype.removeNamedItem=function(t){var r;return r=this.nodes[t],delete this.nodes[t],r||null},e.prototype.item=function(t){return this.nodes[Object.keys(this.nodes)[t]]||null},e.prototype.getNamedItemNS=function(t,r){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(t,r){throw new Error("This DOM method is not implemented.")},e}()}).call(Un)});var Et=F(($n,Wn)=>{(function(){var i,e,t,r,n,o,s,h,f,y=function(P,b){for(var m in b)D.call(b,m)&&(P[m]=b[m]);function v(){this.constructor=P}return v.prototype=b.prototype,P.prototype=new v,P.__super__=b.prototype,P},D={}.hasOwnProperty;f=we(),h=f.isObject,s=f.isFunction,o=f.getValue,n=le(),i=Z(),e=Gr(),r=Dt(),Wn.exports=t=function(P){y(b,P);function b(m,v,T){var A,N,x,d;if(b.__super__.constructor.call(this,m),v==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(v),this.type=i.Element,this.attribs={},this.schemaTypeInfo=null,T!=null&&this.attribute(T),m.type===i.Document&&(this.isRoot=!0,this.documentObject=m,m.rootObject=this,m.children)){for(d=m.children,N=0,x=d.length;N<x;N++)if(A=d[N],A.type===i.DocType){A.name=this.name;break}}}return Object.defineProperty(b.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(b.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(b.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(b.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(b.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(b.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(b.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(b.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new r(this.attribs)),this.attributeMap}}),b.prototype.clone=function(){var m,v,T,A;T=Object.create(this),T.isRoot&&(T.documentObject=null),T.attribs={},A=this.attribs;for(v in A)!D.call(A,v)||(m=A[v],T.attribs[v]=m.clone());return T.children=[],this.children.forEach(function(N){var x;return x=N.clone(),x.parent=T,T.children.push(x)}),T},b.prototype.attribute=function(m,v){var T,A;if(m!=null&&(m=o(m)),h(m))for(T in m)!D.call(m,T)||(A=m[T],this.attribute(T,A));else s(v)&&(v=v.apply()),this.options.keepNullAttributes&&v==null?this.attribs[m]=new e(this,m,""):v!=null&&(this.attribs[m]=new e(this,m,v));return this},b.prototype.removeAttribute=function(m){var v,T,A;if(m==null)throw new Error("Missing attribute name. "+this.debugInfo());if(m=o(m),Array.isArray(m))for(T=0,A=m.length;T<A;T++)v=m[T],delete this.attribs[v];else delete this.attribs[m];return this},b.prototype.toString=function(m){return this.options.writer.element(this,this.options.writer.filterOptions(m))},b.prototype.att=function(m,v){return this.attribute(m,v)},b.prototype.a=function(m,v){return this.attribute(m,v)},b.prototype.getAttribute=function(m){return this.attribs.hasOwnProperty(m)?this.attribs[m].value:null},b.prototype.setAttribute=function(m,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getAttributeNode=function(m){return this.attribs.hasOwnProperty(m)?this.attribs[m]:null},b.prototype.setAttributeNode=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.removeAttributeNode=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getElementsByTagName=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getAttributeNS=function(m,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.setAttributeNS=function(m,v,T){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.removeAttributeNS=function(m,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getAttributeNodeNS=function(m,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.setAttributeNodeNS=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getElementsByTagNameNS=function(m,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.hasAttribute=function(m){return this.attribs.hasOwnProperty(m)},b.prototype.hasAttributeNS=function(m,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.setIdAttribute=function(m,v){return this.attribs.hasOwnProperty(m)?this.attribs[m].isId:v},b.prototype.setIdAttributeNS=function(m,v,T){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.setIdAttributeNode=function(m,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getElementsByTagName=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getElementsByTagNameNS=function(m,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getElementsByClassName=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.isEqualNode=function(m){var v,T,A;if(!b.__super__.isEqualNode.apply(this,arguments).isEqualNode(m)||m.namespaceURI!==this.namespaceURI||m.prefix!==this.prefix||m.localName!==this.localName||m.attribs.length!==this.attribs.length)return!1;for(v=T=0,A=this.attribs.length-1;0<=A?T<=A:T>=A;v=0<=A?++T:--T)if(!this.attribs[v].isEqualNode(m.attribs[v]))return!1;return!0},b}(n)}).call($n)});var Je=F((Gn,zn)=>{(function(){var i,e,t=function(n,o){for(var s in o)r.call(o,s)&&(n[s]=o[s]);function h(){this.constructor=n}return h.prototype=o.prototype,n.prototype=new h,n.__super__=o.prototype,n},r={}.hasOwnProperty;e=le(),zn.exports=i=function(n){t(o,n);function o(s){o.__super__.constructor.call(this,s),this.value=""}return Object.defineProperty(o.prototype,"data",{get:function(){return this.value},set:function(s){return this.value=s||""}}),Object.defineProperty(o.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(o.prototype,"textContent",{get:function(){return this.value},set:function(s){return this.value=s||""}}),o.prototype.clone=function(){return Object.create(this)},o.prototype.substringData=function(s,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.appendData=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.insertData=function(s,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.deleteData=function(s,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.replaceData=function(s,h,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.isEqualNode=function(s){return!(!o.__super__.isEqualNode.apply(this,arguments).isEqualNode(s)||s.data!==this.data)},o}(e)}).call(Gn)});var Pt=F((Yn,Kn)=>{(function(){var i,e,t,r=function(o,s){for(var h in s)n.call(s,h)&&(o[h]=s[h]);function f(){this.constructor=o}return f.prototype=s.prototype,o.prototype=new f,o.__super__=s.prototype,o},n={}.hasOwnProperty;i=Z(),t=Je(),Kn.exports=e=function(o){r(s,o);function s(h,f){if(s.__super__.constructor.call(this,h),f==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=i.CData,this.value=this.stringify.cdata(f)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(h){return this.options.writer.cdata(this,this.options.writer.filterOptions(h))},s}(t)}).call(Yn)});var Ct=F((Qn,Zn)=>{(function(){var i,e,t,r=function(o,s){for(var h in s)n.call(s,h)&&(o[h]=s[h]);function f(){this.constructor=o}return f.prototype=s.prototype,o.prototype=new f,o.__super__=s.prototype,o},n={}.hasOwnProperty;i=Z(),e=Je(),Zn.exports=t=function(o){r(s,o);function s(h,f){if(s.__super__.constructor.call(this,h),f==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=i.Comment,this.value=this.stringify.comment(f)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(h){return this.options.writer.comment(this,this.options.writer.filterOptions(h))},s}(e)}).call(Qn)});var xt=F((Jn,ei)=>{(function(){var i,e,t,r,n=function(s,h){for(var f in h)o.call(h,f)&&(s[f]=h[f]);function y(){this.constructor=s}return y.prototype=h.prototype,s.prototype=new y,s.__super__=h.prototype,s},o={}.hasOwnProperty;r=we().isObject,t=le(),i=Z(),ei.exports=e=function(s){n(h,s);function h(f,y,D,P){var b;h.__super__.constructor.call(this,f),r(y)&&(b=y,y=b.version,D=b.encoding,P=b.standalone),y||(y="1.0"),this.type=i.Declaration,this.version=this.stringify.xmlVersion(y),D!=null&&(this.encoding=this.stringify.xmlEncoding(D)),P!=null&&(this.standalone=this.stringify.xmlStandalone(P))}return h.prototype.toString=function(f){return this.options.writer.declaration(this,this.options.writer.filterOptions(f))},h}(t)}).call(Jn)});var It=F((ti,ri)=>{(function(){var i,e,t,r=function(o,s){for(var h in s)n.call(s,h)&&(o[h]=s[h]);function f(){this.constructor=o}return f.prototype=s.prototype,o.prototype=new f,o.__super__=s.prototype,o},n={}.hasOwnProperty;t=le(),i=Z(),ri.exports=e=function(o){r(s,o);function s(h,f,y,D,P,b){if(s.__super__.constructor.call(this,h),f==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(y==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(f));if(!D)throw new Error("Missing DTD attribute type. "+this.debugInfo(f));if(!P)throw new Error("Missing DTD attribute default. "+this.debugInfo(f));if(P.indexOf("#")!==0&&(P="#"+P),!P.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(f));if(b&&!P.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(f));this.elementName=this.stringify.name(f),this.type=i.AttributeDeclaration,this.attributeName=this.stringify.name(y),this.attributeType=this.stringify.dtdAttType(D),b&&(this.defaultValue=this.stringify.dtdAttDefault(b)),this.defaultValueType=P}return s.prototype.toString=function(h){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(h))},s}(t)}).call(ti)});var St=F((ni,ii)=>{(function(){var i,e,t,r,n=function(s,h){for(var f in h)o.call(h,f)&&(s[f]=h[f]);function y(){this.constructor=s}return y.prototype=h.prototype,s.prototype=new y,s.__super__=h.prototype,s},o={}.hasOwnProperty;r=we().isObject,t=le(),i=Z(),ii.exports=e=function(s){n(h,s);function h(f,y,D,P){if(h.__super__.constructor.call(this,f),D==null)throw new Error("Missing DTD entity name. "+this.debugInfo(D));if(P==null)throw new Error("Missing DTD entity value. "+this.debugInfo(D));if(this.pe=!!y,this.name=this.stringify.name(D),this.type=i.EntityDeclaration,!r(P))this.value=this.stringify.dtdEntityValue(P),this.internal=!0;else{if(!P.pubID&&!P.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(D));if(P.pubID&&!P.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(D));if(this.internal=!1,P.pubID!=null&&(this.pubID=this.stringify.dtdPubID(P.pubID)),P.sysID!=null&&(this.sysID=this.stringify.dtdSysID(P.sysID)),P.nData!=null&&(this.nData=this.stringify.dtdNData(P.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(D))}}return Object.defineProperty(h.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(h.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(h.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(h.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(h.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(h.prototype,"xmlVersion",{get:function(){return null}}),h.prototype.toString=function(f){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(f))},h}(t)}).call(ni)});var Ot=F((oi,si)=>{(function(){var i,e,t,r=function(o,s){for(var h in s)n.call(s,h)&&(o[h]=s[h]);function f(){this.constructor=o}return f.prototype=s.prototype,o.prototype=new f,o.__super__=s.prototype,o},n={}.hasOwnProperty;t=le(),i=Z(),si.exports=e=function(o){r(s,o);function s(h,f,y){if(s.__super__.constructor.call(this,h),f==null)throw new Error("Missing DTD element name. "+this.debugInfo());y||(y="(#PCDATA)"),Array.isArray(y)&&(y="("+y.join(",")+")"),this.name=this.stringify.name(f),this.type=i.ElementDeclaration,this.value=this.stringify.dtdElementValue(y)}return s.prototype.toString=function(h){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(h))},s}(t)}).call(oi)});var Nt=F((ai,ci)=>{(function(){var i,e,t,r=function(o,s){for(var h in s)n.call(s,h)&&(o[h]=s[h]);function f(){this.constructor=o}return f.prototype=s.prototype,o.prototype=new f,o.__super__=s.prototype,o},n={}.hasOwnProperty;t=le(),i=Z(),ci.exports=e=function(o){r(s,o);function s(h,f,y){if(s.__super__.constructor.call(this,h),f==null)throw new Error("Missing DTD notation name. "+this.debugInfo(f));if(!y.pubID&&!y.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(f));this.name=this.stringify.name(f),this.type=i.NotationDeclaration,y.pubID!=null&&(this.pubID=this.stringify.dtdPubID(y.pubID)),y.sysID!=null&&(this.sysID=this.stringify.dtdSysID(y.sysID))}return Object.defineProperty(s.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(s.prototype,"systemId",{get:function(){return this.sysID}}),s.prototype.toString=function(h){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(h))},s}(t)}).call(ai)});var At=F((ui,li)=>{(function(){var i,e,t,r,n,o,s,h,f,y=function(P,b){for(var m in b)D.call(b,m)&&(P[m]=b[m]);function v(){this.constructor=P}return v.prototype=b.prototype,P.prototype=new v,P.__super__=b.prototype,P},D={}.hasOwnProperty;f=we().isObject,h=le(),i=Z(),e=It(),r=St(),t=Ot(),n=Nt(),s=Dt(),li.exports=o=function(P){y(b,P);function b(m,v,T){var A,N,x,d,u,a;if(b.__super__.constructor.call(this,m),this.type=i.DocType,m.children){for(d=m.children,N=0,x=d.length;N<x;N++)if(A=d[N],A.type===i.Element){this.name=A.name;break}}this.documentObject=m,f(v)&&(u=v,v=u.pubID,T=u.sysID),T==null&&(a=[v,T],T=a[0],v=a[1]),v!=null&&(this.pubID=this.stringify.dtdPubID(v)),T!=null&&(this.sysID=this.stringify.dtdSysID(T))}return Object.defineProperty(b.prototype,"entities",{get:function(){var m,v,T,A,N;for(A={},N=this.children,v=0,T=N.length;v<T;v++)m=N[v],m.type===i.EntityDeclaration&&!m.pe&&(A[m.name]=m);return new s(A)}}),Object.defineProperty(b.prototype,"notations",{get:function(){var m,v,T,A,N;for(A={},N=this.children,v=0,T=N.length;v<T;v++)m=N[v],m.type===i.NotationDeclaration&&(A[m.name]=m);return new s(A)}}),Object.defineProperty(b.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(b.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(b.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),b.prototype.element=function(m,v){var T;return T=new t(this,m,v),this.children.push(T),this},b.prototype.attList=function(m,v,T,A,N){var x;return x=new e(this,m,v,T,A,N),this.children.push(x),this},b.prototype.entity=function(m,v){var T;return T=new r(this,!1,m,v),this.children.push(T),this},b.prototype.pEntity=function(m,v){var T;return T=new r(this,!0,m,v),this.children.push(T),this},b.prototype.notation=function(m,v){var T;return T=new n(this,m,v),this.children.push(T),this},b.prototype.toString=function(m){return this.options.writer.docType(this,this.options.writer.filterOptions(m))},b.prototype.ele=function(m,v){return this.element(m,v)},b.prototype.att=function(m,v,T,A,N){return this.attList(m,v,T,A,N)},b.prototype.ent=function(m,v){return this.entity(m,v)},b.prototype.pent=function(m,v){return this.pEntity(m,v)},b.prototype.not=function(m,v){return this.notation(m,v)},b.prototype.up=function(){return this.root()||this.documentObject},b.prototype.isEqualNode=function(m){return!(!b.__super__.isEqualNode.apply(this,arguments).isEqualNode(m)||m.name!==this.name||m.publicId!==this.publicId||m.systemId!==this.systemId)},b}(h)}).call(ui)});var Lt=F((pi,hi)=>{(function(){var i,e,t,r=function(o,s){for(var h in s)n.call(s,h)&&(o[h]=s[h]);function f(){this.constructor=o}return f.prototype=s.prototype,o.prototype=new f,o.__super__=s.prototype,o},n={}.hasOwnProperty;i=Z(),e=le(),hi.exports=t=function(o){r(s,o);function s(h,f){if(s.__super__.constructor.call(this,h),f==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=i.Raw,this.value=this.stringify.raw(f)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(h){return this.options.writer.raw(this,this.options.writer.filterOptions(h))},s}(e)}).call(pi)});var _t=F((fi,di)=>{(function(){var i,e,t,r=function(o,s){for(var h in s)n.call(s,h)&&(o[h]=s[h]);function f(){this.constructor=o}return f.prototype=s.prototype,o.prototype=new f,o.__super__=s.prototype,o},n={}.hasOwnProperty;i=Z(),e=Je(),di.exports=t=function(o){r(s,o);function s(h,f){if(s.__super__.constructor.call(this,h),f==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=i.Text,this.value=this.stringify.text(f)}return Object.defineProperty(s.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(s.prototype,"wholeText",{get:function(){var h,f,y;for(y="",f=this.previousSibling;f;)y=f.data+y,f=f.previousSibling;for(y+=this.data,h=this.nextSibling;h;)y=y+h.data,h=h.nextSibling;return y}}),s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(h){return this.options.writer.text(this,this.options.writer.filterOptions(h))},s.prototype.splitText=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.replaceWholeText=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},s}(e)}).call(fi)});var Rt=F((mi,gi)=>{(function(){var i,e,t,r=function(o,s){for(var h in s)n.call(s,h)&&(o[h]=s[h]);function f(){this.constructor=o}return f.prototype=s.prototype,o.prototype=new f,o.__super__=s.prototype,o},n={}.hasOwnProperty;i=Z(),e=Je(),gi.exports=t=function(o){r(s,o);function s(h,f,y){if(s.__super__.constructor.call(this,h),f==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=i.ProcessingInstruction,this.target=this.stringify.insTarget(f),this.name=this.target,y&&(this.value=this.stringify.insValue(y))}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(h){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(h))},s.prototype.isEqualNode=function(h){return!(!s.__super__.isEqualNode.apply(this,arguments).isEqualNode(h)||h.target!==this.target)},s}(e)}).call(mi)});var zr=F((yi,bi)=>{(function(){var i,e,t,r=function(o,s){for(var h in s)n.call(s,h)&&(o[h]=s[h]);function f(){this.constructor=o}return f.prototype=s.prototype,o.prototype=new f,o.__super__=s.prototype,o},n={}.hasOwnProperty;t=le(),i=Z(),bi.exports=e=function(o){r(s,o);function s(h){s.__super__.constructor.call(this,h),this.type=i.Dummy}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(h){return""},s}(t)}).call(yi)});var Ti=F((wi,vi)=>{(function(){var i;vi.exports=i=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(t){return this.nodes[t]||null},e}()}).call(wi)});var Pi=F((Di,Ei)=>{(function(){Ei.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(Di)});var le=F((Ci,xi)=>{(function(){var i,e,t,r,n,o,s,h,f,y,D,P,b,m,v,T,A,N,x,d={}.hasOwnProperty;x=we(),N=x.isObject,A=x.isFunction,T=x.isEmpty,v=x.getValue,h=null,t=null,r=null,n=null,o=null,b=null,m=null,P=null,s=null,e=null,D=null,f=null,i=null,xi.exports=y=function(){function u(a){this.parent=a,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,h||(h=Et(),t=Pt(),r=Ct(),n=xt(),o=At(),b=Lt(),m=_t(),P=Rt(),s=zr(),e=Z(),D=Ti(),f=Dt(),i=Pi())}return Object.defineProperty(u.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(u.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(u.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(u.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(u.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new D(this.children)),this.childNodeList}}),Object.defineProperty(u.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(u.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(u.prototype,"previousSibling",{get:function(){var a;return a=this.parent.children.indexOf(this),this.parent.children[a-1]||null}}),Object.defineProperty(u.prototype,"nextSibling",{get:function(){var a;return a=this.parent.children.indexOf(this),this.parent.children[a+1]||null}}),Object.defineProperty(u.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(u.prototype,"textContent",{get:function(){var a,g,S,l,O;if(this.nodeType===e.Element||this.nodeType===e.DocumentFragment){for(O="",l=this.children,g=0,S=l.length;g<S;g++)a=l[g],a.textContent&&(O+=a.textContent);return O}else return null},set:function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),u.prototype.setParent=function(a){var g,S,l,O,w;for(this.parent=a,a&&(this.options=a.options,this.stringify=a.stringify),O=this.children,w=[],S=0,l=O.length;S<l;S++)g=O[S],w.push(g.setParent(this));return w},u.prototype.element=function(a,g,S){var l,O,w,C,L,_,q,B,M,Y,V;if(_=null,g===null&&S==null&&(M=[{},null],g=M[0],S=M[1]),g==null&&(g={}),g=v(g),N(g)||(Y=[g,S],S=Y[0],g=Y[1]),a!=null&&(a=v(a)),Array.isArray(a))for(w=0,q=a.length;w<q;w++)O=a[w],_=this.element(O);else if(A(a))_=this.element(a.apply());else if(N(a)){for(L in a)if(!!d.call(a,L))if(V=a[L],A(V)&&(V=V.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&L.indexOf(this.stringify.convertAttKey)===0)_=this.attribute(L.substr(this.stringify.convertAttKey.length),V);else if(!this.options.separateArrayItems&&Array.isArray(V)&&T(V))_=this.dummy();else if(N(V)&&T(V))_=this.element(L);else if(!this.options.keepNullNodes&&V==null)_=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(V))for(C=0,B=V.length;C<B;C++)O=V[C],l={},l[L]=O,_=this.element(l);else N(V)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&L.indexOf(this.stringify.convertTextKey)===0?_=this.element(V):(_=this.element(L),_.element(V)):_=this.element(L,V)}else!this.options.keepNullNodes&&S===null?_=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&a.indexOf(this.stringify.convertTextKey)===0?_=this.text(S):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&a.indexOf(this.stringify.convertCDataKey)===0?_=this.cdata(S):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&a.indexOf(this.stringify.convertCommentKey)===0?_=this.comment(S):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&a.indexOf(this.stringify.convertRawKey)===0?_=this.raw(S):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&a.indexOf(this.stringify.convertPIKey)===0?_=this.instruction(a.substr(this.stringify.convertPIKey.length),S):_=this.node(a,g,S);if(_==null)throw new Error("Could not create any elements with: "+a+". "+this.debugInfo());return _},u.prototype.insertBefore=function(a,g,S){var l,O,w,C,L;if(a?.type)return w=a,C=g,w.setParent(this),C?(O=children.indexOf(C),L=children.splice(O),children.push(w),Array.prototype.push.apply(children,L)):children.push(w),w;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(a));return O=this.parent.children.indexOf(this),L=this.parent.children.splice(O),l=this.parent.element(a,g,S),Array.prototype.push.apply(this.parent.children,L),l},u.prototype.insertAfter=function(a,g,S){var l,O,w;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(a));return O=this.parent.children.indexOf(this),w=this.parent.children.splice(O+1),l=this.parent.element(a,g,S),Array.prototype.push.apply(this.parent.children,w),l},u.prototype.remove=function(){var a,g;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return a=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[a,a-a+1].concat(g=[])),this.parent},u.prototype.node=function(a,g,S){var l,O;return a!=null&&(a=v(a)),g||(g={}),g=v(g),N(g)||(O=[g,S],S=O[0],g=O[1]),l=new h(this,a,g),S!=null&&l.text(S),this.children.push(l),l},u.prototype.text=function(a){var g;return N(a)&&this.element(a),g=new m(this,a),this.children.push(g),this},u.prototype.cdata=function(a){var g;return g=new t(this,a),this.children.push(g),this},u.prototype.comment=function(a){var g;return g=new r(this,a),this.children.push(g),this},u.prototype.commentBefore=function(a){var g,S,l;return S=this.parent.children.indexOf(this),l=this.parent.children.splice(S),g=this.parent.comment(a),Array.prototype.push.apply(this.parent.children,l),this},u.prototype.commentAfter=function(a){var g,S,l;return S=this.parent.children.indexOf(this),l=this.parent.children.splice(S+1),g=this.parent.comment(a),Array.prototype.push.apply(this.parent.children,l),this},u.prototype.raw=function(a){var g;return g=new b(this,a),this.children.push(g),this},u.prototype.dummy=function(){var a;return a=new s(this),a},u.prototype.instruction=function(a,g){var S,l,O,w,C;if(a!=null&&(a=v(a)),g!=null&&(g=v(g)),Array.isArray(a))for(w=0,C=a.length;w<C;w++)S=a[w],this.instruction(S);else if(N(a))for(S in a)!d.call(a,S)||(l=a[S],this.instruction(S,l));else A(g)&&(g=g.apply()),O=new P(this,a,g),this.children.push(O);return this},u.prototype.instructionBefore=function(a,g){var S,l,O;return l=this.parent.children.indexOf(this),O=this.parent.children.splice(l),S=this.parent.instruction(a,g),Array.prototype.push.apply(this.parent.children,O),this},u.prototype.instructionAfter=function(a,g){var S,l,O;return l=this.parent.children.indexOf(this),O=this.parent.children.splice(l+1),S=this.parent.instruction(a,g),Array.prototype.push.apply(this.parent.children,O),this},u.prototype.declaration=function(a,g,S){var l,O;return l=this.document(),O=new n(l,a,g,S),l.children.length===0?l.children.unshift(O):l.children[0].type===e.Declaration?l.children[0]=O:l.children.unshift(O),l.root()||l},u.prototype.dtd=function(a,g){var S,l,O,w,C,L,_,q,B,M;for(l=this.document(),O=new o(l,a,g),B=l.children,w=C=0,_=B.length;C<_;w=++C)if(S=B[w],S.type===e.DocType)return l.children[w]=O,O;for(M=l.children,w=L=0,q=M.length;L<q;w=++L)if(S=M[w],S.isRoot)return l.children.splice(w,0,O),O;return l.children.push(O),O},u.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},u.prototype.root=function(){var a;for(a=this;a;){if(a.type===e.Document)return a.rootObject;if(a.isRoot)return a;a=a.parent}},u.prototype.document=function(){var a;for(a=this;a;){if(a.type===e.Document)return a;a=a.parent}},u.prototype.end=function(a){return this.document().end(a)},u.prototype.prev=function(){var a;if(a=this.parent.children.indexOf(this),a<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[a-1]},u.prototype.next=function(){var a;if(a=this.parent.children.indexOf(this),a===-1||a===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[a+1]},u.prototype.importDocument=function(a){var g;return g=a.root().clone(),g.parent=this,g.isRoot=!1,this.children.push(g),this},u.prototype.debugInfo=function(a){var g,S;return a=a||this.name,a==null&&!((g=this.parent)!=null&&g.name)?"":a==null?"parent: <"+this.parent.name+">":(S=this.parent)!=null&&S.name?"node: <"+a+">, parent: <"+this.parent.name+">":"node: <"+a+">"},u.prototype.ele=function(a,g,S){return this.element(a,g,S)},u.prototype.nod=function(a,g,S){return this.node(a,g,S)},u.prototype.txt=function(a){return this.text(a)},u.prototype.dat=function(a){return this.cdata(a)},u.prototype.com=function(a){return this.comment(a)},u.prototype.ins=function(a,g){return this.instruction(a,g)},u.prototype.doc=function(){return this.document()},u.prototype.dec=function(a,g,S){return this.declaration(a,g,S)},u.prototype.e=function(a,g,S){return this.element(a,g,S)},u.prototype.n=function(a,g,S){return this.node(a,g,S)},u.prototype.t=function(a){return this.text(a)},u.prototype.d=function(a){return this.cdata(a)},u.prototype.c=function(a){return this.comment(a)},u.prototype.r=function(a){return this.raw(a)},u.prototype.i=function(a,g){return this.instruction(a,g)},u.prototype.u=function(){return this.up()},u.prototype.importXMLBuilder=function(a){return this.importDocument(a)},u.prototype.replaceChild=function(a,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.removeChild=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.appendChild=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.hasChildNodes=function(){return this.children.length!==0},u.prototype.cloneNode=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.isSupported=function(a,g){return!0},u.prototype.hasAttributes=function(){return this.attribs.length!==0},u.prototype.compareDocumentPosition=function(a){var g,S;return g=this,g===a?0:this.document()!==a.document()?(S=i.Disconnected|i.ImplementationSpecific,Math.random()<.5?S|=i.Preceding:S|=i.Following,S):g.isAncestor(a)?i.Contains|i.Preceding:g.isDescendant(a)?i.Contains|i.Following:g.isPreceding(a)?i.Preceding:i.Following},u.prototype.isSameNode=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.lookupPrefix=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.isDefaultNamespace=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.lookupNamespaceURI=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.isEqualNode=function(a){var g,S,l;if(a.nodeType!==this.nodeType||a.children.length!==this.children.length)return!1;for(g=S=0,l=this.children.length-1;0<=l?S<=l:S>=l;g=0<=l?++S:--S)if(!this.children[g].isEqualNode(a.children[g]))return!1;return!0},u.prototype.getFeature=function(a,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.setUserData=function(a,g,S){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.getUserData=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.contains=function(a){return a?a===this||this.isDescendant(a):!1},u.prototype.isDescendant=function(a){var g,S,l,O,w;for(w=this.children,l=0,O=w.length;l<O;l++)if(g=w[l],a===g||(S=g.isDescendant(a),S))return!0;return!1},u.prototype.isAncestor=function(a){return a.isDescendant(this)},u.prototype.isPreceding=function(a){var g,S;return g=this.treePosition(a),S=this.treePosition(this),g===-1||S===-1?!1:g<S},u.prototype.isFollowing=function(a){var g,S;return g=this.treePosition(a),S=this.treePosition(this),g===-1||S===-1?!1:g>S},u.prototype.treePosition=function(a){var g,S;return S=0,g=!1,this.foreachTreeNode(this.document(),function(l){if(S++,!g&&l===a)return g=!0}),g?S:-1},u.prototype.foreachTreeNode=function(a,g){var S,l,O,w,C;for(a||(a=this.document()),w=a.children,l=0,O=w.length;l<O;l++){if(S=w[l],C=g(S))return C;if(C=this.foreachTreeNode(S,g),C)return C}},u}()}).call(Ci)});var Yr=F((Ii,Si)=>{(function(){var i,e=function(r,n){return function(){return r.apply(n,arguments)}},t={}.hasOwnProperty;Si.exports=i=function(){function r(n){this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this);var o,s,h;n||(n={}),this.options=n,this.options.version||(this.options.version="1.0"),s=n.stringify||{};for(o in s)!t.call(s,o)||(h=s[o],this[o]=h)}return r.prototype.name=function(n){return this.options.noValidation?n:this.assertLegalName(""+n||"")},r.prototype.text=function(n){return this.options.noValidation?n:this.assertLegalChar(this.textEscape(""+n||""))},r.prototype.cdata=function(n){return this.options.noValidation?n:(n=""+n||"",n=n.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(n))},r.prototype.comment=function(n){if(this.options.noValidation)return n;if(n=""+n||"",n.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+n);return this.assertLegalChar(n)},r.prototype.raw=function(n){return this.options.noValidation?n:""+n||""},r.prototype.attValue=function(n){return this.options.noValidation?n:this.assertLegalChar(this.attEscape(n=""+n||""))},r.prototype.insTarget=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},r.prototype.insValue=function(n){if(this.options.noValidation)return n;if(n=""+n||"",n.match(/\?>/))throw new Error("Invalid processing instruction value: "+n);return this.assertLegalChar(n)},r.prototype.xmlVersion=function(n){if(this.options.noValidation)return n;if(n=""+n||"",!n.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+n);return n},r.prototype.xmlEncoding=function(n){if(this.options.noValidation)return n;if(n=""+n||"",!n.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+n);return this.assertLegalChar(n)},r.prototype.xmlStandalone=function(n){return this.options.noValidation?n:n?"yes":"no"},r.prototype.dtdPubID=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},r.prototype.dtdSysID=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},r.prototype.dtdElementValue=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},r.prototype.dtdAttType=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},r.prototype.dtdAttDefault=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},r.prototype.dtdEntityValue=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},r.prototype.dtdNData=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},r.prototype.convertAttKey="@",r.prototype.convertPIKey="?",r.prototype.convertTextKey="#text",r.prototype.convertCDataKey="#cdata",r.prototype.convertCommentKey="#comment",r.prototype.convertRawKey="#raw",r.prototype.assertLegalChar=function(n){var o,s;if(this.options.noValidation)return n;if(o="",this.options.version==="1.0"){if(o=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,s=n.match(o))throw new Error("Invalid character in string: "+n+" at index "+s.index)}else if(this.options.version==="1.1"&&(o=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,s=n.match(o)))throw new Error("Invalid character in string: "+n+" at index "+s.index);return n},r.prototype.assertLegalName=function(n){var o;if(this.options.noValidation)return n;if(this.assertLegalChar(n),o=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!n.match(o))throw new Error("Invalid character in name");return n},r.prototype.textEscape=function(n){var o;return this.options.noValidation?n:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,n.replace(o,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},r.prototype.attEscape=function(n){var o;return this.options.noValidation?n:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,n.replace(o,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},r}()}).call(Ii)});var et=F((Oi,Ni)=>{(function(){Ni.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(Oi)});var Kr=F((Ai,Li)=>{(function(){var i,e,t,r,n,o,s,h,f,y,D,P,b,m,v,T,A,N={}.hasOwnProperty;A=we().assign,i=Z(),f=xt(),y=At(),t=Pt(),r=Ct(),P=Et(),m=Lt(),v=_t(),b=Rt(),D=zr(),n=It(),o=Ot(),s=St(),h=Nt(),e=et(),Li.exports=T=function(){function x(d){var u,a,g;d||(d={}),this.options=d,a=d.writer||{};for(u in a)!N.call(a,u)||(g=a[u],this["_"+u]=this[u],this[u]=g)}return x.prototype.filterOptions=function(d){var u,a,g,S,l,O,w,C;return d||(d={}),d=A({},this.options,d),u={writer:this},u.pretty=d.pretty||!1,u.allowEmpty=d.allowEmpty||!1,u.indent=(a=d.indent)!=null?a:"  ",u.newline=(g=d.newline)!=null?g:`
`,u.offset=(S=d.offset)!=null?S:0,u.dontPrettyTextNodes=(l=(O=d.dontPrettyTextNodes)!=null?O:d.dontprettytextnodes)!=null?l:0,u.spaceBeforeSlash=(w=(C=d.spaceBeforeSlash)!=null?C:d.spacebeforeslash)!=null?w:"",u.spaceBeforeSlash===!0&&(u.spaceBeforeSlash=" "),u.suppressPrettyCount=0,u.user={},u.state=e.None,u},x.prototype.indent=function(d,u,a){var g;return!u.pretty||u.suppressPrettyCount?"":u.pretty&&(g=(a||0)+u.offset+1,g>0)?new Array(g).join(u.indent):""},x.prototype.endline=function(d,u,a){return!u.pretty||u.suppressPrettyCount?"":u.newline},x.prototype.attribute=function(d,u,a){var g;return this.openAttribute(d,u,a),g=" "+d.name+'="'+d.value+'"',this.closeAttribute(d,u,a),g},x.prototype.cdata=function(d,u,a){var g;return this.openNode(d,u,a),u.state=e.OpenTag,g=this.indent(d,u,a)+"<![CDATA[",u.state=e.InsideTag,g+=d.value,u.state=e.CloseTag,g+="]]>"+this.endline(d,u,a),u.state=e.None,this.closeNode(d,u,a),g},x.prototype.comment=function(d,u,a){var g;return this.openNode(d,u,a),u.state=e.OpenTag,g=this.indent(d,u,a)+"<!-- ",u.state=e.InsideTag,g+=d.value,u.state=e.CloseTag,g+=" -->"+this.endline(d,u,a),u.state=e.None,this.closeNode(d,u,a),g},x.prototype.declaration=function(d,u,a){var g;return this.openNode(d,u,a),u.state=e.OpenTag,g=this.indent(d,u,a)+"<?xml",u.state=e.InsideTag,g+=' version="'+d.version+'"',d.encoding!=null&&(g+=' encoding="'+d.encoding+'"'),d.standalone!=null&&(g+=' standalone="'+d.standalone+'"'),u.state=e.CloseTag,g+=u.spaceBeforeSlash+"?>",g+=this.endline(d,u,a),u.state=e.None,this.closeNode(d,u,a),g},x.prototype.docType=function(d,u,a){var g,S,l,O,w;if(a||(a=0),this.openNode(d,u,a),u.state=e.OpenTag,O=this.indent(d,u,a),O+="<!DOCTYPE "+d.root().name,d.pubID&&d.sysID?O+=' PUBLIC "'+d.pubID+'" "'+d.sysID+'"':d.sysID&&(O+=' SYSTEM "'+d.sysID+'"'),d.children.length>0){for(O+=" [",O+=this.endline(d,u,a),u.state=e.InsideTag,w=d.children,S=0,l=w.length;S<l;S++)g=w[S],O+=this.writeChildNode(g,u,a+1);u.state=e.CloseTag,O+="]"}return u.state=e.CloseTag,O+=u.spaceBeforeSlash+">",O+=this.endline(d,u,a),u.state=e.None,this.closeNode(d,u,a),O},x.prototype.element=function(d,u,a){var g,S,l,O,w,C,L,_,q,B,M,Y,V,De;a||(a=0),B=!1,M="",this.openNode(d,u,a),u.state=e.OpenTag,M+=this.indent(d,u,a)+"<"+d.name,Y=d.attribs;for(q in Y)!N.call(Y,q)||(g=Y[q],M+=this.attribute(g,u,a));if(l=d.children.length,O=l===0?null:d.children[0],l===0||d.children.every(function(ie){return(ie.type===i.Text||ie.type===i.Raw)&&ie.value===""}))u.allowEmpty?(M+=">",u.state=e.CloseTag,M+="</"+d.name+">"+this.endline(d,u,a)):(u.state=e.CloseTag,M+=u.spaceBeforeSlash+"/>"+this.endline(d,u,a));else if(u.pretty&&l===1&&(O.type===i.Text||O.type===i.Raw)&&O.value!=null)M+=">",u.state=e.InsideTag,u.suppressPrettyCount++,B=!0,M+=this.writeChildNode(O,u,a+1),u.suppressPrettyCount--,B=!1,u.state=e.CloseTag,M+="</"+d.name+">"+this.endline(d,u,a);else{if(u.dontPrettyTextNodes){for(V=d.children,w=0,L=V.length;w<L;w++)if(S=V[w],(S.type===i.Text||S.type===i.Raw)&&S.value!=null){u.suppressPrettyCount++,B=!0;break}}for(M+=">"+this.endline(d,u,a),u.state=e.InsideTag,De=d.children,C=0,_=De.length;C<_;C++)S=De[C],M+=this.writeChildNode(S,u,a+1);u.state=e.CloseTag,M+=this.indent(d,u,a)+"</"+d.name+">",B&&u.suppressPrettyCount--,M+=this.endline(d,u,a),u.state=e.None}return this.closeNode(d,u,a),M},x.prototype.writeChildNode=function(d,u,a){switch(d.type){case i.CData:return this.cdata(d,u,a);case i.Comment:return this.comment(d,u,a);case i.Element:return this.element(d,u,a);case i.Raw:return this.raw(d,u,a);case i.Text:return this.text(d,u,a);case i.ProcessingInstruction:return this.processingInstruction(d,u,a);case i.Dummy:return"";case i.Declaration:return this.declaration(d,u,a);case i.DocType:return this.docType(d,u,a);case i.AttributeDeclaration:return this.dtdAttList(d,u,a);case i.ElementDeclaration:return this.dtdElement(d,u,a);case i.EntityDeclaration:return this.dtdEntity(d,u,a);case i.NotationDeclaration:return this.dtdNotation(d,u,a);default:throw new Error("Unknown XML node type: "+d.constructor.name)}},x.prototype.processingInstruction=function(d,u,a){var g;return this.openNode(d,u,a),u.state=e.OpenTag,g=this.indent(d,u,a)+"<?",u.state=e.InsideTag,g+=d.target,d.value&&(g+=" "+d.value),u.state=e.CloseTag,g+=u.spaceBeforeSlash+"?>",g+=this.endline(d,u,a),u.state=e.None,this.closeNode(d,u,a),g},x.prototype.raw=function(d,u,a){var g;return this.openNode(d,u,a),u.state=e.OpenTag,g=this.indent(d,u,a),u.state=e.InsideTag,g+=d.value,u.state=e.CloseTag,g+=this.endline(d,u,a),u.state=e.None,this.closeNode(d,u,a),g},x.prototype.text=function(d,u,a){var g;return this.openNode(d,u,a),u.state=e.OpenTag,g=this.indent(d,u,a),u.state=e.InsideTag,g+=d.value,u.state=e.CloseTag,g+=this.endline(d,u,a),u.state=e.None,this.closeNode(d,u,a),g},x.prototype.dtdAttList=function(d,u,a){var g;return this.openNode(d,u,a),u.state=e.OpenTag,g=this.indent(d,u,a)+"<!ATTLIST",u.state=e.InsideTag,g+=" "+d.elementName+" "+d.attributeName+" "+d.attributeType,d.defaultValueType!=="#DEFAULT"&&(g+=" "+d.defaultValueType),d.defaultValue&&(g+=' "'+d.defaultValue+'"'),u.state=e.CloseTag,g+=u.spaceBeforeSlash+">"+this.endline(d,u,a),u.state=e.None,this.closeNode(d,u,a),g},x.prototype.dtdElement=function(d,u,a){var g;return this.openNode(d,u,a),u.state=e.OpenTag,g=this.indent(d,u,a)+"<!ELEMENT",u.state=e.InsideTag,g+=" "+d.name+" "+d.value,u.state=e.CloseTag,g+=u.spaceBeforeSlash+">"+this.endline(d,u,a),u.state=e.None,this.closeNode(d,u,a),g},x.prototype.dtdEntity=function(d,u,a){var g;return this.openNode(d,u,a),u.state=e.OpenTag,g=this.indent(d,u,a)+"<!ENTITY",u.state=e.InsideTag,d.pe&&(g+=" %"),g+=" "+d.name,d.value?g+=' "'+d.value+'"':(d.pubID&&d.sysID?g+=' PUBLIC "'+d.pubID+'" "'+d.sysID+'"':d.sysID&&(g+=' SYSTEM "'+d.sysID+'"'),d.nData&&(g+=" NDATA "+d.nData)),u.state=e.CloseTag,g+=u.spaceBeforeSlash+">"+this.endline(d,u,a),u.state=e.None,this.closeNode(d,u,a),g},x.prototype.dtdNotation=function(d,u,a){var g;return this.openNode(d,u,a),u.state=e.OpenTag,g=this.indent(d,u,a)+"<!NOTATION",u.state=e.InsideTag,g+=" "+d.name,d.pubID&&d.sysID?g+=' PUBLIC "'+d.pubID+'" "'+d.sysID+'"':d.pubID?g+=' PUBLIC "'+d.pubID+'"':d.sysID&&(g+=' SYSTEM "'+d.sysID+'"'),u.state=e.CloseTag,g+=u.spaceBeforeSlash+">"+this.endline(d,u,a),u.state=e.None,this.closeNode(d,u,a),g},x.prototype.openNode=function(d,u,a){},x.prototype.closeNode=function(d,u,a){},x.prototype.openAttribute=function(d,u,a){},x.prototype.closeAttribute=function(d,u,a){},x}()}).call(Ai)});var Mt=F((_i,Ri)=>{(function(){var i,e,t=function(n,o){for(var s in o)r.call(o,s)&&(n[s]=o[s]);function h(){this.constructor=n}return h.prototype=o.prototype,n.prototype=new h,n.__super__=o.prototype,n},r={}.hasOwnProperty;e=Kr(),Ri.exports=i=function(n){t(o,n);function o(s){o.__super__.constructor.call(this,s)}return o.prototype.document=function(s,h){var f,y,D,P,b;for(h=this.filterOptions(h),P="",b=s.children,y=0,D=b.length;y<D;y++)f=b[y],P+=this.writeChildNode(f,h,0);return h.pretty&&P.slice(-h.newline.length)===h.newline&&(P=P.slice(0,-h.newline.length)),P},o}(e)}).call(_i)});var Qr=F((Mi,ki)=>{(function(){var i,e,t,r,n,o,s,h,f=function(D,P){for(var b in P)y.call(P,b)&&(D[b]=P[b]);function m(){this.constructor=D}return m.prototype=P.prototype,D.prototype=new m,D.__super__=P.prototype,D},y={}.hasOwnProperty;h=we().isPlainObject,t=Wr(),e=qn(),n=le(),i=Z(),s=Yr(),o=Mt(),ki.exports=r=function(D){f(P,D);function P(b){P.__super__.constructor.call(this,null),this.name="#document",this.type=i.Document,this.documentURI=null,this.domConfig=new e,b||(b={}),b.writer||(b.writer=new o),this.options=b,this.stringify=new s(b)}return Object.defineProperty(P.prototype,"implementation",{value:new t}),Object.defineProperty(P.prototype,"doctype",{get:function(){var b,m,v,T;for(T=this.children,m=0,v=T.length;m<v;m++)if(b=T[m],b.type===i.DocType)return b;return null}}),Object.defineProperty(P.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(P.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(P.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(P.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===i.Declaration?this.children[0].encoding:null}}),Object.defineProperty(P.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===i.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(P.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===i.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(P.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(P.prototype,"origin",{get:function(){return null}}),Object.defineProperty(P.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(P.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(P.prototype,"contentType",{get:function(){return null}}),P.prototype.end=function(b){var m;return m={},b?h(b)&&(m=b,b=this.options.writer):b=this.options.writer,b.document(this,b.filterOptions(m))},P.prototype.toString=function(b){return this.options.writer.document(this,this.options.writer.filterOptions(b))},P.prototype.createElement=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createTextNode=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createComment=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createCDATASection=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createProcessingInstruction=function(b,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createAttribute=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createEntityReference=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.getElementsByTagName=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.importNode=function(b,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createElementNS=function(b,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createAttributeNS=function(b,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.getElementsByTagNameNS=function(b,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.getElementById=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.adoptNode=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.renameNode=function(b,m,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.getElementsByClassName=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createEvent=function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createNodeIterator=function(b,m,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.createTreeWalker=function(b,m,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},P}(n)}).call(Mi)});var Bi=F((Fi,qi)=>{(function(){var i,e,t,r,n,o,s,h,f,y,D,P,b,m,v,T,A,N,x,d,u,a,g,S,l={}.hasOwnProperty;S=we(),a=S.isObject,u=S.isFunction,g=S.isPlainObject,d=S.getValue,i=Z(),P=Qr(),m=Et(),r=Pt(),n=Ct(),T=Lt(),x=_t(),v=Rt(),y=xt(),D=At(),o=It(),h=St(),s=Ot(),f=Nt(),t=Gr(),N=Yr(),A=Mt(),e=et(),qi.exports=b=function(){function O(w,C,L){var _;this.name="?xml",this.type=i.Document,w||(w={}),_={},w.writer?g(w.writer)&&(_=w.writer,w.writer=new A):w.writer=new A,this.options=w,this.writer=w.writer,this.writerOptions=this.writer.filterOptions(_),this.stringify=new N(w),this.onDataCallback=C||function(){},this.onEndCallback=L||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return O.prototype.createChildNode=function(w){var C,L,_,q,B,M,Y,V;switch(w.type){case i.CData:this.cdata(w.value);break;case i.Comment:this.comment(w.value);break;case i.Element:_={},Y=w.attribs;for(L in Y)!l.call(Y,L)||(C=Y[L],_[L]=C.value);this.node(w.name,_);break;case i.Dummy:this.dummy();break;case i.Raw:this.raw(w.value);break;case i.Text:this.text(w.value);break;case i.ProcessingInstruction:this.instruction(w.target,w.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+w.constructor.name)}for(V=w.children,B=0,M=V.length;B<M;B++)q=V[B],this.createChildNode(q),q.type===i.Element&&this.up();return this},O.prototype.dummy=function(){return this},O.prototype.node=function(w,C,L){var _;if(w==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(w));return this.openCurrent(),w=d(w),C==null&&(C={}),C=d(C),a(C)||(_=[C,L],L=_[0],C=_[1]),this.currentNode=new m(this,w,C),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,L!=null&&this.text(L),this},O.prototype.element=function(w,C,L){var _,q,B,M,Y,V;if(this.currentNode&&this.currentNode.type===i.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(w)||a(w)||u(w))for(M=this.options.noValidation,this.options.noValidation=!0,V=new P(this.options).element("TEMP_ROOT"),V.element(w),this.options.noValidation=M,Y=V.children,q=0,B=Y.length;q<B;q++)_=Y[q],this.createChildNode(_),_.type===i.Element&&this.up();else this.node(w,C,L);return this},O.prototype.attribute=function(w,C){var L,_;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(w));if(w!=null&&(w=d(w)),a(w))for(L in w)!l.call(w,L)||(_=w[L],this.attribute(L,_));else u(C)&&(C=C.apply()),this.options.keepNullAttributes&&C==null?this.currentNode.attribs[w]=new t(this,w,""):C!=null&&(this.currentNode.attribs[w]=new t(this,w,C));return this},O.prototype.text=function(w){var C;return this.openCurrent(),C=new x(this,w),this.onData(this.writer.text(C,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.cdata=function(w){var C;return this.openCurrent(),C=new r(this,w),this.onData(this.writer.cdata(C,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.comment=function(w){var C;return this.openCurrent(),C=new n(this,w),this.onData(this.writer.comment(C,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.raw=function(w){var C;return this.openCurrent(),C=new T(this,w),this.onData(this.writer.raw(C,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.instruction=function(w,C){var L,_,q,B,M;if(this.openCurrent(),w!=null&&(w=d(w)),C!=null&&(C=d(C)),Array.isArray(w))for(L=0,B=w.length;L<B;L++)_=w[L],this.instruction(_);else if(a(w))for(_ in w)!l.call(w,_)||(q=w[_],this.instruction(_,q));else u(C)&&(C=C.apply()),M=new v(this,w,C),this.onData(this.writer.processingInstruction(M,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},O.prototype.declaration=function(w,C,L){var _;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return _=new y(this,w,C,L),this.onData(this.writer.declaration(_,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.doctype=function(w,C,L){if(this.openCurrent(),w==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new D(this,C,L),this.currentNode.rootNodeName=w,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},O.prototype.dtdElement=function(w,C){var L;return this.openCurrent(),L=new s(this,w,C),this.onData(this.writer.dtdElement(L,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.attList=function(w,C,L,_,q){var B;return this.openCurrent(),B=new o(this,w,C,L,_,q),this.onData(this.writer.dtdAttList(B,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.entity=function(w,C){var L;return this.openCurrent(),L=new h(this,!1,w,C),this.onData(this.writer.dtdEntity(L,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.pEntity=function(w,C){var L;return this.openCurrent(),L=new h(this,!0,w,C),this.onData(this.writer.dtdEntity(L,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.notation=function(w,C){var L;return this.openCurrent(),L=new f(this,w,C),this.onData(this.writer.dtdNotation(L,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},O.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},O.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},O.prototype.openNode=function(w){var C,L,_,q;if(!w.isOpen){if(!this.root&&this.currentLevel===0&&w.type===i.Element&&(this.root=w),L="",w.type===i.Element){this.writerOptions.state=e.OpenTag,L=this.writer.indent(w,this.writerOptions,this.currentLevel)+"<"+w.name,q=w.attribs;for(_ in q)!l.call(q,_)||(C=q[_],L+=this.writer.attribute(C,this.writerOptions,this.currentLevel));L+=(w.children?">":"/>")+this.writer.endline(w,this.writerOptions,this.currentLevel),this.writerOptions.state=e.InsideTag}else this.writerOptions.state=e.OpenTag,L=this.writer.indent(w,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+w.rootNodeName,w.pubID&&w.sysID?L+=' PUBLIC "'+w.pubID+'" "'+w.sysID+'"':w.sysID&&(L+=' SYSTEM "'+w.sysID+'"'),w.children?(L+=" [",this.writerOptions.state=e.InsideTag):(this.writerOptions.state=e.CloseTag,L+=">"),L+=this.writer.endline(w,this.writerOptions,this.currentLevel);return this.onData(L,this.currentLevel),w.isOpen=!0}},O.prototype.closeNode=function(w){var C;if(!w.isClosed)return C="",this.writerOptions.state=e.CloseTag,w.type===i.Element?C=this.writer.indent(w,this.writerOptions,this.currentLevel)+"</"+w.name+">"+this.writer.endline(w,this.writerOptions,this.currentLevel):C=this.writer.indent(w,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(w,this.writerOptions,this.currentLevel),this.writerOptions.state=e.None,this.onData(C,this.currentLevel),w.isClosed=!0},O.prototype.onData=function(w,C){return this.documentStarted=!0,this.onDataCallback(w,C+1)},O.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},O.prototype.debugInfo=function(w){return w==null?"":"node: <"+w+">"},O.prototype.ele=function(){return this.element.apply(this,arguments)},O.prototype.nod=function(w,C,L){return this.node(w,C,L)},O.prototype.txt=function(w){return this.text(w)},O.prototype.dat=function(w){return this.cdata(w)},O.prototype.com=function(w){return this.comment(w)},O.prototype.ins=function(w,C){return this.instruction(w,C)},O.prototype.dec=function(w,C,L){return this.declaration(w,C,L)},O.prototype.dtd=function(w,C,L){return this.doctype(w,C,L)},O.prototype.e=function(w,C,L){return this.element(w,C,L)},O.prototype.n=function(w,C,L){return this.node(w,C,L)},O.prototype.t=function(w){return this.text(w)},O.prototype.d=function(w){return this.cdata(w)},O.prototype.c=function(w){return this.comment(w)},O.prototype.r=function(w){return this.raw(w)},O.prototype.i=function(w,C){return this.instruction(w,C)},O.prototype.att=function(){return this.currentNode&&this.currentNode.type===i.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},O.prototype.a=function(){return this.currentNode&&this.currentNode.type===i.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},O.prototype.ent=function(w,C){return this.entity(w,C)},O.prototype.pent=function(w,C){return this.pEntity(w,C)},O.prototype.not=function(w,C){return this.notation(w,C)},O}()}).call(Fi)});var Xi=F((Vi,ji)=>{(function(){var i,e,t,r,n=function(s,h){for(var f in h)o.call(h,f)&&(s[f]=h[f]);function y(){this.constructor=s}return y.prototype=h.prototype,s.prototype=new y,s.__super__=h.prototype,s},o={}.hasOwnProperty;i=Z(),r=Kr(),e=et(),ji.exports=t=function(s){n(h,s);function h(f,y){this.stream=f,h.__super__.constructor.call(this,y)}return h.prototype.endline=function(f,y,D){return f.isLastRootNode&&y.state===e.CloseTag?"":h.__super__.endline.call(this,f,y,D)},h.prototype.document=function(f,y){var D,P,b,m,v,T,A,N,x;for(A=f.children,P=b=0,v=A.length;b<v;P=++b)D=A[P],D.isLastRootNode=P===f.children.length-1;for(y=this.filterOptions(y),N=f.children,x=[],m=0,T=N.length;m<T;m++)D=N[m],x.push(this.writeChildNode(D,y,0));return x},h.prototype.attribute=function(f,y,D){return this.stream.write(h.__super__.attribute.call(this,f,y,D))},h.prototype.cdata=function(f,y,D){return this.stream.write(h.__super__.cdata.call(this,f,y,D))},h.prototype.comment=function(f,y,D){return this.stream.write(h.__super__.comment.call(this,f,y,D))},h.prototype.declaration=function(f,y,D){return this.stream.write(h.__super__.declaration.call(this,f,y,D))},h.prototype.docType=function(f,y,D){var P,b,m,v;if(D||(D=0),this.openNode(f,y,D),y.state=e.OpenTag,this.stream.write(this.indent(f,y,D)),this.stream.write("<!DOCTYPE "+f.root().name),f.pubID&&f.sysID?this.stream.write(' PUBLIC "'+f.pubID+'" "'+f.sysID+'"'):f.sysID&&this.stream.write(' SYSTEM "'+f.sysID+'"'),f.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(f,y,D)),y.state=e.InsideTag,v=f.children,b=0,m=v.length;b<m;b++)P=v[b],this.writeChildNode(P,y,D+1);y.state=e.CloseTag,this.stream.write("]")}return y.state=e.CloseTag,this.stream.write(y.spaceBeforeSlash+">"),this.stream.write(this.endline(f,y,D)),y.state=e.None,this.closeNode(f,y,D)},h.prototype.element=function(f,y,D){var P,b,m,v,T,A,N,x,d,u;D||(D=0),this.openNode(f,y,D),y.state=e.OpenTag,this.stream.write(this.indent(f,y,D)+"<"+f.name),d=f.attribs;for(N in d)!o.call(d,N)||(P=d[N],this.attribute(P,y,D));if(m=f.children.length,v=m===0?null:f.children[0],m===0||f.children.every(function(a){return(a.type===i.Text||a.type===i.Raw)&&a.value===""}))y.allowEmpty?(this.stream.write(">"),y.state=e.CloseTag,this.stream.write("</"+f.name+">")):(y.state=e.CloseTag,this.stream.write(y.spaceBeforeSlash+"/>"));else if(y.pretty&&m===1&&(v.type===i.Text||v.type===i.Raw)&&v.value!=null)this.stream.write(">"),y.state=e.InsideTag,y.suppressPrettyCount++,x=!0,this.writeChildNode(v,y,D+1),y.suppressPrettyCount--,x=!1,y.state=e.CloseTag,this.stream.write("</"+f.name+">");else{for(this.stream.write(">"+this.endline(f,y,D)),y.state=e.InsideTag,u=f.children,T=0,A=u.length;T<A;T++)b=u[T],this.writeChildNode(b,y,D+1);y.state=e.CloseTag,this.stream.write(this.indent(f,y,D)+"</"+f.name+">")}return this.stream.write(this.endline(f,y,D)),y.state=e.None,this.closeNode(f,y,D)},h.prototype.processingInstruction=function(f,y,D){return this.stream.write(h.__super__.processingInstruction.call(this,f,y,D))},h.prototype.raw=function(f,y,D){return this.stream.write(h.__super__.raw.call(this,f,y,D))},h.prototype.text=function(f,y,D){return this.stream.write(h.__super__.text.call(this,f,y,D))},h.prototype.dtdAttList=function(f,y,D){return this.stream.write(h.__super__.dtdAttList.call(this,f,y,D))},h.prototype.dtdElement=function(f,y,D){return this.stream.write(h.__super__.dtdElement.call(this,f,y,D))},h.prototype.dtdEntity=function(f,y,D){return this.stream.write(h.__super__.dtdEntity.call(this,f,y,D))},h.prototype.dtdNotation=function(f,y,D){return this.stream.write(h.__super__.dtdNotation.call(this,f,y,D))},h}(r)}).call(Vi)});var Hi=F((Ui,Re)=>{(function(){var i,e,t,r,n,o,s,h,f,y;y=we(),h=y.assign,f=y.isFunction,t=Wr(),r=Qr(),n=Bi(),s=Mt(),o=Xi(),i=Z(),e=et(),Re.exports.create=function(D,P,b,m){var v,T;if(D==null)throw new Error("Root element needs a name.");return m=h({},P,b,m),v=new r(m),T=v.element(D),m.headless||(v.declaration(m),(m.pubID!=null||m.sysID!=null)&&v.dtd(m)),T},Re.exports.begin=function(D,P,b){var m;return f(D)&&(m=[D,P],P=m[0],b=m[1],D={}),P?new n(D,P,b):new r(D)},Re.exports.stringWriter=function(D){return new s(D)},Re.exports.streamWriter=function(D,P){return new o(D,P)},Re.exports.implementation=new t,Re.exports.nodeType=i,Re.exports.writerState=e}).call(Ui)});var $i=F(Zr=>{(function(){"use strict";var i,e,t,r,n,o={}.hasOwnProperty;i=Hi(),e=Tt().defaults,r=function(s){return typeof s=="string"&&(s.indexOf("&")>=0||s.indexOf(">")>=0||s.indexOf("<")>=0)},n=function(s){return"<![CDATA["+t(s)+"]]>"},t=function(s){return s.replace("]]>","]]]]><![CDATA[>")},Zr.Builder=function(){function s(h){var f,y,D;this.options={},y=e["0.2"];for(f in y)!o.call(y,f)||(D=y[f],this.options[f]=D);for(f in h)!o.call(h,f)||(D=h[f],this.options[f]=D)}return s.prototype.buildObject=function(h){var f,y,D,P,b;return f=this.options.attrkey,y=this.options.charkey,Object.keys(h).length===1&&this.options.rootName===e["0.2"].rootName?(b=Object.keys(h)[0],h=h[b]):b=this.options.rootName,D=function(m){return function(v,T){var A,N,x,d,u,a;if(typeof T!="object")m.options.cdata&&r(T)?v.raw(n(T)):v.txt(T);else if(Array.isArray(T)){for(d in T)if(!!o.call(T,d)){N=T[d];for(u in N)x=N[u],v=D(v.ele(u),x).up()}}else for(u in T)if(!!o.call(T,u))if(N=T[u],u===f){if(typeof N=="object")for(A in N)a=N[A],v=v.att(A,a)}else if(u===y)m.options.cdata&&r(N)?v=v.raw(n(N)):v=v.txt(N);else if(Array.isArray(N))for(d in N)!o.call(N,d)||(x=N[d],typeof x=="string"?m.options.cdata&&r(x)?v=v.ele(u).raw(n(x)).up():v=v.ele(u,x).up():v=D(v.ele(u),x).up());else typeof N=="object"?v=D(v.ele(u),N).up():typeof N=="string"&&m.options.cdata&&r(N)?v=v.ele(u).raw(n(N)).up():(N==null&&(N=""),v=v.ele(u,N.toString()).up());return v}}(this),P=i.create(b,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),D(P,h).end(this.options.renderOpts)},s}()}).call(Zr)});var Wi=F(kt=>{(function(i){i.parser=function(p,c){return new t(p,c)},i.SAXParser=t,i.SAXStream=y,i.createStream=f,i.MAX_BUFFER_LENGTH=64*1024;var e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];i.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function t(p,c){if(!(this instanceof t))return new t(p,c);var I=this;n(I),I.q=I.c="",I.bufferCheckPosition=i.MAX_BUFFER_LENGTH,I.opt=c||{},I.opt.lowercase=I.opt.lowercase||I.opt.lowercasetags,I.looseCase=I.opt.lowercase?"toLowerCase":"toUpperCase",I.tags=[],I.closed=I.closedRoot=I.sawRoot=!1,I.tag=I.error=null,I.strict=!!p,I.noscript=!!(p||I.opt.noscript),I.state=l.BEGIN,I.strictEntities=I.opt.strictEntities,I.ENTITIES=I.strictEntities?Object.create(i.XML_ENTITIES):Object.create(i.ENTITIES),I.attribList=[],I.opt.xmlns&&(I.ns=Object.create(v)),I.trackPosition=I.opt.position!==!1,I.trackPosition&&(I.position=I.line=I.column=0),w(I,"onready")}Object.create||(Object.create=function(p){function c(){}c.prototype=p;var I=new c;return I}),Object.keys||(Object.keys=function(p){var c=[];for(var I in p)p.hasOwnProperty(I)&&c.push(I);return c});function r(p){for(var c=Math.max(i.MAX_BUFFER_LENGTH,10),I=0,E=0,j=e.length;E<j;E++){var G=p[e[E]].length;if(G>c)switch(e[E]){case"textNode":L(p);break;case"cdata":C(p,"oncdata",p.cdata),p.cdata="";break;case"script":C(p,"onscript",p.script),p.script="";break;default:q(p,"Max buffer length exceeded: "+e[E])}I=Math.max(I,G)}var $=i.MAX_BUFFER_LENGTH-I;p.bufferCheckPosition=$+p.position}function n(p){for(var c=0,I=e.length;c<I;c++)p[e[c]]=""}function o(p){L(p),p.cdata!==""&&(C(p,"oncdata",p.cdata),p.cdata=""),p.script!==""&&(C(p,"onscript",p.script),p.script="")}t.prototype={end:function(){B(this)},write:fe,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var s;try{s=require("stream").Stream}catch{s=function(){}}var h=i.EVENTS.filter(function(p){return p!=="error"&&p!=="end"});function f(p,c){return new y(p,c)}function y(p,c){if(!(this instanceof y))return new y(p,c);s.apply(this),this._parser=new t(p,c),this.writable=!0,this.readable=!0;var I=this;this._parser.onend=function(){I.emit("end")},this._parser.onerror=function(E){I.emit("error",E),I._parser.error=null},this._decoder=null,h.forEach(function(E){Object.defineProperty(I,"on"+E,{get:function(){return I._parser["on"+E]},set:function(j){if(!j)return I.removeAllListeners(E),I._parser["on"+E]=j,j;I.on(E,j)},enumerable:!0,configurable:!1})})}y.prototype=Object.create(s.prototype,{constructor:{value:y}}),y.prototype.write=function(p){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(p)){if(!this._decoder){var c=require("string_decoder").StringDecoder;this._decoder=new c("utf8")}p=this._decoder.write(p)}return this._parser.write(p.toString()),this.emit("data",p),!0},y.prototype.end=function(p){return p&&p.length&&this.write(p),this._parser.end(),!0},y.prototype.on=function(p,c){var I=this;return!I._parser["on"+p]&&h.indexOf(p)!==-1&&(I._parser["on"+p]=function(){var E=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);E.splice(0,0,p),I.emit.apply(I,E)}),s.prototype.on.call(I,p,c)};var D="[CDATA[",P="DOCTYPE",b="http://www.w3.org/XML/1998/namespace",m="http://www.w3.org/2000/xmlns/",v={xml:b,xmlns:m},T=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,A=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,N=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,x=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function d(p){return p===" "||p===`
`||p==="\r"||p==="	"}function u(p){return p==='"'||p==="'"}function a(p){return p===">"||d(p)}function g(p,c){return p.test(c)}function S(p,c){return!g(p,c)}var l=0;i.STATE={BEGIN:l++,BEGIN_WHITESPACE:l++,TEXT:l++,TEXT_ENTITY:l++,OPEN_WAKA:l++,SGML_DECL:l++,SGML_DECL_QUOTED:l++,DOCTYPE:l++,DOCTYPE_QUOTED:l++,DOCTYPE_DTD:l++,DOCTYPE_DTD_QUOTED:l++,COMMENT_STARTING:l++,COMMENT:l++,COMMENT_ENDING:l++,COMMENT_ENDED:l++,CDATA:l++,CDATA_ENDING:l++,CDATA_ENDING_2:l++,PROC_INST:l++,PROC_INST_BODY:l++,PROC_INST_ENDING:l++,OPEN_TAG:l++,OPEN_TAG_SLASH:l++,ATTRIB:l++,ATTRIB_NAME:l++,ATTRIB_NAME_SAW_WHITE:l++,ATTRIB_VALUE:l++,ATTRIB_VALUE_QUOTED:l++,ATTRIB_VALUE_CLOSED:l++,ATTRIB_VALUE_UNQUOTED:l++,ATTRIB_VALUE_ENTITY_Q:l++,ATTRIB_VALUE_ENTITY_U:l++,CLOSE_TAG:l++,CLOSE_TAG_SAW_WHITE:l++,SCRIPT:l++,SCRIPT_ENDING:l++},i.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},i.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(i.ENTITIES).forEach(function(p){var c=i.ENTITIES[p],I=typeof c=="number"?String.fromCharCode(c):c;i.ENTITIES[p]=I});for(var O in i.STATE)i.STATE[i.STATE[O]]=O;l=i.STATE;function w(p,c,I){p[c]&&p[c](I)}function C(p,c,I){p.textNode&&L(p),w(p,c,I)}function L(p){p.textNode=_(p.opt,p.textNode),p.textNode&&w(p,"ontext",p.textNode),p.textNode=""}function _(p,c){return p.trim&&(c=c.trim()),p.normalize&&(c=c.replace(/\s+/g," ")),c}function q(p,c){return L(p),p.trackPosition&&(c+=`
Line: `+p.line+`
Column: `+p.column+`
Char: `+p.c),c=new Error(c),p.error=c,w(p,"onerror",c),p}function B(p){return p.sawRoot&&!p.closedRoot&&M(p,"Unclosed root tag"),p.state!==l.BEGIN&&p.state!==l.BEGIN_WHITESPACE&&p.state!==l.TEXT&&q(p,"Unexpected end"),L(p),p.c="",p.closed=!0,w(p,"onend"),t.call(p,p.strict,p.opt),p}function M(p,c){if(typeof p!="object"||!(p instanceof t))throw new Error("bad call to strictFail");p.strict&&q(p,c)}function Y(p){p.strict||(p.tagName=p.tagName[p.looseCase]());var c=p.tags[p.tags.length-1]||p,I=p.tag={name:p.tagName,attributes:{}};p.opt.xmlns&&(I.ns=c.ns),p.attribList.length=0,C(p,"onopentagstart",I)}function V(p,c){var I=p.indexOf(":"),E=I<0?["",p]:p.split(":"),j=E[0],G=E[1];return c&&p==="xmlns"&&(j="xmlns",G=""),{prefix:j,local:G}}function De(p){if(p.strict||(p.attribName=p.attribName[p.looseCase]()),p.attribList.indexOf(p.attribName)!==-1||p.tag.attributes.hasOwnProperty(p.attribName)){p.attribName=p.attribValue="";return}if(p.opt.xmlns){var c=V(p.attribName,!0),I=c.prefix,E=c.local;if(I==="xmlns")if(E==="xml"&&p.attribValue!==b)M(p,"xml: prefix must be bound to "+b+`
Actual: `+p.attribValue);else if(E==="xmlns"&&p.attribValue!==m)M(p,"xmlns: prefix must be bound to "+m+`
Actual: `+p.attribValue);else{var j=p.tag,G=p.tags[p.tags.length-1]||p;j.ns===G.ns&&(j.ns=Object.create(G.ns)),j.ns[E]=p.attribValue}p.attribList.push([p.attribName,p.attribValue])}else p.tag.attributes[p.attribName]=p.attribValue,C(p,"onattribute",{name:p.attribName,value:p.attribValue});p.attribName=p.attribValue=""}function ie(p,c){if(p.opt.xmlns){var I=p.tag,E=V(p.tagName);I.prefix=E.prefix,I.local=E.local,I.uri=I.ns[E.prefix]||"",I.prefix&&!I.uri&&(M(p,"Unbound namespace prefix: "+JSON.stringify(p.tagName)),I.uri=E.prefix);var j=p.tags[p.tags.length-1]||p;I.ns&&j.ns!==I.ns&&Object.keys(I.ns).forEach(function(an){C(p,"onopennamespace",{prefix:an,uri:I.ns[an]})});for(var G=0,$=p.attribList.length;G<$;G++){var Q=p.attribList[G],ae=Q[0],Ee=Q[1],J=V(ae,!0),z=J.prefix,Pe=J.local,sn=z===""?"":I.ns[z]||"",ur={name:ae,value:Ee,prefix:z,local:Pe,uri:sn};z&&z!=="xmlns"&&!sn&&(M(p,"Unbound namespace prefix: "+JSON.stringify(z)),ur.uri=z),p.tag.attributes[ae]=ur,C(p,"onattribute",ur)}p.attribList.length=0}p.tag.isSelfClosing=!!c,p.sawRoot=!0,p.tags.push(p.tag),C(p,"onopentag",p.tag),c||(!p.noscript&&p.tagName.toLowerCase()==="script"?p.state=l.SCRIPT:p.state=l.TEXT,p.tag=null,p.tagName=""),p.attribName=p.attribValue="",p.attribList.length=0}function Ve(p){if(!p.tagName){M(p,"Weird empty close tag."),p.textNode+="</>",p.state=l.TEXT;return}if(p.script){if(p.tagName!=="script"){p.script+="</"+p.tagName+">",p.tagName="",p.state=l.SCRIPT;return}C(p,"onscript",p.script),p.script=""}var c=p.tags.length,I=p.tagName;p.strict||(I=I[p.looseCase]());for(var E=I;c--;){var j=p.tags[c];if(j.name!==E)M(p,"Unexpected close tag");else break}if(c<0){M(p,"Unmatched closing tag: "+p.tagName),p.textNode+="</"+p.tagName+">",p.state=l.TEXT;return}p.tagName=I;for(var G=p.tags.length;G-- >c;){var $=p.tag=p.tags.pop();p.tagName=p.tag.name,C(p,"onclosetag",p.tagName);var Q={};for(var ae in $.ns)Q[ae]=$.ns[ae];var Ee=p.tags[p.tags.length-1]||p;p.opt.xmlns&&$.ns!==Ee.ns&&Object.keys($.ns).forEach(function(J){var z=$.ns[J];C(p,"onclosenamespace",{prefix:J,uri:z})})}c===0&&(p.closedRoot=!0),p.tagName=p.attribValue=p.attribName="",p.attribList.length=0,p.state=l.TEXT}function ot(p){var c=p.entity,I=c.toLowerCase(),E,j="";return p.ENTITIES[c]?p.ENTITIES[c]:p.ENTITIES[I]?p.ENTITIES[I]:(c=I,c.charAt(0)==="#"&&(c.charAt(1)==="x"?(c=c.slice(2),E=parseInt(c,16),j=E.toString(16)):(c=c.slice(1),E=parseInt(c,10),j=E.toString(10))),c=c.replace(/^0+/,""),isNaN(E)||j.toLowerCase()!==c?(M(p,"Invalid character entity"),"&"+p.entity+";"):String.fromCodePoint(E))}function ze(p,c){c==="<"?(p.state=l.OPEN_WAKA,p.startTagPosition=p.position):d(c)||(M(p,"Non-whitespace before first tag."),p.textNode=c,p.state=l.TEXT)}function Ye(p,c){var I="";return c<p.length&&(I=p.charAt(c)),I}function fe(p){var c=this;if(this.error)throw this.error;if(c.closed)return q(c,"Cannot write after close. Assign an onready handler.");if(p===null)return B(c);typeof p=="object"&&(p=p.toString());for(var I=0,E="";E=Ye(p,I++),c.c=E,!!E;)switch(c.trackPosition&&(c.position++,E===`
`?(c.line++,c.column=0):c.column++),c.state){case l.BEGIN:if(c.state=l.BEGIN_WHITESPACE,E==="\uFEFF")continue;ze(c,E);continue;case l.BEGIN_WHITESPACE:ze(c,E);continue;case l.TEXT:if(c.sawRoot&&!c.closedRoot){for(var j=I-1;E&&E!=="<"&&E!=="&";)E=Ye(p,I++),E&&c.trackPosition&&(c.position++,E===`
`?(c.line++,c.column=0):c.column++);c.textNode+=p.substring(j,I-1)}E==="<"&&!(c.sawRoot&&c.closedRoot&&!c.strict)?(c.state=l.OPEN_WAKA,c.startTagPosition=c.position):(!d(E)&&(!c.sawRoot||c.closedRoot)&&M(c,"Text data outside of root node."),E==="&"?c.state=l.TEXT_ENTITY:c.textNode+=E);continue;case l.SCRIPT:E==="<"?c.state=l.SCRIPT_ENDING:c.script+=E;continue;case l.SCRIPT_ENDING:E==="/"?c.state=l.CLOSE_TAG:(c.script+="<"+E,c.state=l.SCRIPT);continue;case l.OPEN_WAKA:if(E==="!")c.state=l.SGML_DECL,c.sgmlDecl="";else if(!d(E))if(g(T,E))c.state=l.OPEN_TAG,c.tagName=E;else if(E==="/")c.state=l.CLOSE_TAG,c.tagName="";else if(E==="?")c.state=l.PROC_INST,c.procInstName=c.procInstBody="";else{if(M(c,"Unencoded <"),c.startTagPosition+1<c.position){var G=c.position-c.startTagPosition;E=new Array(G).join(" ")+E}c.textNode+="<"+E,c.state=l.TEXT}continue;case l.SGML_DECL:(c.sgmlDecl+E).toUpperCase()===D?(C(c,"onopencdata"),c.state=l.CDATA,c.sgmlDecl="",c.cdata=""):c.sgmlDecl+E==="--"?(c.state=l.COMMENT,c.comment="",c.sgmlDecl=""):(c.sgmlDecl+E).toUpperCase()===P?(c.state=l.DOCTYPE,(c.doctype||c.sawRoot)&&M(c,"Inappropriately located doctype declaration"),c.doctype="",c.sgmlDecl=""):E===">"?(C(c,"onsgmldeclaration",c.sgmlDecl),c.sgmlDecl="",c.state=l.TEXT):(u(E)&&(c.state=l.SGML_DECL_QUOTED),c.sgmlDecl+=E);continue;case l.SGML_DECL_QUOTED:E===c.q&&(c.state=l.SGML_DECL,c.q=""),c.sgmlDecl+=E;continue;case l.DOCTYPE:E===">"?(c.state=l.TEXT,C(c,"ondoctype",c.doctype),c.doctype=!0):(c.doctype+=E,E==="["?c.state=l.DOCTYPE_DTD:u(E)&&(c.state=l.DOCTYPE_QUOTED,c.q=E));continue;case l.DOCTYPE_QUOTED:c.doctype+=E,E===c.q&&(c.q="",c.state=l.DOCTYPE);continue;case l.DOCTYPE_DTD:c.doctype+=E,E==="]"?c.state=l.DOCTYPE:u(E)&&(c.state=l.DOCTYPE_DTD_QUOTED,c.q=E);continue;case l.DOCTYPE_DTD_QUOTED:c.doctype+=E,E===c.q&&(c.state=l.DOCTYPE_DTD,c.q="");continue;case l.COMMENT:E==="-"?c.state=l.COMMENT_ENDING:c.comment+=E;continue;case l.COMMENT_ENDING:E==="-"?(c.state=l.COMMENT_ENDED,c.comment=_(c.opt,c.comment),c.comment&&C(c,"oncomment",c.comment),c.comment=""):(c.comment+="-"+E,c.state=l.COMMENT);continue;case l.COMMENT_ENDED:E!==">"?(M(c,"Malformed comment"),c.comment+="--"+E,c.state=l.COMMENT):c.state=l.TEXT;continue;case l.CDATA:E==="]"?c.state=l.CDATA_ENDING:c.cdata+=E;continue;case l.CDATA_ENDING:E==="]"?c.state=l.CDATA_ENDING_2:(c.cdata+="]"+E,c.state=l.CDATA);continue;case l.CDATA_ENDING_2:E===">"?(c.cdata&&C(c,"oncdata",c.cdata),C(c,"onclosecdata"),c.cdata="",c.state=l.TEXT):E==="]"?c.cdata+="]":(c.cdata+="]]"+E,c.state=l.CDATA);continue;case l.PROC_INST:E==="?"?c.state=l.PROC_INST_ENDING:d(E)?c.state=l.PROC_INST_BODY:c.procInstName+=E;continue;case l.PROC_INST_BODY:if(!c.procInstBody&&d(E))continue;E==="?"?c.state=l.PROC_INST_ENDING:c.procInstBody+=E;continue;case l.PROC_INST_ENDING:E===">"?(C(c,"onprocessinginstruction",{name:c.procInstName,body:c.procInstBody}),c.procInstName=c.procInstBody="",c.state=l.TEXT):(c.procInstBody+="?"+E,c.state=l.PROC_INST_BODY);continue;case l.OPEN_TAG:g(A,E)?c.tagName+=E:(Y(c),E===">"?ie(c):E==="/"?c.state=l.OPEN_TAG_SLASH:(d(E)||M(c,"Invalid character in tag name"),c.state=l.ATTRIB));continue;case l.OPEN_TAG_SLASH:E===">"?(ie(c,!0),Ve(c)):(M(c,"Forward-slash in opening tag not followed by >"),c.state=l.ATTRIB);continue;case l.ATTRIB:if(d(E))continue;E===">"?ie(c):E==="/"?c.state=l.OPEN_TAG_SLASH:g(T,E)?(c.attribName=E,c.attribValue="",c.state=l.ATTRIB_NAME):M(c,"Invalid attribute name");continue;case l.ATTRIB_NAME:E==="="?c.state=l.ATTRIB_VALUE:E===">"?(M(c,"Attribute without value"),c.attribValue=c.attribName,De(c),ie(c)):d(E)?c.state=l.ATTRIB_NAME_SAW_WHITE:g(A,E)?c.attribName+=E:M(c,"Invalid attribute name");continue;case l.ATTRIB_NAME_SAW_WHITE:if(E==="=")c.state=l.ATTRIB_VALUE;else{if(d(E))continue;M(c,"Attribute without value"),c.tag.attributes[c.attribName]="",c.attribValue="",C(c,"onattribute",{name:c.attribName,value:""}),c.attribName="",E===">"?ie(c):g(T,E)?(c.attribName=E,c.state=l.ATTRIB_NAME):(M(c,"Invalid attribute name"),c.state=l.ATTRIB)}continue;case l.ATTRIB_VALUE:if(d(E))continue;u(E)?(c.q=E,c.state=l.ATTRIB_VALUE_QUOTED):(M(c,"Unquoted attribute value"),c.state=l.ATTRIB_VALUE_UNQUOTED,c.attribValue=E);continue;case l.ATTRIB_VALUE_QUOTED:if(E!==c.q){E==="&"?c.state=l.ATTRIB_VALUE_ENTITY_Q:c.attribValue+=E;continue}De(c),c.q="",c.state=l.ATTRIB_VALUE_CLOSED;continue;case l.ATTRIB_VALUE_CLOSED:d(E)?c.state=l.ATTRIB:E===">"?ie(c):E==="/"?c.state=l.OPEN_TAG_SLASH:g(T,E)?(M(c,"No whitespace between attributes"),c.attribName=E,c.attribValue="",c.state=l.ATTRIB_NAME):M(c,"Invalid attribute name");continue;case l.ATTRIB_VALUE_UNQUOTED:if(!a(E)){E==="&"?c.state=l.ATTRIB_VALUE_ENTITY_U:c.attribValue+=E;continue}De(c),E===">"?ie(c):c.state=l.ATTRIB;continue;case l.CLOSE_TAG:if(c.tagName)E===">"?Ve(c):g(A,E)?c.tagName+=E:c.script?(c.script+="</"+c.tagName,c.tagName="",c.state=l.SCRIPT):(d(E)||M(c,"Invalid tagname in closing tag"),c.state=l.CLOSE_TAG_SAW_WHITE);else{if(d(E))continue;S(T,E)?c.script?(c.script+="</"+E,c.state=l.SCRIPT):M(c,"Invalid tagname in closing tag."):c.tagName=E}continue;case l.CLOSE_TAG_SAW_WHITE:if(d(E))continue;E===">"?Ve(c):M(c,"Invalid characters in closing tag");continue;case l.TEXT_ENTITY:case l.ATTRIB_VALUE_ENTITY_Q:case l.ATTRIB_VALUE_ENTITY_U:var $,Q;switch(c.state){case l.TEXT_ENTITY:$=l.TEXT,Q="textNode";break;case l.ATTRIB_VALUE_ENTITY_Q:$=l.ATTRIB_VALUE_QUOTED,Q="attribValue";break;case l.ATTRIB_VALUE_ENTITY_U:$=l.ATTRIB_VALUE_UNQUOTED,Q="attribValue";break}E===";"?(c[Q]+=ot(c),c.entity="",c.state=$):g(c.entity.length?x:N,E)?c.entity+=E:(M(c,"Invalid character in entity name"),c[Q]+="&"+c.entity+E,c.entity="",c.state=$);continue;default:throw new Error(c,"Unknown state: "+c.state)}return c.position>=c.bufferCheckPosition&&r(c),c}String.fromCodePoint||function(){var p=String.fromCharCode,c=Math.floor,I=function(){var E=16384,j=[],G,$,Q=-1,ae=arguments.length;if(!ae)return"";for(var Ee="";++Q<ae;){var J=Number(arguments[Q]);if(!isFinite(J)||J<0||J>1114111||c(J)!==J)throw RangeError("Invalid code point: "+J);J<=65535?j.push(J):(J-=65536,G=(J>>10)+55296,$=J%1024+56320,j.push(G,$)),(Q+1===ae||j.length>E)&&(Ee+=p.apply(null,j),j.length=0)}return Ee};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:I,configurable:!0,writable:!0}):String.fromCodePoint=I}()})(typeof kt>"u"?kt.sax={}:kt)});var Gi=F(Jr=>{(function(){"use strict";Jr.stripBOM=function(i){return i[0]==="\uFEFF"?i.substring(1):i}}).call(Jr)});var en=F(Fe=>{(function(){"use strict";var i;i=new RegExp(/(?!xmlns)^.*:/),Fe.normalize=function(e){return e.toLowerCase()},Fe.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},Fe.stripPrefix=function(e){return e.replace(i,"")},Fe.parseNumbers=function(e){return isNaN(e)||(e=e%1===0?parseInt(e,10):parseFloat(e)),e},Fe.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e=e.toLowerCase()==="true"),e}}).call(Fe)});var zi=F(xe=>{(function(){"use strict";var i,e,t,r,n,o,s,h,f,y=function(b,m){return function(){return b.apply(m,arguments)}},D=function(b,m){for(var v in m)P.call(m,v)&&(b[v]=m[v]);function T(){this.constructor=b}return T.prototype=m.prototype,b.prototype=new T,b.__super__=m.prototype,b},P={}.hasOwnProperty;h=Wi(),r=require("events"),i=Gi(),s=en(),f=require("timers").setImmediate,e=Tt().defaults,n=function(b){return typeof b=="object"&&b!=null&&Object.keys(b).length===0},o=function(b,m,v){var T,A,N;for(T=0,A=b.length;T<A;T++)N=b[T],m=N(m,v);return m},t=function(b,m,v){var T;return T=Object.create(null),T.value=v,T.writable=!0,T.enumerable=!0,T.configurable=!0,Object.defineProperty(b,m,T)},xe.Parser=function(b){D(m,b);function m(v){this.parseStringPromise=y(this.parseStringPromise,this),this.parseString=y(this.parseString,this),this.reset=y(this.reset,this),this.assignOrPush=y(this.assignOrPush,this),this.processAsync=y(this.processAsync,this);var T,A,N;if(!(this instanceof xe.Parser))return new xe.Parser(v);this.options={},A=e["0.2"];for(T in A)!P.call(A,T)||(N=A[T],this.options[T]=N);for(T in v)!P.call(v,T)||(N=v[T],this.options[T]=N);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(s.normalize)),this.reset()}return m.prototype.processAsync=function(){var v,T;try{return this.remaining.length<=this.options.chunkSize?(v=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(v),this.saxParser.close()):(v=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(v),f(this.processAsync))}catch(A){if(T=A,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(T)}},m.prototype.assignOrPush=function(v,T,A){return T in v?(v[T]instanceof Array||t(v,T,[v[T]]),v[T].push(A)):this.options.explicitArray?t(v,T,[A]):t(v,T,A)},m.prototype.reset=function(){var v,T,A,N;return this.removeAllListeners(),this.saxParser=h.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(x){return function(d){if(x.saxParser.resume(),!x.saxParser.errThrown)return x.saxParser.errThrown=!0,x.emit("error",d)}}(this),this.saxParser.onend=function(x){return function(){if(!x.saxParser.ended)return x.saxParser.ended=!0,x.emit("end",x.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,N=[],v=this.options.attrkey,T=this.options.charkey,this.saxParser.onopentag=function(x){return function(d){var u,a,g,S,l;if(g={},g[T]="",!x.options.ignoreAttrs){l=d.attributes;for(u in l)!P.call(l,u)||(!(v in g)&&!x.options.mergeAttrs&&(g[v]={}),a=x.options.attrValueProcessors?o(x.options.attrValueProcessors,d.attributes[u],u):d.attributes[u],S=x.options.attrNameProcessors?o(x.options.attrNameProcessors,u):u,x.options.mergeAttrs?x.assignOrPush(g,S,a):t(g[v],S,a))}return g["#name"]=x.options.tagNameProcessors?o(x.options.tagNameProcessors,d.name):d.name,x.options.xmlns&&(g[x.options.xmlnskey]={uri:d.uri,local:d.local}),N.push(g)}}(this),this.saxParser.onclosetag=function(x){return function(){var d,u,a,g,S,l,O,w,C,L;if(l=N.pop(),S=l["#name"],(!x.options.explicitChildren||!x.options.preserveChildrenOrder)&&delete l["#name"],l.cdata===!0&&(d=l.cdata,delete l.cdata),C=N[N.length-1],l[T].match(/^\s*$/)&&!d?(u=l[T],delete l[T]):(x.options.trim&&(l[T]=l[T].trim()),x.options.normalize&&(l[T]=l[T].replace(/\s{2,}/g," ").trim()),l[T]=x.options.valueProcessors?o(x.options.valueProcessors,l[T],S):l[T],Object.keys(l).length===1&&T in l&&!x.EXPLICIT_CHARKEY&&(l=l[T])),n(l)&&(typeof x.options.emptyTag=="function"?l=x.options.emptyTag():l=x.options.emptyTag!==""?x.options.emptyTag:u),x.options.validator!=null&&(L="/"+function(){var _,q,B;for(B=[],_=0,q=N.length;_<q;_++)g=N[_],B.push(g["#name"]);return B}().concat(S).join("/"),function(){var _;try{return l=x.options.validator(L,C&&C[S],l)}catch(q){return _=q,x.emit("error",_)}}()),x.options.explicitChildren&&!x.options.mergeAttrs&&typeof l=="object"){if(!x.options.preserveChildrenOrder)g={},x.options.attrkey in l&&(g[x.options.attrkey]=l[x.options.attrkey],delete l[x.options.attrkey]),!x.options.charsAsChildren&&x.options.charkey in l&&(g[x.options.charkey]=l[x.options.charkey],delete l[x.options.charkey]),Object.getOwnPropertyNames(l).length>0&&(g[x.options.childkey]=l),l=g;else if(C){C[x.options.childkey]=C[x.options.childkey]||[],O={};for(a in l)!P.call(l,a)||t(O,a,l[a]);C[x.options.childkey].push(O),delete l["#name"],Object.keys(l).length===1&&T in l&&!x.EXPLICIT_CHARKEY&&(l=l[T])}}return N.length>0?x.assignOrPush(C,S,l):(x.options.explicitRoot&&(w=l,l={},t(l,S,w)),x.resultObject=l,x.saxParser.ended=!0,x.emit("end",x.resultObject))}}(this),A=function(x){return function(d){var u,a;if(a=N[N.length-1],a)return a[T]+=d,x.options.explicitChildren&&x.options.preserveChildrenOrder&&x.options.charsAsChildren&&(x.options.includeWhiteChars||d.replace(/\\n/g,"").trim()!=="")&&(a[x.options.childkey]=a[x.options.childkey]||[],u={"#name":"__text__"},u[T]=d,x.options.normalize&&(u[T]=u[T].replace(/\s{2,}/g," ").trim()),a[x.options.childkey].push(u)),a}}(this),this.saxParser.ontext=A,this.saxParser.oncdata=function(x){return function(d){var u;if(u=A(d),u)return u.cdata=!0}}(this)},m.prototype.parseString=function(v,T){var A;T!=null&&typeof T=="function"&&(this.on("end",function(N){return this.reset(),T(null,N)}),this.on("error",function(N){return this.reset(),T(N)}));try{return v=v.toString(),v.trim()===""?(this.emit("end",null),!0):(v=i.stripBOM(v),this.options.async?(this.remaining=v,f(this.processAsync),this.saxParser):this.saxParser.write(v).close())}catch(N){if(A=N,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw A}else return this.emit("error",A),this.saxParser.errThrown=!0}},m.prototype.parseStringPromise=function(v){return new Promise(function(T){return function(A,N){return T.parseString(v,function(x,d){return x?N(x):A(d)})}}(this))},m}(r),xe.parseString=function(b,m,v){var T,A,N;return v!=null?(typeof v=="function"&&(T=v),typeof m=="object"&&(A=m)):(typeof m=="function"&&(T=m),A={}),N=new xe.Parser(A),N.parseString(b,T)},xe.parseStringPromise=function(b,m){var v,T;return typeof m=="object"&&(v=m),T=new xe.Parser(v),T.parseStringPromise(b)}}).call(xe)});var Yi=F(Ie=>{(function(){"use strict";var i,e,t,r,n=function(s,h){for(var f in h)o.call(h,f)&&(s[f]=h[f]);function y(){this.constructor=s}return y.prototype=h.prototype,s.prototype=new y,s.__super__=h.prototype,s},o={}.hasOwnProperty;e=Tt(),i=$i(),t=zi(),r=en(),Ie.defaults=e.defaults,Ie.processors=r,Ie.ValidationError=function(s){n(h,s);function h(f){this.message=f}return h}(Error),Ie.Builder=i.Builder,Ie.Parser=t.Parser,Ie.parseString=t.parseString,Ie.parseStringPromise=t.parseStringPromise}).call(Ie)});var eo=F((da,tn)=>{"use strict";var Ko=require("net"),Wt=class extends Error{constructor(e){super(`${e} is locked`)}},Ge={old:new Set,young:new Set},Qo=1e3*15,$t,Ji=i=>new Promise((e,t)=>{let r=Ko.createServer();r.unref(),r.on("error",t),r.listen(i,()=>{let{port:n}=r.address();r.close(()=>{e(n)})})}),Zo=function*(i){i&&(yield*i),yield 0};tn.exports=async i=>{let e;i&&(e=typeof i.port=="number"?[i.port]:i.port),$t===void 0&&($t=setInterval(()=>{Ge.old=Ge.young,Ge.young=new Set},Qo),$t.unref&&$t.unref());for(let t of Zo(e))try{let r=await Ji({...i,port:t});for(;Ge.old.has(r)||Ge.young.has(r);){if(t!==0)throw new Wt(t);r=await Ji({...i,port:t})}return Ge.young.add(r),r}catch(r){if(!["EADDRINUSE","EACCES"].includes(r.code)&&!(r instanceof Wt))throw r}throw new Error("No available ports found")};tn.exports.makeRange=(i,e)=>{if(!Number.isInteger(i)||!Number.isInteger(e))throw new TypeError("`from` and `to` must be integer numbers");if(i<1024||i>65535)throw new RangeError("`from` must be between 1024 and 65535");if(e<1024||e>65536)throw new RangeError("`to` must be between 1024 and 65536");if(e<i)throw new RangeError("`to` must be greater than or equal to `from`");return function*(r,n){for(let o=r;o<=n;o++)yield o}(i,e)}});var ys={};No(ys,{activate:()=>gs});module.exports=Ao(ys);var K=H(require("vscode"));var je=H(require("vscode")),X=class{static getConfig(e){return je.workspace.getConfiguration(this.configPrefix).get(e)}static updateStatusBarItems(e){this.statusBarItem||(this.statusBarItem=je.window.createStatusBarItem(je.StatusBarAlignment.Left)),this.statusBarItem.text=e,this.statusBarItem.show()}static hide(){this.statusBarItem.hide()}};X.configPrefix="ahk++";var ut=H(require("fs")),lt=H(require("vscode"));var un=H(require("vscode"));var ln=i=>i==null?void 0:i.document.getText(i.selection),ye=class{static purify(e){return e?e.replace(/;.+/,"").replace(/".*?"/g,'""').replace(/{.*}/g,"").replace(/ +/g," ").replace(/\bgui\b.*/gi,"").replace(/\b(msgbox)\b.+?%/gi,"$1"):""}static join(e,t){if(!(!e||!t))if(Array.isArray(t))for(let r of t)e.push(r);else e.push(t)}static matchAll(e,t){if(!e.global)throw new Error("Only support global regex!");let r=[],n;for(;n=e.exec(t);)r.push(n);return r}},oe=()=>{var i;return((i=un.window.activeTextEditor)==null?void 0:i.document.languageId)==="ahk"},at=i=>i==="ahk"||i==="ahk2";var pn=H(require("vscode")),he=class{static debug(e){this.log(e,!1)}static log(e,t=!0){e instanceof Error&&(console.trace(e),e=e.message),t&&this.outputChannel.show(t),this.outputChannel.appendLine(`${new Date().toISOString()} ${e}`)}};he.outputChannel=pn.window.createOutputChannel("AHK");var ct=class{constructor(e,t,r,n){this.name=e;this.document=t;this.line=r;this.character=n}},Xe=class{constructor(e,t,r,n){this.name=e;this.document=t;this.line=r;this.character=n}};var Ue=class{constructor(e,t,r,n,o,s,h){this.origin=e;this.name=t;this.uriString=r;this.line=n;this.character=o;this.withQuote=s;this.comment=h;this.buildParams(),this.variables=[]}buildParams(){let e=/\s*\((.+?)\)\s*$/;if(this.origin!==this.name){let t=this.origin.match(e);t?(this.params=t[1].split(",").filter(r=>r.trim()).map(r=>{var s;let n=/[^:=* \t]+/,o=r.match(n);return(s=o==null?void 0:o[0])!=null?s:r}),this.full=this.origin.replace(t[1],this.params.join(", "))):(this.params=[],this.full=this.origin)}}pushVariable(e){Array.isArray(e)||(e=[e]);e:for(let t of e){for(let r of this.variables)if(r.name===t.name)continue e;for(let r of this.params)if(r===t.name)continue e;this.variables.push(t)}}};var be=class{static async buildByPath(e){if(!!e){if(ut.statSync(e).isDirectory())ut.readdir(e,(t,r)=>{if(t){he.log(t);return}for(let n of r)n.match(/(^\.|out|target|node_modules)/)||this.buildByPath(e+"/"+n)});else if(e.match(/\b(ahk|ext)$/i)){let t=await lt.workspace.openTextDocument(lt.Uri.file(e));this.buildScript(t)}}}static async buildScript(e,t={}){var v;if(t.usingCache&&this.documentCache.get(e.uri.path))return this.documentCache.get(e.uri.path);let r=(v=t.maximumParseLength)!=null?v:X.getConfig("intellisense.maximumParseLength"),n=r>=0?Math.min(e.lineCount,r):e.lineCount,o=[],s=[],h=[],f=[],y=[],D,P=0,b=!1;for(let T=0;T<n;T++){let A=e.lineAt(T).text;if(A.match(_o)&&(b=!0),A.match(Ro)&&(b=!1),b)continue;let N=be.detectMethodByLine(e,T);if(N)if(N instanceof Ue){o.push(N),s.push(new Xe(N.name,e,T,N.character)),D=N,N.withQuote&&P++;continue}else ye.join(s,N);let x=be.getLabelByLine(e,T);if(x){h.push(x);continue}let d=be.getBlockByLine(e,T);d&&y.push(d),A.includes("{")&&P++,A.includes("}")&&(P--,D&&(D.endLine=T));let u=be.detectVariableByLine(e,T);u&&(P===0||!D?this.joinVars(f,u):D.pushVariable(u))}let m={methods:o,labels:h,refs:s,variables:f,blocks:y};return this.documentCache.set(e.uri.path,m),m}static async getMethodByName(e,t){t=t.toLowerCase();for(let r of this.documentCache.get(e.uri.path).methods)if(r.name.toLowerCase()===t)return r;for(let r of this.documentCache.keys())for(let n of this.documentCache.get(r).methods)if(n.name.toLowerCase()===t)return n}static async getAllMethod(){let e=[];for(let t of this.documentCache.keys())for(let r of this.documentCache.get(t).methods)e.push(r);return e}static async getLabelByName(e,t){t=t.toLowerCase();for(let r of this.documentCache.get(e.uri.path).labels)if(r.name.toLowerCase()===t)return r;for(let r of this.documentCache.keys())for(let n of this.documentCache.get(r).labels)if(n.name.toLowerCase()===t)return n}static getAllRefByName(e){let t=[];e=e.toLowerCase();for(let r of this.documentCache.keys()){let n=this.documentCache.get(r);for(let o of n.refs)o.name.toLowerCase()===e&&t.push(o)}return t}static getBlockByLine(e,t){let{text:r}=e.lineAt(t),n=r.match(/;;(.+)/);if(n)return{document:e,line:t,name:n[1],character:r.indexOf(n[1])}}static getLabelByLine(e,t){let r=ye.purify(e.lineAt(t).text),n=/^[ \t]*([\u4e00-\u9fa5_a-zA-Z0-9]+):{1}(?!(:|=))/.exec(r);if(n){let o=n[1];return o.toLowerCase()==="case"||o.toLowerCase()==="default"?void 0:new ct(n[1],e,t,r.indexOf(o))}}static detectVariableByLine(e,t){let r=ye.purify(e.lineAt(t).text),n=r.match(be.varDefPattern);if(n){let o=n[1];return{line:t,document:e,isGlobal:!0,method:null,name:o,character:r.indexOf(o)}}else{let o=[],s=ye.matchAll(be.varCommandPattern,r.replace(/\(.+?\)/g,""));for(let h=0;h<s.length;h++){if(h===0)continue;let f=s[h][1];this.keywords.includes(f.toLowerCase())||o.push({line:t,document:e,isGlobal:!0,method:null,name:f,character:r.indexOf(s[h][0])})}return o}}static detectMethodByLine(e,t,r){r!=null||(r=e.lineAt(t).text);let n=ye.purify(r),o=/\s*(([\u4e00-\u9fa5_a-zA-Z0-9]+)(?<!if|while)\(.*?\))\s*(\{)?\s*/i,s=n.match(o);if(!s)return;let h=s[2],f=r.indexOf(h);if(n.length!==s[0].length){let P=[new Xe(h,e,t,f)],b=this.detectMethodByLine(e,t,r.replace(new RegExp(h+"\\s*\\("),""));return ye.join(P,b),P}let y=s[1];if(s[3])return new Ue(y,h,e.uri.toString(),t,f,!0,be.getRemarkByLine(e,t-1));for(let P=t+1;P<e.lineCount;P++){let b=ye.purify(e.lineAt(P).text);if(!!b.trim())return b.match(/^\s*{/)?new Ue(y,h,e.uri.toString(),t,f,!1,be.getRemarkByLine(e,t-1)):new Xe(h,e,t,f)}}static getRemarkByLine(e,t){if(t>=0){let{text:r}=e.lineAt(t),n=r.match(/^\s*;\s*(.+)/);if(n)return n[1]}return null}static joinVars(e,t){if(!e||!t)return;Array.isArray(t)||(t=[t]);e:for(let r of t){for(let n of e)if(n.name===r.name)continue e;e.push(r)}}},U=be;U.documentCache=new Map,U.varDefPattern=/[ \t]*(\w+?)\s*([+\-*/.:])?(?<![=!])=(?![=!]).+/,U.varCommandPattern=/(\w+)[ \t,]+/g,U.keywords=["and","or","new","extends","if","loop"];var _o=/ *\/\*/,Ro=/ *\*\//;var fr=require("path"),ee=H(require("vscode"));var Ne=H(require("fs")),lr=H(require("path")),Ce=H(require("vscode"));var $e=class{static init(e){this.storagePath=e.globalStoragePath,Ce.workspace.onDidSaveTextDocument(t=>{U.buildScript(t)})}static check(e){Ne.existsSync(e)||Ne.mkdirSync(e)}static show(e){if(this.storagePath||Ce.window.showErrorMessage("FileManager is not init!"),!e)return;let t=`${this.storagePath}/${e}`;this.check(this.storagePath),this.check(lr.resolve(t,".."));let r=Ce.Uri.file(t);return new Promise(n=>{Ce.workspace.openTextDocument(r).then(async o=>{n(await Ce.window.showTextDocument(o))})})}static record(e,t,r){if(this.storagePath||Ce.window.showErrorMessage("FileManager is not init!"),!!e)return new Promise((n,o)=>{let s=`${this.storagePath}/${e}`;this.check(this.storagePath),this.check(lr.resolve(s,"..")),r===pr.write?Ne.writeFileSync(s,`${t}`,{encoding:"utf8"}):Ne.appendFileSync(s,`${t}`,{encoding:"utf8"}),n(s)})}},pr=(t=>(t[t.write=0]="write",t[t.append=1]="append",t))(pr||{});var hn=H(require("child_process"));var hr=(i,e={})=>new Promise((t,r)=>{hn.exec(i,e,n=>{if(n){he.log(n.message),r(n);return}t(!0)})});var fn=H(require("fs"));var Mo=(i,e,t,r,n,o)=>{if(!i||!e)return"";let s=e.lastIndexOf("."),h=e.substring(0,s<0?e.length:s)+".exe",f=t?"/gui":"",y=r?`/icon "${r}"`:"",D=n?`/bin "${n}"`:"";return`"${i}" ${f} /in "${e}" /out "${h}" ${y} ${D} ${o?"/mpress 1":""}`},de=class{static async runSelection(){let e=ln(ee.window.activeTextEditor);if(e===void 0){ee.window.showErrorMessage("No active editor found!");return}this.run(await this.createTemplate(e))}static async startDebugger(e){let t=e?ee.Uri.file(e):ee.window.activeTextEditor.document.uri;e=e||await this.getPathByActive();let r=!!ee.extensions.getExtension("zero-plusplus.vscode-autohotkey-debug"),n=oe()?"file.interpreterPathV1":"file.interpreterPathV2";ee.debug.startDebugging(ee.workspace.getWorkspaceFolder(t),{type:r?"autohotkey":"ahk",request:"launch",name:"AutoHotkey Debugger",runtime:X.getConfig(n),program:e})}static async run(e){let t=X.getConfig(oe()?"file.interpreterPathV1":"file.interpreterPathV2");this.checkAndSaveActive(),e||(e=await this.getPathByActive()),hr(`"${t}" "${e}"`,{cwd:`${(0,fr.resolve)(e,"..")}`})}static async compile(e){let t=ee.window.activeTextEditor.document.uri.fsPath;if(!fn.existsSync(t)){ee.window.showErrorMessage("Cannot compile new files.");return}this.checkAndSaveActive();let r=X.getConfig("file.compilerPath"),n=X.getConfig("compiler.compileIcon"),o=X.getConfig(oe()?"compiler.compileBaseFileV1":"compiler.compileBaseFileV2"),s=X.getConfig("compiler.useMpress"),h=Mo(r,t,e,n,o,s);if(!h){ee.window.showErrorMessage("Cannot build compile command.");return}await hr(h,{cwd:`${(0,fr.resolve)(t,"..")}`})&&!e&&ee.window.showInformationMessage("Compile success!")}static async getPathByActive(){let e=ee.window.activeTextEditor.document;return e.isUntitled?await this.createTemplate(e.getText()):e.fileName}static async createTemplate(e){let t=`temp-${this.getNowDate()}.ahk`;return await $e.record(t,e,0)}static checkAndSaveActive(){ee.window.activeTextEditor.document.isUntitled||ee.commands.executeCommand("workbench.action.files.save")}static getNowDate(){let e=new Date,t=e.getMonth()+1,r=e.getDate();return t<=9&&(t="0"+t),r<=9&&(r="0"+r),e.getFullYear()+"-"+t+"-"+r+"-"+this.pad(e.getHours(),2)+"-"+this.pad(e.getMinutes(),2)+"-"+this.pad(e.getSeconds(),2)}static pad(e,t,r){return r=r||"0",e=e+"",e.length>=t?e:new Array(t-e.length+1).join(r)+e}};var so=require("vscode"),se=H(Ze());var ro=require("events");var Ki=require("events");var Go=require("net"),zo=Yi(),Ft=class extends Ki.EventEmitter{constructor(t){super();this.port=t;this.header='<?xml version="1.0" encoding="UTF-8"?>';this.parser=new zo.Parser({attrkey:"attr",charsAsChildren:!1,charkey:"content",explicitCharkey:!0,explicitArray:!1})}start(){let r;return this.proxyServer=new Go.Server().listen(this.port).on("connection",n=>{this.ahkConnection=n,n.on("data",o=>{r=r?Buffer.concat([r,o]):o,r[r.length-1]===0&&(this.process(r.toString()),r=null)})}).on("error",n=>{throw he.log(n.message),n}),this}shutdown(){this.ahkConnection&&this.ahkConnection.end(),this.proxyServer&&this.proxyServer.close()}write(t){this.ahkConnection&&this.ahkConnection.write(t)}process(t){t=t.substr(t.indexOf("<?xml")),t.indexOf(this.header)===-1&&(t=this.header+t);for(let r of t.split(this.header)){if(!(r!=null&&r.trim()))continue;let n=this.header+r;this.parser.parseStringPromise(n).then(o=>{for(let s in o)o.hasOwnProperty(s)&&this.emit(s,o[s])}).catch(o=>{he.log(o)})}}};var Qi=require("path"),Bt=H(Ze()),Vt=require("fs"),qt=class{constructor(){this._breakPoints=new Map}loopPoints(e){for(let t of this._breakPoints.keys())for(let r of this._breakPoints.get(t))e(r)}get(e){return this._breakPoints.get(e)}buildBreakPoint(e,t,r){if(!(0,Vt.existsSync)(e))return[];let n=(0,Vt.readFileSync)(e).toString().split(`
`),o=t.map(s=>{let h=new Bt.Breakpoint(!1,s.line,s.column,new Bt.Source((0,Qi.basename)(e),e)),f=n[s.line];return f&&f.trim().charAt(0)!==";"&&(h.verified=!0),r(h),h});return this._breakPoints.set(e,o),o}};var jt=class{constructor(e){this.debugServer=e;this.transId=1;this.commandCallback={}}sendCommand(e,t){if(!!this.debugServer)return this.transId++,e+=` -i ${this.transId}`,typeof t=="string"&&(e+=` -- ${Buffer.from(t).toString("base64")}`),e+="\0",this.debugServer.write(`${e}`),new Promise(r=>{this.commandCallback[""+this.transId]=n=>{r(n)}})}callback(e,t){let r=this.commandCallback[e];r&&r(t),this.commandCallback[e]=null}};var Ut=H(Ze()),Zi=require("path"),Xt=class{handle(e,t){return t?(Array.isArray(t.stack)?t.stack:Array.of(t.stack)).map((n,o)=>new Ut.StackFrame(o,n.attr.where,new Ut.Source((0,Zi.basename)(n.attr.filename),n.attr.filename),parseInt(n.attr.lineno))):[]}};var qe=H(Ze());var ve=class{static toArray(e){return e?Array.isArray(e)?e:[e]:[]}static atob(e){return e?Buffer.from(e,"base64").toString():null}static btoa(e){return e?Buffer.from(e).toString("base64"):null}};var Ht=class{constructor(){this.variableHandles=new qe.Handles;this.variableMap=new Map}getScopeByRef(e){let t=this.variableHandles.get(e);return typeof t=="string"?t==="Local"?0:1:t.scope}getVarByRef(e){return this.variableHandles.get(e)}getVarByName(e){return this.variableMap.get(e)}obtainValue(e){let t,r=!1,n=e.match(/^(?:()|\"(.*)\"|(true|false)|([+-]?\d+)|([+-]?\d+\.[+-]?\d+)|([\w\d]+))$/is);if(!n)return Promise.reject(new Error(`"${e}" is invalid value.`));let[,o,s,h,f,y,D]=n;return o!==void 0?(t="string",e=""):s!==void 0?(t="string",e=s):h!==void 0?(t="string",e=h.match(/true/i)?"1":"0"):f!==void 0?(t="integer",e=f):y!==void 0?(t="float",e=y):(r=!0,e=D),Promise.resolve({type:t,value:e,isVariable:r})}getArrayValue(e,t,r){let n=this.getVarByRef(e);return Array.isArray(n==null?void 0:n.value)?n.value.slice(t,t+r).map((o,s)=>new qe.Variable(`[${t+s+1}]`,o)):[]}scopes(e){return this.frameId=e,[new qe.Scope("Local",this.variableHandles.create("Local"),!1),new qe.Scope("Global",this.variableHandles.create("Global"),!1)]}getFrameId(){return this.frameId}parsePropertyget(e,t){return this.parse(e.property.content?e:e.property,t)}parse(e,t){return ve.toArray(e.property).map(r=>{try{let{attr:n}=r,o,s;if(this.likeArray(r)){let f=this.getLikeArrayLength(r);o=100<f?f:void 0,s=100<f?1:void 0}let h={scope:t,frameId:t===1?-1:this.frameId,name:r.attr.fullname,value:this.buildVariableValue(r)};return this.variableMap.set(n.name,h),{type:n.type,name:n.name,value:this.formatPropertyValue(r),indexedVariables:o,namedVariables:s,variablesReference:n.type!=="object"?0:this.variableHandles.create(h)}}catch(n){console.log(n);return}})}buildVariableValue(e){let{attr:t,content:r=""}=e;if(["string","integer","float"].includes(t.type)){let n=ve.atob(r);return t.type==="integer"||t.type==="float"?n:`"${n}"`}else if(t.type==="object"){let n=ve.toArray(e.property);return this.likeArray(e)&&t.classname==="Object"?n.map(o=>ve.atob(o.content)):n.reduce((o,s)=>(o[s.attr.fullname]=ve.atob(s.content),o),{})}return`${t.classname}`}formatPropertyValue(e){let{attr:t,content:r=""}=e;if(["string","integer","float"].includes(t.type)){let n=Buffer.from(r,t.encoding).toString();return t.type==="integer"||t.type==="float"?n:`"${n}"`}else if(t.type==="object"&&this.likeArray(e)){let n=t.classname==="Object"?"Array":t.classname,o=this.getLikeArrayLength(e);return`${n}(${o})`}return`${t.classname}`}getLikeArrayLength(e){let t=ve.toArray(e.property);if(t.length===0)return 0;for(let r=t.length-1;r>0;r--){let n=t[r].attr.name.match(/\[([0-9]+)\]/);if(n)return parseInt(n[1])}return 0}likeArray(e){return ve.toArray(e.property).some(t=>t.attr.name.match(/\[[0-9]+\]/))}};var no=require("child_process"),io=require("path"),oo=require("fs");var to=eo(),Gt=class extends ro.EventEmitter{constructor(){super()}async start(t){var P,b;let r=oe()?"file.interpreterPathV1":"file.interpreterPathV2",n=(P=t.runtime)!=null?P:X.getConfig(r),o=(b=t.dbgpSettings)!=null?b:{},{maxChildren:s,maxData:h}={maxChildren:300,maxData:131072,...o};this.breakPointHandler=new qt,this.stackHandler=new Xt,this.variableHandler=new Ht,this.startArgs=t;let f=await to({port:to.makeRange(9e3,9100)});this.debugServer=new Ft(f),this.commandHandler=new jt(this.debugServer),this.debugServer.start().on("init",()=>{this.breakPointHandler.loopPoints(m=>{this.setBreakPonit(m)}),this.sendCommand(`feature_set -n max_children -v ${s}`),this.sendCommand(`feature_set -n max_data -v ${h}`),this.sendCommand("feature_set -n max_depth -v 2"),this.sendCommand("stdout -c 1"),this.sendCommand("stderr -c 1"),this.sendCommand("run")}).on("stream",m=>{this.emit("output",Buffer.from(m.content,"base64").toString())}).on("response",m=>{if(m.attr.command)switch(this.commandHandler.callback(m.attr.transaction_id,m),m.attr.command){case"run":case"step_into":case"step_over":case"step_out":this.processRunResponse(m);break;case"stop":this.end();break}}),t.program||(t.program=await de.getPathByActive());let y=Jo(t.program);if(!(0,oo.existsSync)(n)){he.log(`AutoHotkey execute bin not found: ${n}`),this.end();return}(0,no.spawn)(n,["/ErrorStdOut",`/debug=localhost:${f}`,y],{cwd:`${(0,io.resolve)(t.program,"..")}`}).stderr.on("data",m=>{this.emit("output",m.toString("utf8")),this.end()})}async restart(){this.sendCommand("stop"),this.end(),de.startDebugger(this.startArgs.program)}sendCommand(t,r){return this.commandHandler?this.commandHandler.sendCommand(t,r):null}stop(){this.sendCommand("stop"),this.debugServer.shutdown()}end(){this.emit("end"),this.debugServer.shutdown()}scopes(t){return this.variableHandler.scopes(t)}async listVariables(t){var h;if(t.filter==="named")return[];if(t.filter==="indexed")return this.variableHandler.getArrayValue(t.variablesReference,t.start,t.count);let r=this.variableHandler.getScopeByRef(t.variablesReference),n=this.variableHandler.getFrameId(),o=(h=this.variableHandler.getVarByRef(t.variablesReference))==null?void 0:h.name;if(o)return this.getVariable(n,r,o);let s=await this.sendCommand(`context_get -d ${n} -c ${r}`);return this.variableHandler.parse(s,r)}async getVariableByEval(t){let r=this.variableHandler.getFrameId(),n=await this.getVariable(r,0,t);if(n.length===0)return null;if(n.length===1)return n[0].value;{let o=this.variableHandler.getVarByName(t);return JSON.stringify(o.value)}}async getVariable(t,r,n){let o=await this.sendCommand(`property_get -d ${t} -c ${r} -n ${n}`);return this.variableHandler.parsePropertyget(o,r)}async setVariable(t){return this.variableHandler.obtainValue(t.value).then(async({type:r,value:n,isVariable:o})=>{var m;let s=this.variableHandler.getFrameId(),h=this.variableHandler.getScopeByRef(t.variablesReference);if(o){let v=(await this.getVariable(s,h,n))[0];if(!v)throw new Error(`variable ${t.value} not found!`);n=v.value,n.match(/^"|"$/g)&&(r="string",n=n.replace(/^"|"$/g,""))}let f=(m=this.variableHandler.getVarByRef(t.variablesReference))==null?void 0:m.name,y=t.name;f&&(y=y.includes("[")&&y.includes("]")?`${f}${y}`:`${f}.${y}`);let D=await this.sendCommand(`property_set -d ${s} -c ${h} -n ${y} -t ${r}`,n);if(!parseInt(D.attr.success))throw new Error(`"${y}" cannot be written. Probably read-only.`);let P=r==="string"?`"${n}"`:n,b=0;return{name:t.name,value:P,type:r,variablesReference:b}})}async stack(t){let r=await this.sendCommand("stack_get");return this.stackHandler.handle(t,r)}async setBreakPonit(t){if(this.debugServer&&t.verified){let r=await this.sendCommand(`breakpoint_set -t line -f ${t.source.path} -n ${t.line}`);t.id=r.attr.id}}buildBreakPoint(t,r){return this.clearBreakpoints(t),this.breakPointHandler.buildBreakPoint(t,r,n=>{this.setBreakPonit(n)})}clearBreakpoints(t){let r;if(this.debugServer&&(r=this.breakPointHandler.get(t)))for(let n of r)this.sendCommand(`breakpoint_remove -d ${n.id}`)}processRunResponse(t){switch(t.attr.status){case"break":this.emit("break",t.attr.command);break;case"stopping":case"stopped":this.end();break}}},Jo=i=>{let e=i.split("\\");return e[e.length-1]};var zt=class extends se.LoggingDebugSession{constructor(){super("ahk-debug.txt");this.setDebuggerLinesStartAt1(!1),this.setDebuggerColumnsStartAt1(!1),this.dispatcher=new Gt,this.dispatcher.on("break",t=>{this.sendEvent(new se.StoppedEvent(t,zt.threadId))}).on("breakpointValidated",t=>{this.sendEvent(new se.BreakpointEvent("changed",{verified:t.verified,id:t.id}))}).on("output",t=>{this.sendEvent(new se.OutputEvent(`${t}
`)),so.commands.executeCommand("workbench.debug.action.focusRepl")}).on("end",()=>{this.sendEvent(new se.TerminatedEvent)})}initializeRequest(t,r){t.body={...t.body,completionTriggerCharacters:[".","["],supportsConfigurationDoneRequest:!1,supportsEvaluateForHovers:!0,supportsStepBack:!1,supportsDataBreakpoints:!1,supportsCompletionsRequest:!0,supportsCancelRequest:!0,supportsRestartRequest:!0,supportsBreakpointLocationsRequest:!1,supportsSetVariable:!0},this.sendResponse(t),this.sendEvent(new se.InitializedEvent)}restartRequest(t,r,n){this.dispatcher.restart(),this.sendResponse(t)}async launchRequest(t,r){this.dispatcher.start(r),this.sendResponse(t)}disconnectRequest(t,r,n){this.dispatcher.stop(),this.sendResponse(t)}async setBreakPointsRequest(t,r){t.body={breakpoints:this.dispatcher.buildBreakPoint(r.source.path,r.breakpoints)},this.sendResponse(t)}async stackTraceRequest(t,r){t.body={stackFrames:await this.dispatcher.stack(r)},this.sendResponse(t)}scopesRequest(t,r){t.body={scopes:this.dispatcher.scopes(r.frameId)},this.sendResponse(t)}async variablesRequest(t,r,n){t.body={variables:await this.dispatcher.listVariables(r)},this.sendResponse(t)}async setVariableRequest(t,r,n){try{t.body=await this.dispatcher.setVariable(r),this.sendResponse(t)}catch(o){this.sendErrorResponse(t,{id:r.variablesReference,format:o.message})}}pauseRequest(t,r,n){this.dispatcher.sendCommand("break"),this.sendResponse(t)}continueRequest(t,r){this.dispatcher.sendCommand("run"),this.sendResponse(t)}nextRequest(t,r){this.dispatcher.sendCommand("step_over"),this.sendResponse(t)}stepInRequest(t,r,n){this.dispatcher.sendCommand("step_into"),this.sendResponse(t)}stepOutRequest(t,r,n){this.dispatcher.sendCommand("step_out"),this.sendResponse(t)}threadsRequest(t){t.body={threads:[new se.Thread(zt.threadId,"main thread")]},this.sendResponse(t)}async completionsRequest(t,r){t.body={targets:[...await this.dispatcher.listVariables({variablesReference:1e3}),...await this.dispatcher.listVariables({variablesReference:1001})].map(n=>({type:"variable",label:n.name,sortText:n.name}))},this.sendResponse(t)}async evaluateRequest(t,r){let n=r.expression.split("="),o;n.length===1?o=await this.dispatcher.getVariableByEval(r.expression):(this.dispatcher.setVariable({name:n[0],value:n[1],variablesReference:1e3}),o=`execute: ${r.expression}`),t.body={result:o||"null",variablesReference:0},this.sendResponse(t)}},tt=zt;tt.threadId=1;var te=H(require("vscode"));var ao=require("fs"),Yt=class{async provideDefinition(e,t,r){let n=await this.tryGetFileLink(e,t);if(n)return n;let o=e.getText(e.getWordRangeAtPosition(t));if(new RegExp(o+"\\s*\\(.*?\\)").test(e.lineAt(t.line).text)){let f=await U.getMethodByName(e,o);if(f)return new te.Location(te.Uri.parse(f.uriString),new te.Position(f.line,f.character))}let s=await U.getLabelByName(e,o);if(s){let f=s.document;return new te.Location(f.uri,new te.Position(s.line,s.character))}let h=await U.buildScript(e,{usingCache:!0});for(let f of h.methods)if(t.line>=f.line&&t.line<=f.endLine){for(let y of f.variables)if(y.name===o)return new te.Location(e.uri,new te.Position(y.line,y.character));for(let y of f.params)if(y===o)return new te.Location(e.uri,new te.Position(f.line,f.character+f.origin.indexOf(y)))}for(let f of h.variables)if(f.name===o)return new te.Location(e.uri,new te.Position(f.line,f.character));return null}async tryGetFileLink(e,t,r){let{text:n}=e.lineAt(t.line),o=n.match(/(?<=#include).+?\.(ahk|ext)\b/i);if(!o)return;let s=r||e.uri.path.substr(0,e.uri.path.lastIndexOf("/")),h=te.Uri.file(o[0].trim().replace(/(%A_ScriptDir%|%A_WorkingDir%)/,s).replace(/(%A_LineFile%)/,e.uri.path));return(0,ao.existsSync)(h.fsPath)?new te.Location(h,new te.Position(0,0)):r?this.tryGetFileLink(e,t,te.workspace.rootPath):void 0}};var Kt=H(require("vscode")),co=()=>Kt.window.onDidChangeActiveTextEditor(i=>{if(i&&at(i.document.languageId)&&i.document.getText()===""){let e=oe()?"file.templateSnippetNameV1":"file.templateSnippetNameV2",t=X.getConfig(e);if(t==="")return;Kt.commands.executeCommand("editor.action.insertSnippet",{name:t})}});var it=require("util"),er=H(require("vscode"));var rt=/(?<=^|\s+);.*/;var uo=i=>new Array(i.lineCount).fill(0).map((e,t)=>i.lineAt(t).text).join(`
`);function lo(i,e){return e.insertSpaces?" ".repeat(i*e.tabSize):"	".repeat(i)}function po(i,e,t){return t||e!=null&&e.trim()?i+e:e}function Be(i,e,t,r,n){let o=lo(r,n),s=po(o,t,n.preserveIndent);return i!==e-1&&(s+=`
`),s}function Qt(i){if(!i)return"";let e=["autotrim","blockinput","click","clipwait","control","controlclick","controlfocus","controlget","controlgetfocus","controlgetpos","controlgettext","controlmove","controlsend","controlsendraw","controlsettext","coordmode","critical","detecthiddentext","detecthiddenwindows","drive","driveget","drivespacefree","edit","envadd","envdiv","envget","envmult","envset","envsub","envupdate","exit","exitapp","fileappend","filecopy","filecopydir","filecreatedir","filecreateshortcut","filedelete","fileencoding","filegetattrib","filegetshortcut","filegetsize","filegettime","filegetversion","fileinstall","filemove","filemovedir","fileread","filereadline","filerecycle","filerecycleempty","fileremovedir","fileselectfile","fileselectfolder","filesetattrib","filesettime","formattime","getkeystate","groupactivate","groupadd","groupclose","groupdeactivate","gui","guicontrol","guicontrolget","hotkey","imagesearch","inidelete","iniread","iniwrite","input","inputbox","keyhistory","keywait","listhotkeys","listlines","listvars","menu","mouseclick","mouseclickdrag","mousegetpos","mousemove","msgbox","onexit","outputdebug","pause","pixelgetcolor","pixelsearch","postmessage","process","progress","random","regdelete","regread","regwrite","reload","run","runas","runwait","send","sendevent","sendinput","sendlevel","sendmessage","sendmode","sendplay","sendraw","setbatchlines","setcapslockstate","setcontroldelay","setdefaultmousespeed","setenv","setformat","setkeydelay","setmousedelay","setnumlockstate","setregview","setscrolllockstate","setstorecapslockmode","settimer","settitlematchmode","setwindelay","setworkingdir","shutdown","sleep","sort","soundbeep","soundget","soundgetwavevolume","soundplay","soundset","soundsetwavevolume","splashimage","splashtextoff","splashtexton","splitpath","statusbargettext","statusbarwait","stringcasesense","stringgetpos","stringleft","stringlen","stringlower","stringmid","stringreplace","stringright","stringsplit","stringtrimleft","stringtrimright","stringupper","suspend","sysget","thread","tooltip","transform","traytip","urldownloadtofile","winactivate","winactivatebottom","winclose","winget","wingetactivestats","wingetactivetitle","wingetclass","wingetpos","wingettext","wingettitle","winhide","winkill","winmaximize","winmenuselectitem","winminimize","winminimizeall","winminimizeallundo","winmove","winrestore","winset","winsettitle","winshow","winwait","winwaitactive","winwaitclose","winwaitnotactive"],t=i;for(let n of e){let o="(^\\s*"+n+"\\b(?!\\()).*",s=new RegExp(o,"i");if(i.search(s)!==-1){t=i.replace(s,"$1");break}}let r=t.replace(/".*?"/g,'""');return r=yo(r,/{[^{}]*}/g,""),r=r.replace(/\s+/g," ").replace(rt,"").trim(),r}function nt(i){let e=["ifexist","ifinstring","ifmsgbox","ifnotexist","ifnotinstring","ifwinactive","ifwinexist","ifwinnotactive","ifwinnotexist","if","else","loop","for","while","catch"];for(let t of e)if(i.match("^}?\\s*"+t+"\\b(?!:)"))return!0;return!1}function ho(i,e){if(e===-1)return i;let t=new RegExp(`\\n(\\s*?\\n){${e},}`,"g");return i.replace(t,`
`+"$1".repeat(e)).replace(/^\s*\n+/,"")}function fo(i,e){return e?i.replace(/ {2,}/g," "):i}function Zt(i,e){var n,o;let t=new RegExp(e,"g");return(o=(n=yo(i,/{[^{}]*}/g,"").match(t))==null?void 0:n.length)!=null?o:0}function mo(i){let e=Math.max(...i.map(r=>go(r).indexOf("=")));return i.map(r=>es(r,e))}function go(i){return i.replace(/(?<!`);.+/,"").replace(/(?<=\S) {2,}(?=\S)/g," ").replace(/\s?(?=:?=)/," ").replace(/(?<=:?=)\s?/," ")}function es(i,e){var n,o;let t=(o=(n=/;.+/.exec(i))==null?void 0:n[0])!=null?o:"";i=go(i);let r=i.indexOf("=");return i.replace(/\s(?=:?=)/," ".repeat(e-r+1)).concat(t).trimEnd()}function yo(i,e,t){for(;;){let r=i.length;if(i=i.replace(e,t),r===i.length)break}return i}var Se=class{constructor(e){this.depth=e!=null?e:[-1]}enterBlockOfCode(e){for(let t=e;t>0;t--)this.depth.push(-1);return this.depth}exitBlockOfCode(e){for(let t=e;t>0;t--)this.depth.splice(this.depth.lastIndexOf(-1));return this.restoreEmptyDepth(),this.depth}last(){return this.depth[this.depth.length-1]}push(e){return this.depth.push(e)}pop(){let e=this.depth.pop();return this.restoreEmptyDepth(),e}restoreDepth(){let e=this.depth.lastIndexOf(-1)+1,t=this.depth[e];return this.depth.splice(e),t}restoreEmptyDepth(){this.depth.length===0&&(this.depth=[-1])}};function bo(i,e){let t=0,r=0,n=i.split(`
`);for(let o=n.length-1;o>=0;o--){let s=n[o];if(Qt(s)===""){let f=lo(r,e);n[o]=po(f,s.trim(),e.preserveIndent)}else{if(t=ts(s,e),s.match(/^\s*}/)){let f=Zt(Qt(s),"}");t+=f}r=t}}return n.join(`
`)}function ts(i,e){var n;let t=i.match(/^\s+/),r=(n=t==null?void 0:t[0].length)!=null?n:0;return e.insertSpaces?r/e.tabSize:r}function rs(i){let e=i.lineCount-1;return new er.Range(0,0,e,i.lineAt(e).text.length)}var ns=(i,e)=>{let t="",r=0,n=0,o=0,s=!1,h=!1,f=!0,y=new Se,D=new Se,P=!1,b=[],m=!1,v=!1,T=!1,A=!1,N=!1,x=-1,d=!1,u="",a=!1,g=0,S=0,l=0,O=!1,w=new Se,C=new Se,L=e.indentCodeAfterLabel,_=e.indentCodeAfterIfDirective,q=e.trimExtraSpaces,B=/;\s*@AHK\+\+AlignAssignmentOn/i,M=/;\s*@AHK\+\+AlignAssignmentOff/i,Y=/;\s*@AHK\+\+FormatBlockCommentOn/i,V=/;\s*@AHK\+\+FormatBlockCommentOff/i,De=/^(((and|or|not)\b)|[\^!~?:&<>=.,|]|\+(?!\+)|-(?!-)|\/(?!\*)|\*(?!\/))/,ie=/^[^\s\t,`]+(?<!:):$/,Ve=/^.+::$/,ot=/^.+::/,ze="#(ifwinactive|ifwinnotactive|ifwinexist|ifwinnotexist|if)",Ye=/^(case\s*.+?:|default:)\s*.*/,fe=i.split(`
`);return fe.forEach((p,c)=>{var ae,Ee,J;let I=Qt(p).toLowerCase(),E=(Ee=(ae=rt.exec(p))==null?void 0:ae[0])!=null?Ee:"",j=p.replace(rt,"");j=fo(j,q).concat(E).trim();let G=I==="";f=!0;let $=Zt(I,"{"),Q=Zt(I,"}");if(G&&(P&&E.match(M)&&(P=!1,b=mo(b),b.forEach((z,Pe)=>{t+=Be(c-b.length+Pe+1,fe.length,z,r,e)}),b=[]),a&&E.match(V)&&(a=!1)),P){if(b.push(j),c!==fe.length-1)return;b.forEach((z,Pe)=>{t+=Be(c-b.length+Pe+1,fe.length,z,r,e)}),b=[]}if(!d&&p.match(/^\s*\/\*/)&&(d=!0,u=(J=p.match(/(^\s*)\/\*/))==null?void 0:J[1],a&&(g=r,S=o,l=n,O=s,w=y,C=D,o=r,n=r,s=!1,y=new Se,D=new Se)),d){if(!a){let z="";p.startsWith(u)?z=p.substring(u.length):z=p,t+=Be(c,fe.length,z.trimEnd(),r,e)}if(p.match(/^\s*\*\//)&&(d=!1,a&&(r=g,o=S,n=l,s=O,y=w,D=C)),!a)return}if(G&&!E.match(B)&&!E.match(M)&&!E.match(Y)&&!E.match(V)){t+=Be(c,fe.length,j,0,e);return}if(I.match(/^\((?!::)(?!.*\bltrim\b)/)&&(T=!0),T){t+=p.trimEnd()+`
`,I.match(/^\)/)&&(T=!1);return}if(v&&I.match(/^\)/)&&(v=!1,r--),v){t+=Be(c,fe.length,p.trim(),r,e);return}if(I.match(De)&&!I.match(/::/)&&(m=!0,A&&(r--,x=n),s&&(N=!0,s=!1,h=!1,r--),h&&(s=!0,r++),r++),N&&!m&&(N=!1,s=!0,r++),Q&&(D.last()>-1&&(r=D.last()),y.exitBlockOfCode(Q),D.exitBlockOfCode(Q),m||(r-=Q)),$&&(s||N)&&!nt(I)&&(N?N=!1:I.match(/^{/)&&(s=!1,r-=$),r===D.last()&&D.pop()),(y.last()>-1||D.last()>-1)&&!m&&!s&&(!d||a)){if(I.match(/^}? ?else\b(?!:)/))r=y.pop();else if(!I.match(/^{/)&&!I.match(/^}/)){let z=y.restoreDepth(),Pe=D.restoreDepth();z!==void 0&&Pe!==void 0?r=Math.min(z,Pe):r=z!=null?z:Pe}}I.match("^"+ze+"\\b")&&(o>0?r-=o:r--),I.match(/^(return|exit|exitapp)\b/)&&o===r&&(o=0,r--),(I.match(Ye)||(I.match(ie)||I.match(Ve)||I.match(ot))&&L&&o===r)&&r--,r<0&&(r=0),g<0&&(g=0),n=r,t+=Be(c,fe.length,j,r,e),G&&(E.match(B)?P=!0:E.match(Y)&&(a=!0)),s&&(!d||a)?(s=!1,h=!0,nt(I)||r--):h=!1,nt(I)&&$===0&&D.last()===-1&&D.push(r),I.match(/^(}? ?else )?if\b(?!:)/)&&y.push(r),$?(r+=$,f=!1,m?A=!1:A=!0,y.enterBlockOfCode($),D.enterBlockOfCode($)):A=!1,I.match("^"+ze+"\\b.+")&&_&&(r++,o=0),I.match(Ye)?r++:I.match(ie)||I.match(Ve)?L&&D.depth.length===1&&(r++,o=r):I.match(ot)&&(o=0),m&&(m=!1,Q&&(r-=Q,x===r&&(x=-1,r++)),r--),I.match(/^\((?!::)(?=.*\bltrim\b)/)&&(v=!0,r++),f&&nt(I)&&(s=!0,r++),c===fe.length-1&&!((0,it.isDeepStrictEqual)(y.depth,[-1])||(0,it.isDeepStrictEqual)(y.depth,[-1,0]))&&!((0,it.isDeepStrictEqual)(D.depth,[-1])||(0,it.isDeepStrictEqual)(D.depth,[-1,0]))&&(console.error("Internal formatter data:"),console.log(" ifDepth:"),console.log(y.depth),console.log("occDepth:"),console.log(D.depth))}),t=bo(t,e),t=ho(t,e.allowedNumberOfEmptyLines),t},Jt=class{provideDocumentFormattingEdits(e,t,r){let n=uo(e),o=X.getConfig("formatter.allowedNumberOfEmptyLines"),s=X.getConfig("formatter.indentCodeAfterLabel"),h=X.getConfig("formatter.indentCodeAfterIfDirective"),f=X.getConfig("formatter.preserveIndent"),y=X.getConfig("formatter.trimExtraSpaces"),D=ns(n,{...t,allowedNumberOfEmptyLines:o,indentCodeAfterLabel:s,indentCodeAfterIfDirective:h,preserveIndent:f,trimExtraSpaces:y});return[new er.TextEdit(rs(e),D)]}};var re=H(require("vscode"));var tr=class{async provideDocumentSymbols(e,t){let r=[],n=await U.buildScript(e);for(let o of n.methods)r.push(new re.SymbolInformation(o.full,re.SymbolKind.Method,o.comment,new re.Location(re.Uri.parse(o.uriString),new re.Position(o.line,o.character))));for(let o of n.labels)r.push(new re.SymbolInformation(o.name,re.SymbolKind.Field,null,new re.Location(o.document.uri,new re.Position(o.line,o.character))));for(let o of n.blocks)r.push(new re.SymbolInformation(o.name,re.SymbolKind.Module,null,new re.Location(o.document.uri,new re.Position(o.line,o.character))));return r}};var wo=require("fs"),vo=require("path"),Oe=require("vscode");var rr=class{constructor(e){this.initSnippetCache(e)}async provideHover(e,t,r){let n=this.buildContext(e,t);if(!n)return null;let o=this.tryGetSnippetHover(n);if(o)return o;let s=await U.getMethodByName(e,n.word);if(s){let h=new Oe.MarkdownString("",!0).appendCodeblock(s.full);return s.comment&&h.appendText(s.comment),new Oe.Hover(h)}return null}tryGetSnippetHover(e){let t=e.word.toLowerCase();e.charAfter==="("&&(t+="()");let r=this.snippetCache.get(t);if(!r)return;let n=new Oe.MarkdownString("",!0).appendCodeblock(r.body,"ahk");return r.description&&n.appendText(r.description),new Oe.Hover(n)}buildContext(e,t){let r=t.line,n=e.getWordRangeAtPosition(t);if(!n)return;let o=e.getText(n);n.start.character>0&&e.getText(new Oe.Range(r,n.start.character-1,r,n.start.character))==="#"&&(o="#"+o);let s=e.getText(new Oe.Range(r,n.end.character,r,n.end.character+1));return{word:o,charAfter:s}}initSnippetCache(e){var r;let t=JSON.parse((0,wo.readFileSync)((0,vo.join)(e.extensionPath,"language","snippetsV1.json"),"utf8"));this.snippetCache=new Map;for(let n in t){let o=t[n];typeof o.body=="string"&&(o.body=(r=o.body)==null?void 0:r.replace(/\d{1}:/g,"")),this.snippetCache.set(n.toLowerCase(),o)}}};var ir=H(require("vscode"));var nr=class{provideReferences(e,t,r,n){let o=e.getText(e.getWordRangeAtPosition(t)),s=[],h=U.getAllRefByName(o);for(let f of h)s.push(new ir.Location(f.document.uri,new ir.Position(f.line,f.character)));return s}};var ge=H(require("vscode"));var or=class{async provideRenameEdits(e,t,r,n){for(let f of ge.workspace.textDocuments)U.buildScript(f);let o=e.getText(e.getWordRangeAtPosition(t)),s=U.getAllRefByName(o),h=new ge.WorkspaceEdit;for(let f of s){if(f.document.uri.scheme!=="file")continue;let y=[];y.push(new ge.TextEdit(new ge.Range(new ge.Position(f.line,f.character),new ge.Position(f.line,f.character+o.length)),r)),console.debug(`url:${f.document.uri},line:${f.line},character:${f.character}`),h.set(f.document.uri,y)}return h}async prepareRename(e,t,r){let n=e.getWordRangeAtPosition(t),o=e.getText(n);if(await U.getMethodByName(e,o))return n;throw new Error("You cannot rename this element.")}};var To=H(require("vscode"));var sr=class{async provideSignatureHelp(e,t,r,n){let o,s=e.lineAt(t.line).text,h=0;for(let D=t.character-1;D>0;D--){let P=s.charAt(D);if(P==="("){o=new To.Position(t.line,D);break}P===","&&h++}let f=e.getText(e.getWordRangeAtPosition(o)),y=await U.getMethodByName(e,f);return y?{activeSignature:0,signatures:[{label:y.origin,parameters:y.params.map(D=>({label:D}))}],activeParameter:h}:null}};var Te=H(require("vscode"));var Do=require("vscode"),is=i=>{let e=new Te.CompletionItem(i.params.length===0?i.name:i.full,Te.CompletionItemKind.Method);return e.insertText=i.params.length?new Do.SnippetString(`${i.name}($1)`):`${i.name}()`,e.detail=i.comment,e},os=(i,e,t)=>i.uriString===e&&i.line<=t&&t<=i.endLine,ss=i=>i.params.concat(i.variables).map(e=>new Te.CompletionItem(e,Te.CompletionItemKind.Variable)),as=(i,e,t)=>{let r=[is(i)];return os(i,e,t)&&r.push(...ss(i)),r},cs=i=>new Te.CompletionItem(i,Te.CompletionItemKind.Variable),us=(i,e,t,r)=>i.map(n=>as(n,e,t)).reduce((n,o)=>n.concat(o),[]).concat(r.map(cs)),ar=class{async provideCompletionItems(e,t){if(e.getText(new Te.Range(t.translate(0,-1),t))===".")return[];let n=await U.getAllMethod(),o=await U.buildScript(e,{usingCache:!0});return us(n.map(s=>({...s,variables:s.variables.map(h=>h.name)})),e.uri.toString(),t.line,o.variables.map(s=>s.name))}};var rn=require("fs"),cr=H(require("vscode")),nn=H(require("child_process"));var ls=(i,e)=>{let t=i.getText(e).trim();if(t)return t;let r=i.getText(i.getWordRangeAtPosition(e.active));return r.includes(`
`)?"":r},ps=(i,e)=>`
SetWinDelay 10
SetKeyDelay 0
searchText := "${i}"
IfWinNotExist, AutoHotkey Help
{
    Run ${e}
    WinWait AutoHotkey Help
}
WinActivate
WinWaitActive
StringReplace, searchText, searchText, #, {#}
Send, !s
Sleep 200
Send {home}
Sleep 10
Send +{end}%searchText%{enter}
ExitApp
`,hs=(i,e)=>`
SetWinDelay(10)
SetKeyDelay(0)
searchText := "${i}"
if (not WinExist("AutoHotkey v2 Help", ""))
{
    Run "${e}"
    WinWait "AutoHotkey v2 Help"
}
WinActivate
WinWaitActive
StrReplace(searchText, "#", "{#}")
Send "!s"
Sleep 200
Send "{home}"
Sleep 10
Send "+{end}" searchText "{enter}"
ExitApp()
`;async function Eo(){let i=cr.window.activeTextEditor;if(!i)return;let e=ls(i.document,i.selection),t=oe()?X.getConfig("file.helpPathV1"):X.getConfig("file.helpPathV2"),r=X.getConfig(oe()?"file.interpreterPathV1":"file.interpreterPathV2"),n=oe()?ps:hs;if(!(0,rn.existsSync)(t)){cr.window.showErrorMessage(`Help path "${t}" does not exist`);return}if(!(0,rn.existsSync)(r)){cr.window.showErrorMessage(`Interpreter path "${r}" does not exist`);return}try{nn.execSync(`"${r}" /ErrorStdOut *`,{input:n(e,t)})}catch{nn.execSync(`"${r}" /ErrorStdOut *`,{input:n("",t)})}}var pe=H(require("vscode"));var fs=i=>{let t=i.getText(new pe.Range(0,0,50,0)),r=/^[ \t]*#Requires[ \t]+AutoHotkey[ \t]v?(1|2)\b/im,n=t.match(r);return n?Number.parseInt(n[1]):void 0},ds=i=>e=>{if(!e||!at(e.languageId)||i.has(e.uri))return;i.add(e.uri);let t=fs(e),r=["ahk","ahk2"][t-1],n=e.languageId;r&&r!==n&&ms(e,r)},ms=(i,e)=>{pe.languages.setTextDocumentLanguage(i,e).then(t=>{let r=oe()?"v1":"v2";pe.window.showInformationMessage(`Found '#Requires ${r}'. Switched to AutoHotkey ${r}.`)},t=>{pe.window.showErrorMessage(`Failed to switch to ${e}:
${t.message}`)})},Po=i=>{let e=ds(new Set);pe.window.onDidChangeActiveTextEditor(t=>e(t==null?void 0:t.document),null,i.subscriptions),pe.window.tabGroups.all.forEach(t=>t.tabs.filter(r=>r.input instanceof pe.TabInputText).forEach(async r=>{let n=await pe.workspace.openTextDocument(r.input.uri);e(n)}))};function gs(i){(async()=>(X.updateStatusBarItems("Indexing AutoHotkey Workspace..."),await U.buildByPath(K.workspace.rootPath),X.updateStatusBarItems("Index Workspace Success!"),X.hide()))();let e={language:"ahk"};$e.init(i),Po(i),i.subscriptions.push(K.languages.registerHoverProvider(e,new rr(i)),K.languages.registerDefinitionProvider(e,new Yt),K.languages.registerRenameProvider(e,new or),K.languages.registerSignatureHelpProvider(e,new sr,"(",","),K.languages.registerDocumentSymbolProvider(e,new tr),K.languages.registerDocumentFormattingEditProvider(e,new Jt),K.languages.registerReferenceProvider(e,new nr),K.debug.registerDebugAdapterDescriptorFactory("ahk",new on),co(),K.commands.registerCommand("ahk++.compile",()=>de.compile(!1)),K.commands.registerCommand("ahk++.compilerGui",()=>de.compile(!0)),K.commands.registerCommand("ahk++.debug",()=>de.startDebugger()),K.commands.registerCommand("ahk++.openHelp",Eo),K.commands.registerCommand("ahk++.run",()=>de.run()),K.commands.registerCommand("ahk++.runSelection",()=>de.runSelection())),X.getConfig("intellisense.enableIntellisense")&&i.subscriptions.push(K.languages.registerCompletionItemProvider(e,new ar,"."))}var on=class{createDebugAdapterDescriptor(e){return new K.DebugAdapterInlineImplementation(new tt)}};0&&(module.exports={activate});
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */
